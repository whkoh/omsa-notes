<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2023-03-05 Sun 20:27 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>MGT 6203: Data Analytics in Business</title>
<meta name="author" content="W" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="../src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../src/readtheorg_theme/css/readtheorg.css"/>
<script type="text/javascript" src="../src/lib/js/jquery.min.js"></script>
<script type="text/javascript" src="../src/lib/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="../src/readtheorg_theme/js/readtheorg.js"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">MGT 6203: Data Analytics in Business</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orge9aa2b8">1. Module 01: Linear Regression</a>
<ul>
<li><a href="#org5a13e6b">1.1. Steps in Regression Analysis</a>
<ul>
<li><a href="#org32e67a3">1.1.1. Business examples (Dependent vs independent variables)</a></li>
<li><a href="#org273c837">1.1.2. M1L1 lecture quiz</a></li>
</ul>
</li>
<li><a href="#org1052347">1.2. Real estate pricing example</a>
<ul>
<li><a href="#org0b74f69">1.2.1. Housing dataset <code>ecdat</code></a></li>
<li><a href="#org01f8543">1.2.2. M1L2 lecture quiz</a></li>
</ul>
</li>
<li><a href="#org9e6c532">1.3. Notation in regression analysis</a>
<ul>
<li><a href="#org6bc8f1b">1.3.1. Steps with example</a></li>
<li><a href="#org2db6849">1.3.2. M1L3 lecture quiz</a></li>
</ul>
</li>
<li><a href="#org9fcb884">1.4. \(R^2\) and Adjusted \(R^2\)</a>
<ul>
<li><a href="#org3eee51e">1.4.1. Deviations</a></li>
<li><a href="#org2d8436f">1.4.2. Regression output \(R^2\) and Adjusted \(R^2\)</a></li>
<li><a href="#org48ac7fc">1.4.3. Examples</a></li>
<li><a href="#orgc892fa2">1.4.4. M1L4 lecture quiz</a></li>
</ul>
</li>
<li><a href="#org0e011c1">1.5. Simple regression with 1 variable in R</a>
<ul>
<li><a href="#org8afc782">1.5.1. Interpreting coefficients</a></li>
<li><a href="#orge0a72e4">1.5.2. F-test: shows whether model is significant</a></li>
<li><a href="#orgd0e269f">1.5.3. M1L5 no lecture quiz</a></li>
</ul>
</li>
<li><a href="#orgbc97972">1.6. Multiple regression</a>
<ul>
<li><a href="#orgdbc4c7c">1.6.1. Regression output</a></li>
<li><a href="#org9d8fc5b">1.6.2. M1L6 no lecture quiz</a></li>
</ul>
</li>
<li><a href="#orgad6fbb1">1.7. \(R^2\) and adjusted \(R^2\) in multiple regression</a></li>
<li><a href="#org1bbf0fa">1.8. Simple vs multiple regression</a></li>
<li><a href="#org97f7f85">1.9. M1L7 lecture quiz</a></li>
<li><a href="#orgb15636a">1.10. M1L8 Common problems and fixes in fixing regression (I)</a>
<ul>
<li><a href="#org557765d">1.10.1. Assumptions of linear regression</a></li>
<li><a href="#org5bde159">1.10.2. Common problems in fitting Linear Regression</a></li>
<li><a href="#orgfacdf77">1.10.3. (1) Non linear relationship</a></li>
<li><a href="#org0e50706">1.10.4. (2) Correlation of error terms</a></li>
<li><a href="#orgbfc0ae6">1.10.5. (3) Heteroskedasticity (non-constant error variance)</a></li>
<li><a href="#org6ac6424">1.10.6. M1L8 lecture quiz</a></li>
</ul>
</li>
<li><a href="#org691fe7e">1.11. M1L9 Common problems and fixes in fixing regression (II)</a>
<ul>
<li><a href="#org85ffdd1">1.11.1. (4) Outliers</a></li>
<li><a href="#org0a13d35">1.11.2. (5) High leverage points</a></li>
<li><a href="#org02952f1">1.11.3. Plots in R</a></li>
<li><a href="#org2063334">1.11.4. (6) Multicollinearity</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgd12862d">2. Module 02: Indicator variables and Interaction Terms</a>
<ul>
<li><a href="#org3de1d44">2.1. M2L1: Intro (Customer Analytics Dataset)</a>
<ul>
<li><a href="#org6d231fb">2.1.1. No lecture quiz</a></li>
</ul>
</li>
<li><a href="#org19211d4">2.2. M2L2: Creating and Using Indicator Variables</a>
<ul>
<li><a href="#org8b9302d">2.2.1. M2L2 lecture quiz</a></li>
</ul>
</li>
<li><a href="#orgb35602c">2.3. M2L3: Interpreting the coefficients of indicator variables</a>
<ul>
<li><a href="#org8128187">2.3.1. DR1: regression with dummy variable</a></li>
<li><a href="#org6ebbc94">2.3.2. DR2: regression with salary and dummy variables</a></li>
<li><a href="#org7c89f68">2.3.3. M2L3 lecture quiz</a></li>
</ul>
</li>
<li><a href="#org6f793e0">2.4. M2L4: Interaction term and interpreting its coefficient</a>
<ul>
<li><a href="#org4a61418">2.4.1. Interaction term</a></li>
<li><a href="#orgcbb877b">2.4.2. M2L4 lecture quiz</a></li>
<li><a href="#org92df32e">2.4.3. Categorical variable with \(\text{M}\) values</a></li>
</ul>
</li>
<li><a href="#org47d14ea">2.5. M2L5: Another example of using indicator variables</a>
<ul>
<li><a href="#orged42b8a">2.5.1. Airbnb Los Angeles dataset</a></li>
<li><a href="#orgd95faa6">2.5.2. 2DR1: How does room price vary by capacity?</a></li>
<li><a href="#org35758f2">2.5.3. 2DR2: 2nd regression with capacity and dummies</a></li>
<li><a href="#org56b1a4f">2.5.4. Interaction terms</a></li>
<li><a href="#org7e617a0">2.5.5. No lecture quiz</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org5f9ada4">3. Module 03: Non-linear transformation models</a>
<ul>
<li><a href="#org6c914ef">3.1. M3L1: Intro (and why needed)</a>
<ul>
<li><a href="#org55114bc">3.1.1. Summary of models</a></li>
</ul>
</li>
<li><a href="#orgeca70c0">3.2. M3L2: Linear-Log model</a>
<ul>
<li><a href="#org0e61834">3.2.1. Interpretation of coefficients</a></li>
<li><a href="#org9f4eca9">3.2.2. No lecture quiz</a></li>
</ul>
</li>
<li><a href="#orga8b6326">3.3. M3L3: Log-Linear model</a>
<ul>
<li><a href="#org83a2b22">3.3.1. Interpretation of coefficients</a></li>
<li><a href="#orgb4d47c5">3.3.2. Derivation</a></li>
<li><a href="#org636c655">3.3.3. No lecture quiz</a></li>
</ul>
</li>
<li><a href="#org369c1c7">3.4. M3L4: Log-Log model</a>
<ul>
<li><a href="#org7ebc46c">3.4.1. Interpretation</a></li>
<li><a href="#org4d5ae5c">3.4.2. Reasons for log-transforming data</a></li>
<li><a href="#orgaebe622">3.4.3. Summary of models and interpretation</a></li>
<li><a href="#org1595ee5">3.4.4. M3L4 no lecture quiz</a></li>
</ul>
</li>
<li><a href="#org25d42b6">3.5. M3L5: Polynomial model</a>
<ul>
<li><a href="#org9fb14f1">3.5.1. M3L5 no lecture quiz</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org6c24f15">4. Module 04: Logistic Regression</a>
<ul>
<li><a href="#orge1aeff2">4.1. M4L1: Odds</a>
<ul>
<li><a href="#org7f31907">4.1.1. <i>Odds For</i> in statistics</a></li>
<li><a href="#org5243f91">4.1.2. M4L1 lecture quiz</a></li>
</ul>
</li>
<li><a href="#orgc04f59a">4.2. M4L2: Binary Dependent Variable</a>
<ul>
<li><a href="#orgcd05315">4.2.1. M4L2 no lecture quiz</a></li>
</ul>
</li>
<li><a href="#org1d4e36d">4.3. M4L3: Logistic Regression</a>
<ul>
<li><a href="#org19aac35">4.3.1. Comparison of logisitic and linear regression</a></li>
<li><a href="#orgfacd9af">4.3.2. Implementing logistic regression</a></li>
<li><a href="#orgbc6f27a">4.3.3. Why transform from probability to log odds?</a></li>
<li><a href="#org6f4b39a">4.3.4. Interpreting logistic regression model</a></li>
<li><a href="#org1261ddf">4.3.5. M4L3 lecture quiz</a></li>
</ul>
</li>
<li><a href="#org5545f37">4.4. M4L4: Logistic Regression using the <i>Default</i> dataset</a>
<ul>
<li><a href="#org03a594d">4.4.1. M1: no predictors \(\text{logit}(p) = b_0\)</a></li>
<li><a href="#org0811bb8">4.4.2. M2: single binary predictor  \(\text{logit}(p) = b_0+b_1\times \text{stdt}\)</a></li>
<li><a href="#org272449a">4.4.3. M3: single continuous predictor  \(\text{logit}(p) = b_0+b_1\times \text{balance}\)</a></li>
<li><a href="#org11848f5">4.4.4. M4: multiple predictors \(\text{logit}(p) = b_0 + b_1\times \text{balance} + b_2 \times \text{income} + b_3 \times \text{stdt}\)</a></li>
<li><a href="#org9705a6c">4.4.5. M4L4 lecture quiz</a></li>
</ul>
</li>
<li><a href="#org13b4276">4.5. M4L5: Predictions and Confusion Matrix</a>
<ul>
<li><a href="#orgd6b6712">4.5.1. True Negative and False Positive</a></li>
<li><a href="#orgd7e702e">4.5.2. True Positive and False Negative</a></li>
<li><a href="#org6697f98">4.5.3. Confusion matrix</a></li>
</ul>
</li>
<li><a href="#org9b52b8d">4.6. M4L6: Sensitivity, Specificity, and the ROC curve</a>
<ul>
<li><a href="#org9bc1925">4.6.1. Definitions</a></li>
<li><a href="#org4e61896">4.6.2. Type I and II errors</a></li>
<li><a href="#org631e15f">4.6.3. Calculating sensitivity and specificity for cutoff \(p = 0.5\)</a></li>
<li><a href="#orgf1704a1">4.6.4. Increasing cutoff to \(p=0.9\)</a></li>
<li><a href="#org4a4deb9">4.6.5. Increasing cutoff value of \(p\)</a></li>
<li><a href="#orgc92be6e">4.6.6. ROC Curve</a></li>
<li><a href="#org066809e">4.6.7. M4L6 lecture quiz</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org39ca6f4">5. Module 05: Treatment Effects</a>
<ul>
<li><a href="#orga38ff0a">5.1. M5L1: Correlations vs. Causality</a>
<ul>
<li><a href="#org4306d6c">5.1.1. Correlation</a></li>
<li><a href="#org647a628">5.1.2. Strong Corr(A,B)</a></li>
<li><a href="#org009c688">5.1.3. <i>Post hoc ergo propter hoc</i></a></li>
<li><a href="#org4533f05">5.1.4. Causation</a></li>
<li><a href="#orgc08bf3c">5.1.5. Relevance</a></li>
<li><a href="#orgb878b45">5.1.6. M5L1 no lecture quiz</a></li>
</ul>
</li>
<li><a href="#org512b7ec">5.2. M5L2: Selection Bias</a>
<ul>
<li><a href="#org9bacc1e">5.2.1. Assumptions in OLS estimation when estimating slope coefficient, \(b_1\)</a></li>
<li><a href="#orgf2103ee">5.2.2. Controlling selection bias</a></li>
<li><a href="#orgf7f3aca">5.2.3. M52 no lecture quiz</a></li>
</ul>
</li>
<li><a href="#orgd7fc9f4">5.3. M5L3: Randomized Controlled Experiment and the Difference Estimator</a>
<ul>
<li><a href="#orga881110">5.3.1. Regression model</a></li>
<li><a href="#org4518906">5.3.2. Difference estimator</a></li>
</ul>
</li>
<li><a href="#org1fddbf8">5.4. M5L4: Star Experiment: Effect of Small Class Size</a>
<ul>
<li><a href="#org5357c10">5.4.1. Summary</a></li>
<li><a href="#orgc630df9">5.4.2. Check for random assignment</a></li>
<li><a href="#orgd916589">5.4.3. Summary stats</a></li>
<li><a href="#org095e627">5.4.4. First regression</a></li>
<li><a href="#orga43fbb3">5.4.5. Second regression</a></li>
<li><a href="#orgfb6ab68">5.4.6. M5L4 no lecture quiz</a></li>
</ul>
</li>
<li><a href="#orgad529e2">5.5. M5L5: Natural Experiments and Difference-in-Difference Estimator</a>
<ul>
<li><a href="#org3f0ad9f">5.5.1. Definition</a></li>
<li><a href="#orgcfce217">5.5.2. Examples</a></li>
<li><a href="#org068bea3">5.5.3. Counterfactual</a></li>
<li><a href="#org93332fc">5.5.4. Example of natural experiment</a></li>
<li><a href="#orgda9e028">5.5.5. Difference-in-difference (D-in-D)</a></li>
<li><a href="#orgff116f6">5.5.6. Estimating D-in-D with regression</a></li>
<li><a href="#org13cfe8a">5.5.7. Model</a></li>
<li><a href="#orgbf78eab">5.5.8. Steps in natural experiment</a></li>
<li><a href="#orgd4b2e0c">5.5.9. M5L5 no lecture quiz</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org9f954fd">6. Module 06: Measuring Returns</a>
<ul>
<li><a href="#org3caaada">6.1. M6L1: Introduction</a></li>
<li><a href="#org3552807">6.2. M6L2: Simple and compound returns</a>
<ul>
<li><a href="#org6eafbec">6.2.1. Objectives</a></li>
<li><a href="#org571d779">6.2.2. Simple return</a></li>
<li><a href="#org4996a39">6.2.3. Compounded returns</a></li>
<li><a href="#org51b1e49">6.2.4. Calculating compound returns in R</a></li>
<li><a href="#org3591a57">6.2.5. M6L2 Summary (No lecture quiz)</a></li>
</ul>
</li>
<li><a href="#org8485387">6.3. M6L3: Measuring risk</a>
<ul>
<li><a href="#orgd86cc82">6.3.1. Both risk <b>and</b> return matter when investing</a></li>
<li><a href="#org55febba">6.3.2. Standard deviation of returns</a></li>
<li><a href="#org220baef">6.3.3. Standard deviation ~ Total risk</a></li>
<li><a href="#org1d2de6e">6.3.4. Decomposing risk</a></li>
<li><a href="#org8c4c876">6.3.5. Interpreting &beta;</a></li>
<li><a href="#org0d54b0f">6.3.6. High-water mark and drawdown</a></li>
<li><a href="#org9e9b836">6.3.7. Estimating mean return and standard deviation</a></li>
<li><a href="#org439971a">6.3.8. Estimating &beta; and R<sup>2</sup></a></li>
<li><a href="#org87eb27f">6.3.9. Drawdown</a></li>
<li><a href="#org00461ac">6.3.10. Summary (no lecture quiz)</a></li>
</ul>
</li>
<li><a href="#orge26b27d">6.4. M6L4: Historical returns</a>
<ul>
<li><a href="#org8ecfeca">6.4.1. Asset classes</a></li>
<li><a href="#org5f1a757">6.4.2. Value of $1 invested in different asset classes:</a></li>
<li><a href="#org0a3e956">6.4.3. Risk</a></li>
<li><a href="#org75c7506">6.4.4. Summary (no lecture quiz)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org095cbc7">7. Module 07: Measuring Risk-Adjusted Performance</a>
<ul>
<li><a href="#orgf265ffd">7.1. M7L1: Risk Adjusted Performance</a>
<ul>
<li><a href="#org30f6a84">7.1.1. A Way to Keep Score</a></li>
<li><a href="#org770c35a">7.1.2. Benchmark comparisons</a></li>
<li><a href="#orgb1c83af">7.1.3. Sharpe ratio</a></li>
<li><a href="#org0756b97">7.1.4. Treynor Ratio</a></li>
<li><a href="#org576951b">7.1.5. Jensen's alpha</a></li>
</ul>
</li>
<li><a href="#org90ec69c">7.2. M7L2: Transaction Costs</a>
<ul>
<li><a href="#org717d201">7.2.1. Impact of transaction costs on performance</a></li>
<li><a href="#org3ccfc6e">7.2.2. Over investing lifetime, transaction costs can have big impact</a></li>
<li><a href="#orgfe4bc87">7.2.3. Types / components of transaction costs</a></li>
<li><a href="#orge8af1aa">7.2.4. Bid-ask spread illustration</a></li>
<li><a href="#org5dcfd8a">7.2.5. Delay cost example</a></li>
<li><a href="#org8963106">7.2.6. Size of trading cost</a></li>
<li><a href="#org4818aea">7.2.7. Summary (no lecture quiz)</a></li>
</ul>
</li>
<li><a href="#org9c0b85e">7.3. M7L3: Market Efficiency</a>
<ul>
<li><a href="#org8ca3a6c">7.3.1. Stock price reflects information</a></li>
<li><a href="#orgaa4cb0f">7.3.2. The Army of Investors</a></li>
<li><a href="#orga6c8d0a">7.3.3. Implications</a></li>
<li><a href="#orga19ef27">7.3.4. Efficient markets</a></li>
<li><a href="#org1b0f553">7.3.5. Market efficiency: 'theory of sharks'</a></li>
<li><a href="#orged0841a">7.3.6. Evidence of market efficiency</a></li>
<li><a href="#org7801df3">7.3.7. Not easy to beat market</a></li>
<li><a href="#org6232082">7.3.8. Summary (no lecture quiz)</a></li>
</ul>
</li>
<li><a href="#orgecd32a1">7.4. M7L4: Behavioural Finance</a>
<ul>
<li><a href="#orgff34c0c">7.4.1. Markets cannot be perfectly efficient</a></li>
<li><a href="#orgc19103a">7.4.2. Behavioural finance</a></li>
<li><a href="#org166cc5b">7.4.3. Investors have many behavioural biases</a></li>
<li><a href="#orgba01775">7.4.4. Summary (no lecture quiz)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgf956416">8. Module 08: Factor-based Investing (Investing Analytics)</a>
<ul>
<li><a href="#orgd4d6934">8.1. M8L1: Identifying factors</a>
<ul>
<li><a href="#orgbb6c1f7">8.1.1. Size effect</a></li>
<li><a href="#org384f70b">8.1.2. Value effect</a></li>
<li><a href="#org70d3915">8.1.3. Momentum effect</a></li>
<li><a href="#orgb5f09f4">8.1.4. Profitability effect (i.e., Quality)</a></li>
<li><a href="#orgb2f308a">8.1.5. Risk effect</a></li>
</ul>
</li>
<li><a href="#org597a9c2">8.2. M8L2: Interpreting factor regressions</a>
<ul>
<li><a href="#org9493594">8.2.1. Factor regressions</a></li>
<li><a href="#org4dc1df2">8.2.2. Interpreting factor regressions</a></li>
<li><a href="#org94fd4bc">8.2.3. Takeaways from factor regression</a></li>
<li><a href="#org457496c">8.2.4. Summary</a></li>
</ul>
</li>
<li><a href="#org7fb43ce">8.3. M8L3: Concluding</a>
<ul>
<li><a href="#org7edff2e">8.3.1. Topic 1 recap</a></li>
<li><a href="#orgf01c561">8.3.2. Topic 2 recap</a></li>
<li><a href="#org95213fe">8.3.3. Topic 3 recap</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-orge9aa2b8" class="outline-2">
<h2 id="orge9aa2b8"><span class="section-number-2">1.</span> Module 01: Linear Regression</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org5a13e6b" class="outline-3">
<h3 id="org5a13e6b"><span class="section-number-3">1.1.</span> Steps in Regression Analysis</h3>
<div class="outline-text-3" id="text-1-1">
<ol class="org-ol">
<li>State problem</li>
<li>Use regression for:
<ul class="org-ul">
<li>Diagnostic, or</li>
<li>Predictive, or</li>
<li>Prescriptive analytics?</li>
</ul></li>
<li>Select relevant response and explanatory variables</li>
<li>Collect data
<ul class="org-ul">
<li>Internal</li>
<li>External</li>
<li>Purchased</li>
<li>Experiment</li>
</ul></li>
<li>Choose fitting method
<ul class="org-ul">
<li>Ordinary least squares (OLS)</li>
<li>Generalized least squares</li>
<li>Maximum likelihood</li>
</ul></li>
<li>Fit model</li>
<li>Validate model with diagnostics</li>
<li>Refine and iterate from step 3</li>
<li>Use model</li>
</ol>
</div>
<div id="outline-container-org32e67a3" class="outline-4">
<h4 id="org32e67a3"><span class="section-number-4">1.1.1.</span> Business examples (Dependent vs independent variables)</h4>
<div class="outline-text-4" id="text-1-1-1">
<dl class="org-dl">
<dt>Used car price</dt><dd>odometer reading, age of car, condition</dd>
<dt>Sales</dt><dd>ad spend</dd>
<dt>Time taken to repair product</dt><dd>experience of technician</dd>
<dt>Product added to shopping card</dt><dd>ratings/price</dd>
<dt>Starting salary of new employee</dt><dd>work and education experience</dd>
<dt>Sale price of house</dt><dd>square feet, bedrooms, location</dd>
<dt>Customer default?</dt><dd>Credit score, income, age</dd>
<dt>Customer churn?</dt><dd>Length of contract, age of customer</dd>
</dl>
</div>
</div>
<div id="outline-container-org273c837" class="outline-4">
<h4 id="org273c837"><span class="section-number-4">1.1.2.</span> M1L1 lecture quiz</h4>
<div class="outline-text-4" id="text-1-1-2">
<ol class="org-ol">
<li>Variable eg price <b>can</b> be either dependent or independent variable, depends on purpose of model</li>
<li>Binary value variable <b>can</b> be dependent variable, eg logistic regression</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org1052347" class="outline-3">
<h3 id="org1052347"><span class="section-number-3">1.2.</span> Real estate pricing example</h3>
<div class="outline-text-3" id="text-1-2">
<ol class="org-ol">
<li>Example: sell house, predict listing price.</li>
<li>Can ask realtors, but is there a more analytical approach?
<ul class="org-ul">
<li>They normally use "comparables" to suggest a listing price</li>
</ul></li>
<li>If actual data with price, size, bedroom and bathroom number, etc, are available, regression can be used to help get a better price estimate</li>
</ol>
</div>
<div id="outline-container-org0b74f69" class="outline-4">
<h4 id="org0b74f69"><span class="section-number-4">1.2.1.</span> Housing dataset <code>ecdat</code></h4>
<div class="outline-text-4" id="text-1-2-1">
<ul class="org-ul">
<li>Can be used for this problem</li>
<li>Data from Canadian city Windsor from 1987</li>
<li>Or, collect or scrape prices from the web</li>
<li>Do EDA, e.g.:
<ul class="org-ul">
<li>histogram</li>
<li>correlation matrix</li>
<li>scatter plot with linear regression line</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org01f8543" class="outline-4">
<h4 id="org01f8543"><span class="section-number-4">1.2.2.</span> M1L2 lecture quiz</h4>
<div class="outline-text-4" id="text-1-2-2">
<ol class="org-ol">
<li>For right-skewed distribution, mean is <b>larger</b> than median</li>
<li>Correlation coefficient only captures <b>linear</b> relationships</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org9e6c532" class="outline-3">
<h3 id="org9e6c532"><span class="section-number-3">1.3.</span> Notation in regression analysis</h3>
<div class="outline-text-3" id="text-1-3">
<dl class="org-dl">
<dt>Explanatory</dt><dd>independent variables</dd>
<dt>Response</dt><dd>dependent variables</dd>
<dt>\(i = 1, 2, ..., n\)</dt><dd>\(i\) th observation or record in dataset, typically a sample</dd>
<dt>\(\{x_{11}, ..., x_{p1}\}, \{...\}, \{x_{1n}, ..., x_{pn}\}\)</dt><dd>\(n\) observations of \(p\) explanatory variables</dd>
<dt>\(y_1, ..., y_n\)</dt><dd>\(n\) observations of the dependent variable</dd>
<dt>\(\bar{y}\)</dt><dd>mean value of dependent variable, \(y\)</dd>
<dt>\(\bar{x}_k\)</dt><dd>mean value of \(x_k\) th explanatory variable</dd>
<dt>\(\beta_0, ..., \beta_p\)</dt><dd>parameters of regression line for population</dd>
<dt>\(b_0, ..., b_p\)</dt><dd>estimates of \(\beta\) parameters obtained by fitting the <b>sample</b> data</dd>
<dt>\(\epsilon_i\)</dt><dd>error term for \(i\) th observation in population</dd>
<dt>\(e_i\)</dt><dd>error term for \(i\) th observation int he sample</dd>
<dt>\(\widehat{y}_i\)</dt><dd>estimated value of \(y\) for the \(i\) th observation in sample. Obtain by evaluating regression function at \(x_i\)</dd>
</dl>
</div>
<div id="outline-container-org6bc8f1b" class="outline-4">
<h4 id="org6bc8f1b"><span class="section-number-4">1.3.1.</span> Steps with example</h4>
<div class="outline-text-4" id="text-1-3-1">
<ol class="org-ol">
<li>Observe data in <code>ecdat</code>, which is a sample</li>
<li>Build model for population (valid relation)
\[
   Y_i = \beta_0 + \beta_1 X_i + \epsilon_i
   \]</li>
<li>\(\epsilon_i\) are independently and identically distributed (iid) random variables, normally distributed with mean 0 and s.d. \(\sigma\)</li>
<li>We don't know \(\beta_0\), \(\beta_1\), \(\sigma\) so need to estimate with <b>sample</b> data</li>
<li>Using sample, we build model:
\[
   Y_i = b_0 + b_1 X_i + e_i
   \]</li>
<li>Population model is <b>homoskedastic</b> i.e., has constant \(\sigma\), and has mean 0.</li>
<li>Split data into say 100 samples and model these. Of 100, 95 will have the <b>population</b> slope.</li>
</ol>
</div>
<ol class="org-ol">
<li><a id="org2faed11"></a>Use OLS to fit the line<br />
<div class="outline-text-5" id="text-1-3-1-1">
<p>
Interpretation:
</p>
<ol class="org-ol">
<li>Find mean \(\bar{y}\)</li>
<li>Regression line: \(\widehat{y} = b_0 + b_1 x\)</li>
<li>Intercept at \(x=0\), \(y=b_0\)</li>
<li>For any point \(x_i\):
<ul class="org-ul">
<li>Predicted value is \(\widehat{y}_i\).</li>
<li>Actual value is \(y_i\).</li>
<li>Need to minimize total deviation as defined by sum of squared error.</li>
<li>Total deviation is against \(\bar{y}\):
<ul class="org-ul">
<li>Explained deviation is \(\widehat{y} - \bar{y}\)</li>
<li>Total deviation is \(y_i - \bar{y}\)</li>
<li><b>Residual (error term) is unexplained deviation</b>, i.e. \(y_i - \widehat{y}_i\)</li>
</ul></li>
</ul></li>
</ol>
</div>
</li>
</ol>
</div>
<div id="outline-container-org2db6849" class="outline-4">
<h4 id="org2db6849"><span class="section-number-4">1.3.2.</span> M1L3 lecture quiz</h4>
<div class="outline-text-4" id="text-1-3-2">
<ol class="org-ol">
<li>The total deviation at \((x_i, y_i)\) is \(y_i - \bar{y}\): true</li>
<li>In OLS, the intercepts of slope and intercept do depend on the sample being used.</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org9fcb884" class="outline-3">
<h3 id="org9fcb884"><span class="section-number-3">1.4.</span> \(R^2\) and Adjusted \(R^2\)</h3>
<div class="outline-text-3" id="text-1-4">
</div>
<div id="outline-container-org3eee51e" class="outline-4">
<h4 id="org3eee51e"><span class="section-number-4">1.4.1.</span> Deviations</h4>
<div class="outline-text-4" id="text-1-4-1">
<dl class="org-dl">
<dt>Sum of deviations</dt><dd>SST = SSE + SSR</dd>
<dt>SST</dt><dd>Total sum of squares = \(\sum_{i}(y_i-\bar{y})^2\)</dd>
<dt>SSE</dt><dd>Sum of squared errors = \(\sum_{i}(y_i-\widehat{y}_i)^2\)</dd>
<dt>SSR</dt><dd>Sum of squares regression = \(\sum_{i}(\bar{y} - \widehat{y}_i)^2\)</dd>
</dl>
</div>
</div>
<div id="outline-container-org2d8436f" class="outline-4">
<h4 id="org2d8436f"><span class="section-number-4">1.4.2.</span> Regression output \(R^2\) and Adjusted \(R^2\)</h4>
<div class="outline-text-4" id="text-1-4-2">
<dl class="org-dl">
<dt>\(R^2\)</dt><dd>coefficient of determination. Measures strength of relationship between dependent and independent variables.
<ul class="org-ul">
<li>\(R^2\) never decreases as you add variables</li>
<li>\(R^2\) = 1-(SSE/SST) = SSR/SST = <b>explained deviation/total deviation</b></li>
<li>\(R^2\) shows how much of variation in \(Y\) (vs. mean) has been explained by the model.</li>
</ul></dd>
<dt>Adjusted \(R^2\)</dt><dd>accounts for the fact that adding variables increases predictiveness
<ul class="org-ul">
<li>Adjusted \(R^2\) adds a penalty for the number of independent variables \(p\)</li>
<li>Adjusted \(R^2\) = \(1-\frac{SSE/(n-p-1)}{SST/(n-1)}\)</li>
</ul></dd>
</dl>
</div>
</div>
<div id="outline-container-org48ac7fc" class="outline-4">
<h4 id="org48ac7fc"><span class="section-number-4">1.4.3.</span> Examples</h4>
<div class="outline-text-4" id="text-1-4-3">
<dl class="org-dl">
<dt>When \(R^2\) = 1</dt><dd>X accounts for all variation in Y. SSE = 0</dd>
<dt>When \(R^2\) = 0</dt><dd>X accounts for none of variation in Y. SSE = 1</dd>
<dt>When \(R^2\) = 0.75</dt><dd>X accounts for most of the variation. SSE = 0.25</dd>
</dl>
</div>
</div>
<div id="outline-container-orgc892fa2" class="outline-4">
<h4 id="orgc892fa2"><span class="section-number-4">1.4.4.</span> M1L4 lecture quiz</h4>
<div class="outline-text-4" id="text-1-4-4">
<ol class="org-ol">
<li>When \(R^2\) = 0, X values account for none of the variation in Y.</li>
<li>\(R^2\) can take values in \((0,1)\)</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org0e011c1" class="outline-3">
<h3 id="org0e011c1"><span class="section-number-3">1.5.</span> Simple regression with 1 variable in R</h3>
<div class="outline-text-3" id="text-1-5">
<ul class="org-ul">
<li>Using <code>lm</code> in R to fit simple linear regression</li>
<li>Residuals are shown first. Residuals are the unexplained deviation/error, i.e. \(y_i-\widehat{y}_i\).</li>
<li>Output of running regression models in R:
<ol class="org-ol">
<li>Null and alternative hypotheses</li>
<li>Coefficients:
<ul class="org-ul">
<li><code>Estimate</code> shows the value</li>
<li><code>Std. Error</code> shows the standard deviation</li>
<li><code>t value</code> = coefficient / standard error</li>
<li>To reject null hypothesis, <code>Pr(&gt;|t|)</code> i.e. p-value must be very small</li>
</ul></li>
<li>p-value: the probability of finding a t-value of this size if the null hypothesis is <b>true</b>.</li>
<li>F-statistic: the probability that \(b_1 = 0\).</li>
</ol></li>
</ul>
</div>
<div id="outline-container-org8afc782" class="outline-4">
<h4 id="org8afc782"><span class="section-number-4">1.5.1.</span> Interpreting coefficients</h4>
<div class="outline-text-4" id="text-1-5-1">
<p>
<code>(Intercept) Estimate: 3.414e+04</code>
<code>lotsize Estimate: 6.599e+00</code>
</p>
<dl class="org-dl">
<dt>\(b_0\) = 34,140</dt><dd>Intercept of regression line on y. When lotsize is 0. Less useful</dd>
<dt>\(b_1\) = 6.599</dt><dd>Increase of 1,000 sqft associated with increase of 6,599 of house keeping all else constant, <i>ceteris paribus</i>.</dd>
</dl>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Df</th>
<th scope="col" class="org-right">Sum Sq</th>
<th scope="col" class="org-left"><b>Error term</b></th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">lotsize</td>
<td class="org-right">1</td>
<td class="org-right">1.1156e+11</td>
<td class="org-left">SSR</td>
</tr>

<tr>
<td class="org-left">Residuals</td>
<td class="org-right">544</td>
<td class="org-right">2.7704e+11</td>
<td class="org-left">SSE</td>
</tr>
</tbody>
</table>
<ul class="org-ul">
<li>Regression output \(R^2\) and Adjusted \(R^2\). <b>Need to know how to calculate and interpret.</b></li>
<li>For simple regression, \(\sqrt{R^2}\) is the correlation coefficient between price and lotsize.</li>
</ul>
</div>
</div>
<div id="outline-container-orge0a72e4" class="outline-4">
<h4 id="orge0a72e4"><span class="section-number-4">1.5.2.</span> F-test: shows whether model is significant</h4>
<div class="outline-text-4" id="text-1-5-2">
<ul class="org-ul">
<li>i.e., reject \(H_0\)</li>
<li>Result is the F statistic</li>
<li>Can range from (0, \(\infty\))</li>
</ul>
</div>
</div>
<div id="outline-container-orgd0e269f" class="outline-4">
<h4 id="orgd0e269f"><span class="section-number-4">1.5.3.</span> M1L5 no lecture quiz</h4>
</div>
</div>
<div id="outline-container-orgbc97972" class="outline-3">
<h3 id="orgbc97972"><span class="section-number-3">1.6.</span> Multiple regression</h3>
<div class="outline-text-3" id="text-1-6">
<ol class="org-ol">
<li>Linear regression with multiple (\(p\)) explanatory variables</li>
<li>Terms:
<dl class="org-dl">
<dt>Regression coefficients</dt><dd>\(b_0, ..., b_p\) estimate \(\beta_0, ..., \beta_{p}\)</dd>
<dt>Prediction for Y at \(x_i\)</dt><dd>\(\widehat{y} = b_0 + b_1 x_{1i} + b_2 x_{2i} + ... + b_p x_{pi}\)</dd>
<dt>Residual</dt><dd>\(e_i = y_i - \widehat{y}_i\)</dd>
<dt>SSE</dt><dd>\(\sum_{i} (y_i - (b_0 + b_1 x_{1i} + b_2 x_{2i} + ... + b_p x_{pi}))^2\)</dd>
</dl></li>
<li>Goal is to choose \(b\) terms to minimize SSE</li>
<li>Add a variable, bedrooms. Question: does number of bedrooms explain the price?</li>
<li>Do EDA with plots/histogram</li>
</ol>
</div>
<div id="outline-container-orgdbc4c7c" class="outline-4">
<h4 id="orgdbc4c7c"><span class="section-number-4">1.6.1.</span> Regression output</h4>
<div class="outline-text-4" id="text-1-6-1">
<p>
b terms are estimates of true parameters \(\beta\) terms
\(H_0\) the parameters are \(0\), \(H_1\) they are not \(0\).
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Estimate</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">(Intercept)</td>
<td class="org-right">5.613e+03</td>
</tr>

<tr>
<td class="org-left">lotsize</td>
<td class="org-right">6.053e+00</td>
</tr>

<tr>
<td class="org-left">Bedrooms</td>
<td class="org-right">1.057e+04</td>
</tr>
</tbody>
</table>
<p>
all <i>ceteris paribus</i>:
</p>
<dl class="org-dl">
<dt>\(b_0\) = 5,613</dt><dd>intercept on y axis</dd>
<dt>\(b_1\) = 6.053</dt><dd>increase per square feet is $6.053</dd>
<dt>\(b_2\) = 10,570</dt><dd>increase per bedroom is $10,570</dd>
</dl>
</div>
</div>
<div id="outline-container-org9d8fc5b" class="outline-4">
<h4 id="org9d8fc5b"><span class="section-number-4">1.6.2.</span> M1L6 no lecture quiz</h4>
</div>
</div>
<div id="outline-container-orgad6fbb1" class="outline-3">
<h3 id="orgad6fbb1"><span class="section-number-3">1.7.</span> \(R^2\) and adjusted \(R^2\) in multiple regression</h3>
<div class="outline-text-3" id="text-1-7">
<p>
Anova table:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Df</th>
<th scope="col" class="org-right">Sum Sq</th>
<th scope="col" class="org-left"><b>Error term</b></th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">lotsize</td>
<td class="org-right">1</td>
<td class="org-right">1.1156e+11</td>
<td class="org-left">\(SSR_1\)</td>
</tr>

<tr>
<td class="org-left">bedrooms</td>
<td class="org-right">1</td>
<td class="org-right">3.23239e+10</td>
<td class="org-left">\(SSR_2\)</td>
</tr>

<tr>
<td class="org-left">Residuals</td>
<td class="org-right">543</td>
<td class="org-right">2.4472e+11</td>
<td class="org-left">SSE</td>
</tr>
</tbody>
</table>
<ul class="org-ul">
<li>\(\text{SSR}_1 + \text{SSR}_2\) = SSR</li>
<li>SSR + SSE = SST</li>
<li>Rejecting null hypothesis by analysing the F statistic means the model is significant.</li>
</ul>
</div>
</div>
<div id="outline-container-org1bbf0fa" class="outline-3">
<h3 id="org1bbf0fa"><span class="section-number-3">1.8.</span> Simple vs multiple regression</h3>
<div class="outline-text-3" id="text-1-8">
<ul class="org-ul">
<li>\(R^2\) will not decrease when adding variables</li>
<li>Higher adjusted \(R^2\) in multiple regression</li>
<li>Comparing 2 models with different number of variables:
\[
  F = \frac{(R^2_2 - R^2_1)/(p_2-p_1)}{(1-R^2_2)/(n-p_2-1)}
  \]</li>
</ul>
</div>
</div>
<div id="outline-container-org97f7f85" class="outline-3">
<h3 id="org97f7f85"><span class="section-number-3">1.9.</span> M1L7 lecture quiz</h3>
<div class="outline-text-3" id="text-1-9">
<ol class="org-ol">
<li>In general adding more variable <b>does not decrease</b> overall \(R^2\) value of multiple regression.</li>
<li><b>Small</b> p-value means that <b>there is evidence</b> that coefficient is <b>not</b> 0.</li>
</ol>
</div>
</div>
<div id="outline-container-orgb15636a" class="outline-3">
<h3 id="orgb15636a"><span class="section-number-3">1.10.</span> M1L8 Common problems and fixes in fixing regression (I)</h3>
<div class="outline-text-3" id="text-1-10">
</div>
<div id="outline-container-org557765d" class="outline-4">
<h4 id="org557765d"><span class="section-number-4">1.10.1.</span> Assumptions of linear regression</h4>
<div class="outline-text-4" id="text-1-10-1">
<dl class="org-dl">
<dt>Linearity</dt><dd>i.e. \(E(y) = b_0 + b_1 x\), i.e. the expected value of Y at each X is approximately a straight line</dd>
<dt>Assumptions about error terms</dt><dd>(a) The error terms are independent, and identically distributed (<b>iid</b>). (b) Each error term has mean 0 and constant variance &sigma;<sup>2</sup>, i.e. <b>homoscedastic</b></dd>
<dt>Assumptions about predictors</dt><dd>In multiple recession, the predictor variables are linearly independent of each other</dd>
</dl>
</div>
</div>
<div id="outline-container-org5bde159" class="outline-4">
<h4 id="org5bde159"><span class="section-number-4">1.10.2.</span> Common problems in fitting Linear Regression</h4>
<div class="outline-text-4" id="text-1-10-2">
<ol class="org-ol">
<li>Response/predictor relationship is non-linear</li>
<li>Error terms are correlated</li>
<li>Error terms have non-constant variance</li>
<li>Outliers</li>
<li>High leverage points</li>
<li>Collinearity</li>
</ol>
</div>
</div>
<div id="outline-container-orgfacdf77" class="outline-4">
<h4 id="orgfacdf77"><span class="section-number-4">1.10.3.</span> (1) Non linear relationship</h4>
<div class="outline-text-4" id="text-1-10-3">
</div>
<ol class="org-ol">
<li><a id="org190227f"></a>Checks<br />
<div class="outline-text-5" id="text-1-10-3-1">
<ol class="org-ol">
<li>Check scatter plots of Y vs X, before fitting model</li>
<li>Check residuals vs fitted values (no pattern = good)</li>
</ol>
</div>
</li>
<li><a id="org2b0fd6a"></a>Workarounds<br />
<div class="outline-text-5" id="text-1-10-3-2">
<ol class="org-ol">
<li>Model non-linear relationship with higher order terms e.g. x<sup>2</sup></li>
<li>Use variance reducing transformations, e.g. log, to get better linear fit</li>
<li>Remove outliers or some parts of the observations driving non-linearity</li>
<li>Check for omitted variables</li>
<li>Check for systematic bias when collecting data</li>
<li><b>Check residuals!</b></li>
</ol>
</div>
</li>
</ol>
</div>
<div id="outline-container-org0e50706" class="outline-4">
<h4 id="org0e50706"><span class="section-number-4">1.10.4.</span> (2) Correlation of error terms</h4>
<div class="outline-text-4" id="text-1-10-4">
<ul class="org-ul">
<li>There is autocorrelation if error terms are correlated</li>
<li>Knowing error term e<sub>i</sub> should not have influence on size of e<sub>i+1</sub></li>
<li>This assumption is used to estimate standard errors of the model parameters</li>
<li>If autocorrelation exists:
<ul class="org-ul">
<li>Estimated standard errors &lt; true standard errors</li>
<li>Confidence intervals appear narrower than actual</li>
<li>P-values appear lower than actual</li>
<li>False sense of confidence</li>
</ul></li>
</ul>
</div>
<ol class="org-ol">
<li><a id="orgafe319d"></a>Checks<br />
<div class="outline-text-5" id="text-1-10-4-1">
<p>
With the Durbin-Watson test
</p>
</div>
</li>
</ol>
</div>
<div id="outline-container-orgbfc0ae6" class="outline-4">
<h4 id="orgbfc0ae6"><span class="section-number-4">1.10.5.</span> (3) Heteroskedasticity (non-constant error variance)</h4>
<div class="outline-text-4" id="text-1-10-5">
<ul class="org-ul">
<li>Model assumes: spread of responses around the straight line is the same at all \(x\)</li>
<li>Violated if there is non-constant error present, e.g. if errors increase with fitted values</li>
<li>If heteroskedastic:
<ul class="org-ul">
<li>Hypothesis test and confidence intervals misleading</li>
</ul></li>
</ul>
</div>
<ol class="org-ol">
<li><a id="orge280827"></a>Checks<br />
<div class="outline-text-5" id="text-1-10-5-1">
<ol class="org-ol">
<li>Residuals vs fitted values plot
<img src="./img/01-residuals-hskd.png" alt="01-residuals-hskd.png" /></li>
</ol>
</div>
</li>
<li><a id="orgfe127db"></a>Workarounds<br />
<div class="outline-text-5" id="text-1-10-5-2">
<ol class="org-ol">
<li>Transform the Y variable, e.g. \(ln(Y)\), \(\frac{1}{Y}\), etc.</li>
</ol>
</div>
</li>
</ol>
</div>
<div id="outline-container-org6ac6424" class="outline-4">
<h4 id="org6ac6424"><span class="section-number-4">1.10.6.</span> M1L8 lecture quiz</h4>
<div class="outline-text-4" id="text-1-10-6">
<ol class="org-ol">
<li>Scatter plot of Y vs X shows non-linear pattern -&gt; SHOULD change linear regression model</li>
<li>Autocorrelation is the correlation between each of the e<sub>i</sub> variables -&gt; True</li>
<li>Heteroskedasticity = constant error variance -&gt; FALSE</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org691fe7e" class="outline-3">
<h3 id="org691fe7e"><span class="section-number-3">1.11.</span> M1L9 Common problems and fixes in fixing regression (II)</h3>
<div class="outline-text-3" id="text-1-11">
</div>
<div id="outline-container-org85ffdd1" class="outline-4">
<h4 id="org85ffdd1"><span class="section-number-4">1.11.1.</span> (4) Outliers</h4>
<div class="outline-text-4" id="text-1-11-1">
<ol class="org-ol">
<li>y<sub>i</sub> value far from predicted \(\widehat{y}_i\)</li>
<li>Visualise by plotting residuals, or standardized residuals, vs predicted \(y\)</li>
<li>Points with std residuals &gt; 2-3 sd away from mean (0) are outliers</li>
<li>Causes:
<ol class="org-ol">
<li>Incorrect data recording</li>
<li>Phenomenon is not linear (model is wrong, missing predictor, etc)</li>
</ol></li>
<li>Should ensure fit is <b>not</b> overly determined by one/ a few observations i.e. outliers</li>
<li>Outlier identified as <b>influential point</b> if it unduly influences the regression analysis
<img src="./img/0109-plot-x-y-influential.png" alt="0109-plot-x-y-influential.png" /></li>
</ol>
</div>
<ol class="org-ol">
<li><a id="orgac9062d"></a>Types<br />
<div class="outline-text-5" id="text-1-11-1-1">
<ol class="org-ol">
<li>Y, response outlier</li>
<li>X, predictor outlier, i.e. leverage point</li>
</ol>
</div>
</li>
<li><a id="org76b9b58"></a>Causes<br />
<div class="outline-text-5" id="text-1-11-1-2">
<ol class="org-ol">
<li>Case by case</li>
<li>Analyse by creating models with/without outlier to see effect on fitted line
<ol class="org-ol">
<li>For both predictor and response outliers</li>
</ol></li>
</ol>
</div>
</li>
</ol>
</div>
<div id="outline-container-org0a13d35" class="outline-4">
<h4 id="org0a13d35"><span class="section-number-4">1.11.2.</span> (5) High leverage points</h4>
<div class="outline-text-4" id="text-1-11-2">

<div id="orgf402c67" class="figure">
<p><img src="./img/0108-high-leverage.png" alt="0108-high-leverage.png" />
</p>
</div>
<ol class="org-ol">
<li>These are observations with predictor \(x\) value outside normal range of observations for \(x\)
<ol class="org-ol">
<li>Does not have large std residual</li>
<li>Can affect regression results</li>
</ol></li>
<li>Point has high leverage if its deletion (by itself or with 2-3 other points) causes noticeable changes in the model</li>
<li>With many predictors: it's possible to have an observation within range of each predictor's value but still be unusual</li>
<li>Measure with <b>Cook's distance C<sub>i</sub></b>, i.e. the difference between coeff's obtained from:
<ol class="org-ol">
<li>The full data</li>
<li>The full data deleting observation \(i\)</li>
</ol></li>
<li>C<sub>i</sub> &gt; 1  = highly influential
<ol class="org-ol">
<li><b>Also</b> an influential point if C<sub>i</sub> &gt; 1</li>
</ol></li>
</ol>
</div>
</div>
<div id="outline-container-org02952f1" class="outline-4">
<h4 id="org02952f1"><span class="section-number-4">1.11.3.</span> Plots in R</h4>
<div class="outline-text-4" id="text-1-11-3">
<p>
plot(lm) model provides plots:
</p>
<dl class="org-dl">
<dt>Residual vs fitted</dt><dd>check if residuals have non-linear patterns</dd>
<dt>Normal Q-Q</dt><dd>check if residuals are normally distributed</dd>
<dt>Scale-location</dt><dd>check if standardized residuals are spread equally along fitted values</dd>
<dt>Residuals vs leverage</dt><dd>finds influential points, with C<sub>i</sub> &gt; 1</dd>
</dl>
</div>
</div>
<div id="outline-container-org2063334" class="outline-4">
<h4 id="org2063334"><span class="section-number-4">1.11.4.</span> (6) Multicollinearity</h4>
<div class="outline-text-4" id="text-1-11-4">
<ul class="org-ul">
<li>e.g. mpg ~ cyl; mpg ~ cyl + disp + wt.</li>
<li>The 2nd module exhibits multicollinearity.</li>
<li>Two or more predictors are linearly related</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="org5f1233c"></a>Check<br />
<div class="outline-text-5" id="text-1-11-4-1">
<ol class="org-ol">
<li>With variance inflation factors, VIF
<ol class="org-ol">
<li>Regress X<sub>j</sub> against all other X. Name resulting R<sup>2</sup> as \(R^2_j\)</li>
<li>Define VIF = \(\frac{1}{1-R^2_j}\), \(j=1,2,...,p\)</li>
<li>If X<sub>j</sub> has strong linear relationship to other X predictors, then R<sub>j</sub><sup>2</sup> is close to 1 and VIF<sub>j</sub> is large</li>
<li>VIF &gt; 5 -&gt; Multicollinearity</li>
<li>In R, use <code>vif(lm(model))</code> to check the VIF values. <code>library(car)</code> is required.</li>
</ol></li>
<li>Use correlation matrix</li>
</ol>
</div>
</li>
<li><a id="orgc0a2756"></a>Consequences<br />
<div class="outline-text-5" id="text-1-11-4-2">
<ol class="org-ol">
<li>OLS estimated parameters may have large variances and covariances, thus precise estimates difficult</li>
<li>Confidence intervals of estimated parameters are larger, hence can't reject H<sub>0</sub> (that b<sub>i</sub> = 0)</li>
<li>Regression coeffs might have wrong sign</li>
<li>Regression coeffs might be not significantly different from 0 even for large R<sup>2</sup></li>
<li>Adding explanatory variable changes other varS coeff</li>
</ol>
</div>
</li>
<li><a id="org75e770a"></a>Solution<br />
<div class="outline-text-5" id="text-1-11-4-3">
<ol class="org-ol">
<li>Pick one variable if multiple ones measure the same "thing"</li>
<li>Use PCA or factor analysis to create even more useful variable(s)</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-orgd12862d" class="outline-2">
<h2 id="orgd12862d"><span class="section-number-2">2.</span> Module 02: Indicator variables and Interaction Terms</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org3de1d44" class="outline-3">
<h3 id="org3de1d44"><span class="section-number-3">2.1.</span> M2L1: Intro (Customer Analytics Dataset)</h3>
<div class="outline-text-3" id="text-2-1">
<ul class="org-ul">
<li>Direct Marketing dataset</li>
<li>Modeling customer characteristics to predict AmountSpent</li>
<li>Understand why some individuals spent more than others
<ul class="org-ul">
<li>In particular, the effect of Salary</li>
</ul></li>
<li>Scatter plot of Salary vs AmountSpent
<ul class="org-ul">
<li>Can include the regression line</li>
</ul></li>
</ul>
</div>
<div id="outline-container-org6d231fb" class="outline-4">
<h4 id="org6d231fb"><span class="section-number-4">2.1.1.</span> No lecture quiz</h4>
</div>
</div>
<div id="outline-container-org19211d4" class="outline-3">
<h3 id="org19211d4"><span class="section-number-3">2.2.</span> M2L2: Creating and Using Indicator Variables</h3>
<div class="outline-text-3" id="text-2-2">
<ul class="org-ul">
<li>a.k.a. dummy variables</li>
<li>Categorical variables, e.g. age, are also known as factor variables
<ul class="org-ul">
<li>They have distinct values, e.g. Age = Old, Age = Young, Age = Middle</li>
</ul></li>
<li>How to include age variable in regression model that requires numeric values?</li>
<li>e.g. if we want to investigate the effect of age on AmountSpent
<ul class="org-ul">
<li>Need to quantify this variable</li>
</ul></li>
<li>With 3 possible values for \(\text{Age}\), we need 2 indicator variables
<ul class="org-ul">
<li>Base case is both dummies = 0, i.e. Age = Young.</li>
<li>This is the reference group to compare for the other values of the dummy variable.</li>
<li>Any value of the categorical can be used as the base case</li>
<li>In this instance, the dummies created are:
<ol class="org-ol">
<li><code>AgeMid</code> = 1 if Age = Middle, 0 otherwise</li>
<li><code>AgeOld</code> = 1 if Age = Old, 0 otherwise</li>
</ol></li>
</ul></li>
<li>Regression equation: \(\text{AmountSpent} = b_0 + b_1*\text{AgeMid} + b_2*\text{AgeOld}\)</li>
</ul>
</div>
<div id="outline-container-org8b9302d" class="outline-4">
<h4 id="org8b9302d"><span class="section-number-4">2.2.1.</span> M2L2 lecture quiz</h4>
<div class="outline-text-4" id="text-2-2-1">
<dl class="org-dl">
<dt>Can record have AgeMid = 0, AgeOld = 0?</dt><dd>Yes, when Age = Yound</dd>
<dt>Can record have AgeMid = 1, AgeOld = 1?</dt><dd>No</dd>
</dl>
</div>
</div>
</div>
<div id="outline-container-orgb35602c" class="outline-3">
<h3 id="orgb35602c"><span class="section-number-3">2.3.</span> M2L3: Interpreting the coefficients of indicator variables</h3>
<div class="outline-text-3" id="text-2-3">
</div>
<div id="outline-container-org8128187" class="outline-4">
<h4 id="org8128187"><span class="section-number-4">2.3.1.</span> DR1: regression with dummy variable</h4>
<div class="outline-text-4" id="text-2-3-1">
<ul class="org-ul">
<li><p>
Coeffs:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Estimate</th>
<th scope="col" class="org-left">t-value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Intercept</td>
<td class="org-right">55.862</td>
<td class="org-left">10.93***</td>
</tr>

<tr>
<td class="org-left">AgeMid</td>
<td class="org-right">94.307</td>
<td class="org-left">14.75***</td>
</tr>

<tr>
<td class="org-left">AgeOld</td>
<td class="org-right">87.350</td>
<td class="org-left">11.03***</td>
</tr>
</tbody>
</table></li>
<li>Equation: \(\text{AmountSpent} = b_0 + b_1*\text{AgeMid} + b_2*\text{AgeOld}\)</li>
<li>Age = Young spends average $55.862
<ul class="org-ul">
<li>This is the base case</li>
</ul></li>
<li>Middle age average AmountSpent = $55.862+$94.307
<ul class="org-ul">
<li>The AgeMid coefficient is the increase in AmountSpent for middle aged customers compared to young customers</li>
</ul></li>
<li>Graphically, the indicator variable shifts up the Mid and Old AmountSpent. All are parallel to x-asis.</li>
<li>In R, a factor variable can be used directly without constructing the indicator variable, e.g.
<code>lm(AmountSpent ~ Age, data=dirmkt)</code>
<ul class="org-ul">
<li>R provides the new variables AgeMiddle and AgeYoung</li>
<li><p>
Use contrasts function to find the base case, e.g. <code>contrasts(dirmkt$Age)</code> which shows:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Middle</th>
<th scope="col" class="org-right">Young</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Old</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-left">Middle</td>
<td class="org-right">1</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-left">Young</td>
<td class="org-right">0</td>
<td class="org-right">1</td>
</tr>
</tbody>
</table></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org6ebbc94" class="outline-4">
<h4 id="org6ebbc94"><span class="section-number-4">2.3.2.</span> DR2: regression with salary and dummy variables</h4>
<div class="outline-text-4" id="text-2-3-2">
<ul class="org-ul">
<li><p>
Coeffs
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Estimate</th>
<th scope="col" class="org-right">t-value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Intercept</td>
<td class="org-right">-6.12</td>
<td class="org-right">-1.30</td>
</tr>

<tr>
<td class="org-left">Salary</td>
<td class="org-right">0.002</td>
<td class="org-right">25</td>
</tr>

<tr>
<td class="org-left">AgeMid</td>
<td class="org-right">-4.81</td>
<td class="org-right">-0.75</td>
</tr>

<tr>
<td class="org-left">AgeOld</td>
<td class="org-right">23.28</td>
<td class="org-right">3.46</td>
</tr>
</tbody>
</table></li>

<li>Equation: \(\text{AmountSpent} = b_0 + b_1*\text{Salary} + b_2*\text{AgeMid} + b_3*\text{AgeOld}\)</li>
<li>Graphically:
<ol class="org-ol">
<li>b<sub>1</sub> and b<sub>2</sub> are shifting up/down the Amount</li>
<li>Each age group has lines with slope b<sub>0</sub></li>
</ol></li>
</ul>
</div>
</div>
<div id="outline-container-org7c89f68" class="outline-4">
<h4 id="org7c89f68"><span class="section-number-4">2.3.3.</span> M2L3 lecture quiz</h4>
<div class="outline-text-4" id="text-2-3-3">
<ul class="org-ul">
<li>For the above coeffs, old customers spend more than young customers at the same salary level</li>
</ul>
</div>
</div>
</div>


<div id="outline-container-org6f793e0" class="outline-3">
<h3 id="org6f793e0"><span class="section-number-3">2.4.</span> M2L4: Interaction term and interpreting its coefficient</h3>
<div class="outline-text-3" id="text-2-4">
<ul class="org-ul">
<li>Example: regression with dummy variables.</li>
<li><code>Location</code> is categorical variable with values:
<ul class="org-ul">
<li>"Close" = customer lives close to store that sells similar merchandise</li>
<li>"Far" = customer does not live close&#x2026;</li>
</ul></li>
<li>Create a new variable <code>Far</code>:
<ul class="org-ul">
<li>\(1\) if <code>Location</code> = Far</li>
<li>\(0\) otherwise</li>
</ul></li>
<li><p>
Coeffs:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Estimate</th>
<th scope="col" class="org-right">t-value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Intercept</td>
<td class="org-right">-20.48</td>
<td class="org-right">-4.64</td>
</tr>

<tr>
<td class="org-left">Salary</td>
<td class="org-right">0.002</td>
<td class="org-right">34.05</td>
</tr>

<tr>
<td class="org-left">Far</td>
<td class="org-right">59.06</td>
<td class="org-right">13.38</td>
</tr>
</tbody>
</table></li>
<li>Equation: \(\text{Amount Spent} = b_0 + b_1 \text{Salary} + b_2 \text{Far}\)</li>
<li>Estimated amt spent for customer who lives \(Far\):
<ul class="org-ul">
<li>38.58 + 0.002*Salary</li>
</ul></li>
<li>Assumptions:
<ul class="org-ul">
<li>Customers who live far away will spend <b>at the same rate</b> that customers who live nearby. Is this realistic?</li>
</ul></li>
</ul>
</div>
<div id="outline-container-org4a61418" class="outline-4">
<h4 id="org4a61418"><span class="section-number-4">2.4.1.</span> Interaction term</h4>
<div class="outline-text-4" id="text-2-4-1">
<ul class="org-ul">
<li>Same example but construct new variable</li>
<li>\(\text{SalaryFar} = \text{Salary} \times \text{Far}\)</li>
<li>\(\text{Amount Spent} = b_0 + b_1 \text{Salary} + b_2 \text{Far} + b_3 \text{SalaryFar}\)</li>
<li>New coeffs:</li>
</ul>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Estimate</th>
<th scope="col" class="org-right">t-value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Intercept</td>
<td class="org-right">1.448</td>
<td class="org-right">0.3</td>
</tr>

<tr>
<td class="org-left">Salary</td>
<td class="org-right">0.002</td>
<td class="org-right">24.72</td>
</tr>

<tr>
<td class="org-left">Far</td>
<td class="org-right">-13.46</td>
<td class="org-right">-1.55</td>
</tr>

<tr>
<td class="org-left">SalaryFar</td>
<td class="org-right">0.001</td>
<td class="org-right">9.57</td>
</tr>
</tbody>
</table>
<ul class="org-ul">
<li>Interpretation of coefficient for \(\text{SalaryFar}\):
b<sub>3</sub> is the amount to add to b<sub>1</sub> to get the slope for people who live far away
<img src="./img/0204-interaction_term.png" alt="0204-interaction_term.png" /></li>
</ul>
</div>
</div>
<div id="outline-container-orgcbb877b" class="outline-4">
<h4 id="orgcbb877b"><span class="section-number-4">2.4.2.</span> M2L4 lecture quiz</h4>
<div class="outline-text-4" id="text-2-4-2">
<ol class="org-ol">
<li>If the salary for customer who lives close increases by $10,000, what is the projected increase in AmountSpent for that customer?
<ul class="org-ul">
<li>$10000*0.002=$20</li>
</ul></li>
<li>What is the equivalent increase for a customer who lives Far?
<ul class="org-ul">
<li>$10000*0.002+$10000*0.001 = $30</li>
</ul></li>
</ol>
</div>
</div>
<div id="outline-container-org92df32e" class="outline-4">
<h4 id="org92df32e"><span class="section-number-4">2.4.3.</span> Categorical variable with \(\text{M}\) values</h4>
<div class="outline-text-4" id="text-2-4-3">
<ul class="org-ul">
<li>Indicator variable has \(M\) possible values, then need to construct \(M-1\) dummy variables.</li>
<li>Base case always applied to the group with indicator variables set to \(0\).</li>
<li>All other cases interpreted with reference to base case.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org47d14ea" class="outline-3">
<h3 id="org47d14ea"><span class="section-number-3">2.5.</span> M2L5: Another example of using indicator variables</h3>
<div class="outline-text-3" id="text-2-5">
</div>
<div id="outline-container-orged42b8a" class="outline-4">
<h4 id="orged42b8a"><span class="section-number-4">2.5.1.</span> Airbnb Los Angeles dataset</h4>
<div class="outline-text-4" id="text-2-5-1">
<ul class="org-ul">
<li>e.g. owner aiming to understand key factors that influence price</li>
<li>Questions:
<ol class="org-ol">
<li>Is there a relationship between capacity and price?</li>
<li>Does the type of rental (shared, private or full home) change the relationship?</li>
</ol></li>
</ul>
</div>
</div>
<div id="outline-container-orgd95faa6" class="outline-4">
<h4 id="orgd95faa6"><span class="section-number-4">2.5.2.</span> 2DR1: How does room price vary by capacity?</h4>
<div class="outline-text-4" id="text-2-5-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Intercept</td>
<td class="org-right">15.039</td>
</tr>

<tr>
<td class="org-left">Capacity</td>
<td class="org-right">38.272</td>
</tr>

<tr>
<td class="org-left">R<sup>2</sup></td>
<td class="org-right">0.367</td>
</tr>

<tr>
<td class="org-left">Adjusted R<sup>2</sup></td>
<td class="org-right">0.367</td>
</tr>
</tbody>
</table>
<p>
Create two dummy variables as follows. Base case (both 0) is "Shared" <code>room type</code>.
</p>
<ol class="org-ol">
<li><code>Private_ind</code>:
<ol class="org-ol">
<li>1 if "Private room" <code>room type</code></li>
<li>0 otherwise</li>
</ol></li>
<li><code>House_ind</code>
<ol class="org-ol">
<li>1 if "Entire home/apt" <code>room type</code></li>
<li>0 otherwise</li>
</ol></li>
</ol>
</div>
<ol class="org-ol">
<li><a id="org5f5f460"></a>2DR1: Equation<br />
<div class="outline-text-5" id="text-2-5-2-1">
<p>
\[
\text{Price} = b_0 + b_1*\text{Private_ind} + b_2*\text{House_ind}
\]
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Estimate</th>
<th scope="col" class="org-right">p-value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Intercept</td>
<td class="org-right">37.149</td>
<td class="org-right">12.58</td>
</tr>

<tr>
<td class="org-left">Private<sub>ind</sub></td>
<td class="org-right">35.666</td>
<td class="org-right">11.42</td>
</tr>

<tr>
<td class="org-left">House<sub>ind</sub></td>
<td class="org-right">133.442</td>
<td class="org-right">43.64</td>
</tr>
</tbody>
</table>
</div>
</li>
<li><a id="org0d88ba9"></a>2DR1: Interpretation:<br />
<div class="outline-text-5" id="text-2-5-2-2">
<dl class="org-dl">
<dt>Average price of room = 37.149</dt><dd>Shared room</dd>
<dt>Average price of private room</dt><dd>37.149+35.666</dd>
<dt>Average price of entire house</dt><dd>37.149+133.442</dd>
</dl>
</div>
</li>
</ol>
</div>
<div id="outline-container-org35758f2" class="outline-4">
<h4 id="org35758f2"><span class="section-number-4">2.5.3.</span> 2DR2: 2nd regression with capacity and dummies</h4>
<div class="outline-text-4" id="text-2-5-3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Estimate</th>
<th scope="col" class="org-right">t-value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Intercept</td>
<td class="org-right">-19.017</td>
<td class="org-right">-7.101</td>
</tr>

<tr>
<td class="org-left">Capacity</td>
<td class="org-right">29.292</td>
<td class="org-right">82.605</td>
</tr>

<tr>
<td class="org-left">Private<sub>ind</sub></td>
<td class="org-right">30.339</td>
<td class="org-right">11.076</td>
</tr>

<tr>
<td class="org-left">House<sub>ind</sub></td>
<td class="org-right">75.776</td>
<td class="org-right">27.346</td>
</tr>
</tbody>
</table>
<ul class="org-ul">
<li>Equation:
\[
  \text{Price} = b_0 + b_1*\text{Capacity} + b_2*\text{Private_ind} + b_3*\text{House_ind}
  \]</li>
<li>Question: What's the average increase in price for each extra person (capacity)?</li>
<li>Image: <img src="./img/0205-2dr2-slope.png" alt="0205-2dr2-slope.png" /></li>
</ul>
</div>
</div>
<div id="outline-container-org56b1a4f" class="outline-4">
<h4 id="org56b1a4f"><span class="section-number-4">2.5.4.</span> Interaction terms</h4>
<div class="outline-text-4" id="text-2-5-4">
<ol class="org-ol">
<li>Create 2 new variables:
<ol class="org-ol">
<li><code>P_Cap</code>: <code>Private_ind</code> * <code>Capacity</code></li>
<li><code>H_Cap</code>: <code>House_ind</code> * <code>Capacity</code></li>
</ol></li>
<li>New equation
\[
  \text{Price} = b_0 + b_1*\text{Capacity} + b_2*\text{Private_ind} + b_3*\text{House_ind} + b_4*\text{P_Cap} + b_5*\text{H_Cap}
  \]</li>
<li><p>
Regression coeff's:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Estimate</th>
<th scope="col" class="org-right">t-value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Intercept</td>
<td class="org-right">35.885</td>
<td class="org-right">8.728***</td>
</tr>

<tr>
<td class="org-left">Capacity</td>
<td class="org-right">0.659</td>
<td class="org-right">0.391</td>
</tr>

<tr>
<td class="org-left">Private<sub>ind</sub></td>
<td class="org-right">20.684</td>
<td class="org-right">4.427***</td>
</tr>

<tr>
<td class="org-left">House<sub>ind</sub></td>
<td class="org-right">2.293</td>
<td class="org-right">0.518</td>
</tr>

<tr>
<td class="org-left">P<sub>Cap</sub></td>
<td class="org-right">7.080</td>
<td class="org-right">3.636***</td>
</tr>

<tr>
<td class="org-left">H<sub>Cap</sub></td>
<td class="org-right">33.414</td>
<td class="org-right">19.323***</td>
</tr>
</tbody>
</table></li>
</ol>
</div>

<ol class="org-ol">
<li><a id="org1d0408a"></a>Interpretation<br />
<div class="outline-text-5" id="text-2-5-4-1">
<ol class="org-ol">
<li>b<sub>4</sub> is the amount to add to b<sub>1</sub> to get slope for Private room</li>
<li>b<sub>5</sub> is the amount to add to b<sub>1</sub> to get slope for a House</li>
<li>Statistically, capacity and house<sub>ind</sub> are not very different from 0.
<img src="./img/0205-interaction-terms-2dr2.png" alt="0205-interaction-terms-2dr2.png" /></li>
</ol>
</div>
</li>
</ol>
</div>
<div id="outline-container-org7e617a0" class="outline-4">
<h4 id="org7e617a0"><span class="section-number-4">2.5.5.</span> No lecture quiz</h4>
</div>
</div>
</div>
<div id="outline-container-org5f9ada4" class="outline-2">
<h2 id="org5f9ada4"><span class="section-number-2">3.</span> Module 03: Non-linear transformation models</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org6c914ef" class="outline-3">
<h3 id="org6c914ef"><span class="section-number-3">3.1.</span> M3L1: Intro (and why needed)</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Examples:
</p>
<ol class="org-ol">
<li>Population and rank of cities</li>
<li>Residuals and predicted price (Housing dataset)
<ol class="org-ol">
<li>Non-constant variance (heteroskedascity)</li>
<li>Model A: \(\text{price} = b_0 +b_1 *\text{lotsize}\)
<ul class="org-ul">
<li>Q-Q plot shows non-linearity</li>
<li>Residuals vs fitted shows non-constant variance</li>
</ul></li>
</ol></li>
<li><b>FOCUS</b> on natural log transformations in 6203 as these are easier to interpret</li>
</ol>
</div>
<div id="outline-container-org55114bc" class="outline-4">
<h4 id="org55114bc"><span class="section-number-4">3.1.1.</span> Summary of models</h4>
<div class="outline-text-4" id="text-3-1-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">Y</th>
<th scope="col" class="org-left">log(Y)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">X</td>
<td class="org-left">Model A: level-level model     \(Y=b_0 + b_1X\)</td>
<td class="org-left">Model C: log-linear model \(\log(Y)=b_0+b_1X\)</td>
</tr>

<tr>
<td class="org-left">log(x)</td>
<td class="org-left">Model B: linear-log model \(Y=b_0 + b_1\log(X)\)</td>
<td class="org-left">Model D log-log model \(\log(Y) = b_0 + b_1\log(X)\)</td>
</tr>
</tbody>
</table>
<p>
Notes: if variable \(x\) has values = 0, then use log(x+1) transformation.
</p>
</div>
</div>
</div>


<div id="outline-container-orgeca70c0" class="outline-3">
<h3 id="orgeca70c0"><span class="section-number-3">3.2.</span> M3L2: Linear-Log model</h3>
<div class="outline-text-3" id="text-3-2">
<ul class="org-ul">
<li><p>
Coeff table:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Estimate</th>
<th scope="col" class="org-right">t-value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Intercept</td>
<td class="org-right">-250.728</td>
<td class="org-right">-12.42</td>
</tr>

<tr>
<td class="org-left">log(lotsize)</td>
<td class="org-right">37660</td>
<td class="org-right">15.81</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li>R<sup>2</sup> = 0.315</li>
<li>Adjusted R<sup>2</sup> = 0.3137</li>
<li>Equation:
\(\text{price} = b_0 + b_1\log(\text{lotsize})\)
<ul class="org-ul">
<li>Creates a new variable log(lotsize), which is the natural log of \(\text{lotsize}\)</li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="outline-container-org0e61834" class="outline-4">
<h4 id="org0e61834"><span class="section-number-4">3.2.1.</span> Interpretation of coefficients</h4>
<div class="outline-text-4" id="text-3-2-1">
<p>
b<sub>1</sub> = 37660 implies that:
</p>
<ul class="org-ul">
<li>for every 1% increase in \(\text{lotsize}\):</li>
<li>the price increases by $376.60 approximately (i.e. 1/100 coefficient)</li>
<li>This works because increasing X by 1% is ~ increasing log(X) by 0.01</li>
<li>Hence the increase changes Y variable by 0.01*b<sub>1</sub></li>
</ul>
</div>
</div>
<div id="outline-container-org9f4eca9" class="outline-4">
<h4 id="org9f4eca9"><span class="section-number-4">3.2.2.</span> No lecture quiz</h4>
</div>
</div>
<div id="outline-container-orga8b6326" class="outline-3">
<h3 id="orga8b6326"><span class="section-number-3">3.3.</span> M3L3: Log-Linear model</h3>
<div class="outline-text-3" id="text-3-3">
<p>
Model C: \(\log(\text{price}) = b_0 + b_1\text{lotsize}\)
</p>
<ul class="org-ul">
<li><p>
Coeff table
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Estimate</th>
<th scope="col" class="org-right">t-value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Intercept</td>
<td class="org-right">10.58</td>
<td class="org-right">306.51</td>
</tr>

<tr>
<td class="org-left">lotsize</td>
<td class="org-right">0.00009315</td>
<td class="org-right">15.08</td>
</tr>
</tbody>
</table>
<ul class="org-ul">
<li>R<sup>2</sup> = 0.2947</li>
<li>Adjusted R<sup>2</sup> = 0.2935</li>
</ul></li>
<li>Creates a new variable log(price)</li>
</ul>
</div>
<div id="outline-container-org83a2b22" class="outline-4">
<h4 id="org83a2b22"><span class="section-number-4">3.3.1.</span> Interpretation of coefficients</h4>
<div class="outline-text-4" id="text-3-3-1">
<ul class="org-ul">
<li>Coefficient b<sub>1</sub> indicates:
<ul class="org-ul">
<li>When lotsize increases by 1 sqft,</li>
<li>Price increases by 0.009315% on average, <span class="underline">i.e.</span></li>
</ul></li>
<li>Dependent variable changes by \(100\times\text{coefficient}\) percent
<ul class="org-ul">
<li>for a 1 unit increase in independent variable</li>
<li>Keeping all other variables constant</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgb4d47c5" class="outline-4">
<h4 id="orgb4d47c5"><span class="section-number-4">3.3.2.</span> Derivation</h4>
<div class="outline-text-4" id="text-3-3-2">
<ul class="org-ul">
<li>Increase x by 1 unit increases log(y) by b<sub>1</sub> units</li>
<li>\(\log(price) = b_0 + b_1x\) is the same as:
\(y = e^{(b_0+b_1x)}\)</li>
<li>Hence: \(\frac{dy}{dx} = b_1y\), and \(\frac{dy}{y} = b_1dx\)</li>
<li>Multiplying by 100:
<ul class="org-ul">
<li>\(100\times\frac{dy}{y} = 100\times b_1\times dx\)</li>
</ul></li>
<li>\(100\times\frac{dy}{y}\) is the percentage change in \(Y\)</li>
<li>If dx=1, then this 1 unit change in x =&gt; 100b<sub>1</sub> % change in \(Y\)</li>
<li>Note that this approximation works when \(b_0+b_1x\) is very small</li>
<li>Accurate calc: \(\text{percentage change in Y} = (e^{b_1}-1)\times100\) for 1 unit change in \(X\).</li>
</ul>
</div>
</div>
<div id="outline-container-org636c655" class="outline-4">
<h4 id="org636c655"><span class="section-number-4">3.3.3.</span> No lecture quiz</h4>
</div>
</div>
<div id="outline-container-org369c1c7" class="outline-3">
<h3 id="org369c1c7"><span class="section-number-3">3.4.</span> M3L4: Log-Log model</h3>
<div class="outline-text-3" id="text-3-4">
<p>
Both LHS and RHS are log transformed.
\[
\log(\text{price}) = b_0 + b_1 \times \log(\text{lotsize})
\]
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Estimate</th>
<th scope="col" class="org-right">t-value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Intercept</td>
<td class="org-right">6.468</td>
<td class="org-right">23.37</td>
</tr>

<tr>
<td class="org-left">lotsize</td>
<td class="org-right">0.54218</td>
<td class="org-right">16.61</td>
</tr>
</tbody>
</table>
<ul class="org-ul">
<li>R<sup>2</sup> = 0.3364</li>
<li>Adjusted R<sup>2</sup> = 0.3352</li>
</ul>
</div>
<div id="outline-container-org7ebc46c" class="outline-4">
<h4 id="org7ebc46c"><span class="section-number-4">3.4.1.</span> Interpretation</h4>
<div class="outline-text-4" id="text-3-4-1">
<ul class="org-ul">
<li>Increasing independent variable by 1% increases dependent variable by b<sub>1</sub> %</li>
<li>i.e., Increase 1% in lotsize increases price by 0.54218%</li>
<li>This works because increasing log(X) by 0.01 is almost equal to increase X by 1%, which implies changing Y by b<sub>1</sub> %</li>
<li><b>Elasticity</b> = % change in Y for 1% increase in X</li>
<li>For log-log model, b<sub>1</sub> = <b>elasticity</b></li>
</ul>
</div>
</div>
<div id="outline-container-org4d5ae5c" class="outline-4">
<h4 id="org4d5ae5c"><span class="section-number-4">3.4.2.</span> Reasons for log-transforming data</h4>
<div class="outline-text-4" id="text-3-4-2">
<ol class="org-ol">
<li>Achieve more linear r/s</li>
<li>Make distribution more normal</li>
<li>Make variance more constant</li>
<li>Get better fit in model i.e. increase R<sup>2</sup></li>
</ol>
</div>
</div>
<div id="outline-container-orgaebe622" class="outline-4">
<h4 id="orgaebe622"><span class="section-number-4">3.4.3.</span> Summary of models and interpretation</h4>
<div class="outline-text-4" id="text-3-4-3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">Y</th>
<th scope="col" class="org-left">log(Y)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">X</td>
<td class="org-left">Model A: level-level model     \(Y=b_0 + b_1X\)</td>
<td class="org-left">Model C: log-linear model \(\log(Y)=b_0+b_1X\)</td>
</tr>

<tr>
<td class="org-left">log(x)</td>
<td class="org-left">Model B: linear-log model \(Y=b_0 + b_1\log(X)\)</td>
<td class="org-left">Model D log-log model \(\log(Y) = b_0 + b_1\log(X)\)</td>
</tr>
</tbody>
</table>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">Y</th>
<th scope="col" class="org-left">log(Y)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">X</td>
<td class="org-left">Model A: level-level (X + 1 unit, Y &Delta; b<sub>1</sub> units)</td>
<td class="org-left">Model C: log-linear (X + 1 unit, Y + (b1&times;100)% )</td>
</tr>

<tr>
<td class="org-left">log(x)</td>
<td class="org-left">Model B: linear-log (X+1%, Y+\(\frac{b_1}{100}\) units)</td>
<td class="org-left">Model D log-log (X+1%, Y &Delta; b<sub>1</sub>%)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org1595ee5" class="outline-4">
<h4 id="org1595ee5"><span class="section-number-4">3.4.4.</span> M3L4 no lecture quiz</h4>
</div>
</div>
<div id="outline-container-org25d42b6" class="outline-3">
<h3 id="org25d42b6"><span class="section-number-3">3.5.</span> M3L5: Polynomial model</h3>
<div class="outline-text-3" id="text-3-5">
<p>
Example:
\[
\text{Price} = b_0 + b_1 \times \text{lotsize} + b_2 \times \text{lotsize}^2
\]
</p>
<ul class="org-ul">
<li>Creates a new variable lot<sub>square</sub> = lotsize<sup>2</sup> and fit on the formula above</li>
<li><b>Cannot</b> interpret different powers by 'holding constant'</li>
<li>i.e., a quadratic and higher power model does not allow for an isolated interpretation of coefficients
<ul class="org-ul">
<li>since \(\frac{\text{d(price)}}{\text{d(lotsize)}} = b_1 + 2b_2\times\text{lotsize}\)</li>
</ul></li>
<li>This means the slope is not constant and changes at every point of the quadratic curve</li>
</ul>
</div>
<div id="outline-container-org9fb14f1" class="outline-4">
<h4 id="org9fb14f1"><span class="section-number-4">3.5.1.</span> M3L5 no lecture quiz</h4>
</div>
</div>
</div>
<div id="outline-container-org6c24f15" class="outline-2">
<h2 id="org6c24f15"><span class="section-number-2">4.</span> Module 04: Logistic Regression</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-orge1aeff2" class="outline-3">
<h3 id="orge1aeff2"><span class="section-number-3">4.1.</span> M4L1: Odds</h3>
<div class="outline-text-3" id="text-4-1">
<ul class="org-ul">
<li>Odds express the <b>likelihood</b> of an event</li>
<li>Written as X to Y or X:Y</li>
<li>Gambling odds are "odds against" (i.e., the probability that event will <b>not</b> happen is greater than that it will)
<ul class="org-ul">
<li>10 to 1 means that betting $1 wins $10, <i>on top of</i> getting back the $1</li>
</ul></li>
<li>In this module, we deal with <b>odds for</b> or <b>odds on</b>
<ul class="org-ul">
<li>The probability that an event is more likely to happen than not</li>
<li>2 to 1 means event is 2x as likely to happen as not
<ul class="org-ul">
<li>Gambler in this case stakes $2 and wins $1 (+$2) if event happens</li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="outline-container-org7f31907" class="outline-4">
<h4 id="org7f31907"><span class="section-number-4">4.1.1.</span> <i>Odds For</i> in statistics</h4>
<div class="outline-text-4" id="text-4-1-1">
<dl class="org-dl">
<dt>Odds</dt><dd>ratio of probabilities</dd>
<dt>Odds for</dt><dd>ratio of \(\frac{\text{probability of event happening}}{\text{probability of event NOT happening}}\)</dd>
</dl>
<p>
Take \(p\) as probability of event happening, then: Odds for = \(\frac{p}{1-p}\)
</p>
<ul class="org-ul">
<li>If Odds For is 2:1, then:
\[
  \text{Odds for} = \frac{2}{1}
  = \frac{p}{1-p} \\
  p = 2-2p \\
  2=3p \\
  p=\frac{2}{3}
  \]</li>
<li>Knowing Odds we can get \(p\):
\[
  p = \frac{\text{odds for}}{1+\text{odds for}}
  \]</li>
</ul>
</div>
</div>
<div id="outline-container-org5243f91" class="outline-4">
<h4 id="org5243f91"><span class="section-number-4">4.1.2.</span> M4L1 lecture quiz</h4>
<div class="outline-text-4" id="text-4-1-2">
<ol class="org-ol">
<li>A betting site shows odds of NE Patriots winning next Super Bowl is 5 to 1 (odds against). What is the probability of them winning the next super bowl?
<ul class="org-ul">
<li>Answer: 1/6. Odds for = 1/5, apply above formula.</li>
</ul></li>
<li>Team Germany has a 12.5% (1/8) probability of winning the next World Cup. What is the odds for Team Germany winning the next World Cup?
<ul class="org-ul">
<li>Answer: 1/7. Apply above formula.</li>
</ul></li>
</ol>
</div>
</div>
</div>
<div id="outline-container-orgc04f59a" class="outline-3">
<h3 id="orgc04f59a"><span class="section-number-3">4.2.</span> M4L2: Binary Dependent Variable</h3>
<div class="outline-text-3" id="text-4-2">
<ul class="org-ul">
<li>Recap: relationship between <i>Odds For</i> and \(p\)</li>
<li>Example of binary dependent variables
<ol class="org-ol">
<li>whether student will get A</li>
<li>whether firm goes bankrupt</li>
<li>whether customer makes a purchase</li>
<li>whether debtor defaults</li>
<li>whether loan is approved</li>
</ol></li>
<li>Example: `GradesR.csv`
<ul class="org-ul">
<li>Variables
<ul class="org-ul">
<li>Grade = 1, student got A, else 0</li>
<li>Hours = amount of time spent</li>
</ul></li>
<li>Using linear regression to model <b>binary</b> outcomes leads to weirdness, as regression line is continuous
<ol class="org-ol">
<li>Predicted values &ne; 0 or 1</li>
<li>Predicted values &lt; 0</li>
<li>Predicted values &gt; 1</li>
</ol></li>
</ul></li>
</ul>
</div>
<div id="outline-container-orgcd05315" class="outline-4">
<h4 id="orgcd05315"><span class="section-number-4">4.2.1.</span> M4L2 no lecture quiz</h4>
</div>
</div>
<div id="outline-container-org1d4e36d" class="outline-3">
<h3 id="org1d4e36d"><span class="section-number-3">4.3.</span> M4L3: Logistic Regression</h3>
<div class="outline-text-3" id="text-4-3">
</div>
<div id="outline-container-org19aac35" class="outline-4">
<h4 id="org19aac35"><span class="section-number-4">4.3.1.</span> Comparison of logisitic and linear regression</h4>
<div class="outline-text-4" id="text-4-3-1">
<p>
Logistic regression is similar to linear regression with 2 main differences:
</p>
<ol class="org-ol">
<li>\(Y\), i.e. outcome or response, is a <b>categorical</b> variable, <span class="underline">e.g.</span>, Yes/No, Approve/Reject, Pass/Fail</li>
<li>Result expressed as <b>probability</b> of being in a group. Implies predicted value is [0,1].</li>
</ol>
</div>
</div>
<div id="outline-container-orgfacd9af" class="outline-4">
<h4 id="orgfacd9af"><span class="section-number-4">4.3.2.</span> Implementing logistic regression</h4>
<div class="outline-text-4" id="text-4-3-2">
<ul class="org-ul">
<li>We use the logistic function, which gives probability of being in a group</li>
<li>\(p(x) = \text{Prob}(y=1|x)\), i.e. the probability of \(y\) == 1 given an \(x\) value</li>
<li>Logistic function:
\[
  p(x) = \frac{e^{b_0+b_1x}}{1+e^{b_0+b_1x}}, \text{i.e.,} \\
  p(x) = \frac{\exp(b_0+b_1x)}{1+\exp(b_0+b_1x)}
  \]</li>
<li>p(x), simplified to \(p\), will always be between 0 and 1 for all values of x</li>
<li>hence:
\[
  \frac{p}{1-p} = \exp(b_0+b_1x) \\
  \log(\frac{p}{1-p}) = b_0+b_1x
  \]</li>
<li>\(\log(\frac{p}{1-p})\) is the log of odds for, or <b>logit</b></li>
<li><a id="org2f1f837"></a> is:
\[
  \text{logit}(p) = \log(\frac{p}{1-p}) \\
  = b_0+b_1x
  \]</li>
<li>Other components of the regression model are identical to linear regression</li>
</ul>
</div>
</div>
<div id="outline-container-orgbc6f27a" class="outline-4">
<h4 id="orgbc6f27a"><span class="section-number-4">4.3.3.</span> Why transform from probability to log odds?</h4>
<div class="outline-text-4" id="text-4-3-3">
<ul class="org-ul">
<li>Mapping probability with range (0,1) to log odds with range (-&infin;,&infin;) will:
<ol class="org-ol">
<li>Difficult to model variable with restricted range such as probability</li>
<li>Get around restricted range problem of probability</li>
<li>Among possible transformation methods, log odds is among easiest to understand and interpret</li>
</ol></li>
</ul>
</div>
</div>
<div id="outline-container-org6f4b39a" class="outline-4">
<h4 id="org6f4b39a"><span class="section-number-4">4.3.4.</span> Interpreting logistic regression model</h4>
<div class="outline-text-4" id="text-4-3-4">
<ul class="org-ul">
<li><b>logit(p)</b> = \(\log(\frac{p}{1-p}) = b_0+b_1x\) means:
<ol class="org-ol">
<li>As \(x\) increases by 1 unit, \(\log(\text{odds})\) increases by b<sub>1</sub></li>
<li>Equal to odds increasing by a factor of \(\exp(b_1)\), which is approximately 100*b<sub>1</sub> %</li>
<li>Exact change is (e<sup>b<sub>1</sub></sup>-1)&times;100%</li>
</ol></li>
</ul>
</div>
</div>
<div id="outline-container-org1261ddf" class="outline-4">
<h4 id="org1261ddf"><span class="section-number-4">4.3.5.</span> M4L3 lecture quiz</h4>
<div class="outline-text-4" id="text-4-3-5">
<ol class="org-ol">
<li>The logistic function, p(x), returns values
<ul class="org-ul">
<li>[0,1]</li>
</ul></li>
<li>\(\log{\frac{p}{1-p}}=b_0+b_1x\) means that when \(x\) increases by 1 unit,
<ul class="org-ul">
<li>\(\log(\text{odds})\) increase by b<sub>1</sub></li>
<li>odds increase by factor of \(\exp(b_1)\)</li>
<li>odds increase by roughly \(100\times b_1\%\)</li>
</ul></li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org5545f37" class="outline-3">
<h3 id="org5545f37"><span class="section-number-3">4.4.</span> M4L4: Logistic Regression using the <i>Default</i> dataset</h3>
<div class="outline-text-3" id="text-4-4">
<ul class="org-ul">
<li>Dataset from ISLR library.</li>
<li>Do EDA:
<ul class="org-ul">
<li>income vs balance, color=Default</li>
<li>box plot for balance vs Default</li>
</ul></li>
<li>Logistic regression models:
<ol class="org-ol">
<li>M1: no predictors \(\text{logit}(p) = b_0\)</li>
<li>M2: single binary variable: \(\text{logit}(p) = b_0+b_1\times \text{stdt}\)</li>
<li>M3: single continuous predictor var:  \(\text{logit}(p) = b_0+b_1\times \text{balance}\)</li>
<li>M4: multiple predictors: \(\text{logit}(p) = b_0 + b_1\times \text{balance} + b_2 \times \text{income} + b_3 \times \text{stdt}\)</li>
</ol></li>
<li>Defining \(p=\frac{\text{odds}}{1+\text{odds}}\)
<ul class="org-ul">
<li>prob that default = "Yes"</li>
<li>\(\text{logit}(p) = \log(\frac{p}{1-p})\)</li>
</ul></li>
</ul>
</div>
<div id="outline-container-org03a594d" class="outline-4">
<h4 id="org03a594d"><span class="section-number-4">4.4.1.</span> M1: no predictors \(\text{logit}(p) = b_0\)</h4>
<div class="outline-text-4" id="text-4-4-1">
<ul class="org-ul">
<li>Intercept = -3.368 = log-odds of being in default for entire population</li>
<li>hence \(\exp(-3.368)\) = odds = p/(1-p)</li>
<li>p = 0.0333</li>
</ul>
</div>
</div>
<div id="outline-container-org0811bb8" class="outline-4">
<h4 id="org0811bb8"><span class="section-number-4">4.4.2.</span> M2: single binary predictor  \(\text{logit}(p) = b_0+b_1\times \text{stdt}\)</h4>
<div class="outline-text-4" id="text-4-4-2">
<ul class="org-ul">
<li>Coefficients:
<ul class="org-ul">
<li>Intercept = -3.50</li>
<li>stdt = 0.40</li>
</ul></li>
<li>Intercept is for non-students (stdt = 0)
<ul class="org-ul">
<li>This is the reference / base case</li>
</ul></li>
<li>Odds for non-student = \(\exp(-3.50)\)
<ul class="org-ul">
<li>p=0.0292</li>
</ul></li>
<li>Odds for student = \(\exp(-3.50+0.40)\)
<ul class="org-ul">
<li>p=0.0431 (higher than non-students)</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org272449a" class="outline-4">
<h4 id="org272449a"><span class="section-number-4">4.4.3.</span> M3: single continuous predictor  \(\text{logit}(p) = b_0+b_1\times \text{balance}\)</h4>
<div class="outline-text-4" id="text-4-4-3">
<ul class="org-ul">
<li>Coefficients:
<ul class="org-ul">
<li>Intercept = -1.065e+01</li>
<li>balance = 5.499e-03 (i.e. 0.0055)</li>
</ul></li>
<li>\(b_1\) = 0.0055</li>
<li>Increase in balance is associated with increase in log-odds (and hence the odds for) of default</li>
<li>Adding $1 to balance increases log-odds by 0.0055</li>
<li><p>
Examples, with \(p(x)=\frac{e^{b_0+b_1x}}{1+{e^{b_0+b_1x}}}\)
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">x</th>
<th scope="col" class="org-right">p</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">1000</td>
<td class="org-right">0.00576</td>
</tr>

<tr>
<td class="org-right">1500</td>
<td class="org-right">0.08317</td>
</tr>

<tr>
<td class="org-right">2000</td>
<td class="org-right">0.5866</td>
</tr>
</tbody>
</table></li>
<li>Increasing x by 500 has non-linear effect on p(x)</li>
</ul>
</div>
</div>
<div id="outline-container-org11848f5" class="outline-4">
<h4 id="org11848f5"><span class="section-number-4">4.4.4.</span> M4: multiple predictors \(\text{logit}(p) = b_0 + b_1\times \text{balance} + b_2 \times \text{income} + b_3 \times \text{stdt}\)</h4>
<div class="outline-text-4" id="text-4-4-4">
<ul class="org-ul">
<li><p>
Coefficients
</p>
<ul class="org-ul">
<li>Intercept: -1.087e+01 (10.87)</li>
</ul>
<ul class="org-ul">
<li>balance: 5.737e-03 (0.0057)</li>
<li>income: 3.033e-06 (0.000003)</li>
<li>stdt: -6.468e-01 (-0.65)</li>
</ul></li>
<li>Interpretation:
<ul class="org-ul">
<li>Increase of balance associated with increasing log odds and hence probability of default</li>
<li>Adding $1 to balance increases log odds by 0.0057</li>
<li>Students now less likely to default due to -0.65 log odds, <b>different result from M2</b>
<ul class="org-ul">
<li>This can be explained by students carrying more balances, hence they default at higher rate</li>
<li>Log curve is shifted to the right</li>
<li><b>Confounding</b> -&gt; there is correlation between student and balance</li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org9705a6c" class="outline-4">
<h4 id="org9705a6c"><span class="section-number-4">4.4.5.</span> M4L4 lecture quiz</h4>
<div class="outline-text-4" id="text-4-4-5">
<ol class="org-ol">
<li>For logistic model where Y=1 is the default case:
<ul class="org-ul">
<li>\(b_0\) means the log odds of being in default for the entire population</li>
</ul></li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org13b4276" class="outline-3">
<h3 id="org13b4276"><span class="section-number-3">4.5.</span> M4L5: Predictions and Confusion Matrix</h3>
<div class="outline-text-3" id="text-4-5">
<ul class="org-ul">
<li>Making predictions on fitted data, e.g. M4: \(\text{logit}(p) = b_0 + b_1\times \text{balance} + b_2 \times \text{income} + b_3 \times \text{stdt}\)</li>
<li>Make predictions by using predict with Model 4, and use 0.5 as the cutoff</li>
</ul>
</div>
<div id="outline-container-orgd6b6712" class="outline-4">
<h4 id="orgd6b6712"><span class="section-number-4">4.5.1.</span> True Negative and False Positive</h4>
<div class="outline-text-4" id="text-4-5-1">
<ul class="org-ul">
<li>Consider all Y=0 observed (no defaults)</li>
<li>For each observation, use the logic model to make prediction with the X values</li>
<li>If predicted value == 0, that's a true negative</li>
<li>Else predicted value == 1, false positive</li>
<li>As the cutoff is increased, true negatives increase and false positives decrease:
<ul class="org-ul">
<li><b>Specificity</b> increases</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgd7e702e" class="outline-4">
<h4 id="orgd7e702e"><span class="section-number-4">4.5.2.</span> True Positive and False Negative</h4>
<div class="outline-text-4" id="text-4-5-2">
<ul class="org-ul">
<li>Consider all Y=1 observed (defaults)</li>
<li>For each observation, use the logic model to make prediction with the X values</li>
<li>If predicted value == 1, that's a true positive</li>
<li>Else predicted value == 0, false negative</li>
<li>As the cutoff is increased, false negatives increase and true positives decrease:
<ul class="org-ul">
<li><b>Sensitivity</b> decreases</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org6697f98" class="outline-4">
<h4 id="org6697f98"><span class="section-number-4">4.5.3.</span> Confusion matrix</h4>
<div class="outline-text-4" id="text-4-5-3">
<ul class="org-ul">
<li>Shows the intersection of actual and predicted values of model</li>
<li>Matrix records the performance of classifier, i.e. lets you gauge how models perform</li>
<li>Record predicted value \(\hat{y}\) after fitting logit model on dataset.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org9b52b8d" class="outline-3">
<h3 id="org9b52b8d"><span class="section-number-3">4.6.</span> M4L6: Sensitivity, Specificity, and the ROC curve</h3>
<div class="outline-text-3" id="text-4-6">
</div>
<div id="outline-container-org9bc1925" class="outline-4">
<h4 id="org9bc1925"><span class="section-number-4">4.6.1.</span> Definitions</h4>
<div class="outline-text-4" id="text-4-6-1">
<dl class="org-dl">
<dt>Sensitivity</dt><dd>true positive rate: \(\frac{\text{true pos}}{\text{true pos + false neg}}\)</dd>
<dt>Specificity</dt><dd>true negative rate \(\frac{\text{true neg}}{\text{true neg + false pos}}\)</dd>
<dt>1-Specificity</dt><dd>False positive rate \(\frac{\text{false pos}}{\text{true neg + false pos}}\)</dd>
<dt>Precision</dt><dd>\(P(Y=1|\hat{y}=1) = \frac{\text{true pos}}{\text{true pos+false pos}}\)</dd>
<dt>Accuracy</dt><dd>\(\frac{\text{true pos+true neg}}{\text{true pos + false pos + true neg + false neg}}\)</dd>
</dl>
</div>
</div>
<div id="outline-container-org4e61896" class="outline-4">
<h4 id="org4e61896"><span class="section-number-4">4.6.2.</span> Type I and II errors</h4>
<div class="outline-text-4" id="text-4-6-2">
<dl class="org-dl">
<dt>False positive error</dt><dd>type I error. Falsely reject true (null) hypothesis. true Y=0, predicted Y=1.</dd>
<dt>False negative error</dt><dd>type II error. Incorrectly retain - fail to reject - false (null) hypothesis. True Y=1, predicted Y=0</dd>
</dl>
</div>
<ol class="org-ol">
<li><a id="org16136dc"></a>Cutoff<br />
<div class="outline-text-5" id="text-4-6-2-1">
<ol class="org-ol">
<li>Increasing cutoff decreases Type I error</li>
<li>Increasing cutoff increases Type II error</li>
</ol>
</div>
</li>
<li><a id="org4675eb5"></a>In business applications<br />
<div class="outline-text-5" id="text-4-6-2-2">
<p>
Cost of making error depends on situation, e.g.:
</p>
<ul class="org-ul">
<li>When modeling marketing spend, false positive means spending marketing costs on non-purchasers. Moderate loss. (Type I) error</li>
<li>When modeling customer as non-defaulter who actually defaults. (Type II) error</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="outline-container-org631e15f" class="outline-4">
<h4 id="org631e15f"><span class="section-number-4">4.6.3.</span> Calculating sensitivity and specificity for cutoff \(p = 0.5\)</h4>
<div class="outline-text-4" id="text-4-6-3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">&#xa0;</th>
<th scope="col" class="org-left">Predicted</th>
<th scope="col" class="org-left">Values</th>
<th scope="col" class="org-right">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">0</td>
<td class="org-left">1</td>
<td class="org-right">Total</td>
</tr>

<tr>
<td class="org-left">True</td>
<td class="org-right">0</td>
<td class="org-left">9627 true neg</td>
<td class="org-left">40 false pos</td>
<td class="org-right">9667</td>
</tr>

<tr>
<td class="org-left">Values</td>
<td class="org-right">1</td>
<td class="org-left">228 false neg</td>
<td class="org-left">105 true pos</td>
<td class="org-right">333</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">9855</td>
<td class="org-left">145</td>
<td class="org-right">10000</td>
</tr>
</tbody>
</table>
<ul class="org-ul">
<li>Sensitivity =  \(\frac{\text{true pos}}{\text{true pos + false neg}}\) = 105/(105+228) = 0.32</li>
<li>Specificity = \(\frac{\text{true neg}}{\text{true neg + false pos}}\) = 9627/(9627+40) = 0.996</li>
</ul>
</div>
</div>
<div id="outline-container-orgf1704a1" class="outline-4">
<h4 id="orgf1704a1"><span class="section-number-4">4.6.4.</span> Increasing cutoff to \(p=0.9\)</h4>
<div class="outline-text-4" id="text-4-6-4">
<ul class="org-ul">
<li>Sensitivity decreases to 0.03</li>
<li>Specificity increases to 0.9998</li>
</ul>
</div>
</div>
<div id="outline-container-org4a4deb9" class="outline-4">
<h4 id="org4a4deb9"><span class="section-number-4">4.6.5.</span> Increasing cutoff value of \(p\)</h4>
<div class="outline-text-4" id="text-4-6-5">
<ul class="org-ul">
<li>True neg increase, false pos decrease.</li>
<li>False neg increase, true pos decrease.</li>
</ul>
</div>
</div>
<div id="outline-container-orgc92be6e" class="outline-4">
<h4 id="orgc92be6e"><span class="section-number-4">4.6.6.</span> ROC Curve</h4>
<div class="outline-text-4" id="text-4-6-6">
<ul class="org-ul">
<li>"Receiver Operating Characteristic" curve</li>
<li>Shows diagnostic ability of binary classifier, when the cutoff value is varied</li>
<li>Look at area under curve. We want &gt; 0.5</li>
</ul>
</div>
</div>
<div id="outline-container-org066809e" class="outline-4">
<h4 id="org066809e"><span class="section-number-4">4.6.7.</span> M4L6 lecture quiz</h4>
<div class="outline-text-4" id="text-4-6-7">
<ol class="org-ol">
<li>Formula of sensitivity  \(\frac{\text{true pos}}{\text{true pos + false neg}}\)</li>
<li>Formula of specificity \(\frac{\text{true neg}}{\text{true neg + false pos}}\)</li>
</ol>
</div>
</div>
</div>
</div>
<div id="outline-container-org39ca6f4" class="outline-2">
<h2 id="org39ca6f4"><span class="section-number-2">5.</span> Module 05: Treatment Effects</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orga38ff0a" class="outline-3">
<h3 id="orga38ff0a"><span class="section-number-3">5.1.</span> M5L1: Correlations vs. Causality</h3>
<div class="outline-text-3" id="text-5-1">
</div>
<div id="outline-container-org4306d6c" class="outline-4">
<h4 id="org4306d6c"><span class="section-number-4">5.1.1.</span> Correlation</h4>
<div class="outline-text-4" id="text-5-1-1">
<p>
\[
Corr(X,Y) = \frac{\sum^n_{i=1}(x_i-\bar{x})(y_i-\bar{y})}
{\sqrt{\sum^n_{i=1}(x_i-\bar{x})^2} \sqrt{\sum^n_{i=1}(y_i-\bar{y})^2}}
\]
</p>
<ul class="org-ul">
<li>Correlation measures the <b>linear</b> relationship between X and Y
<ul class="org-ul">
<li>i.e., if Y=X<sup>2</sup>, Corr(X,Y) is 0 even though they're perfectly related</li>
</ul></li>
<li>Correlation(X,Y) has range (-1,1)</li>
</ul>
</div>
</div>
<div id="outline-container-org647a628" class="outline-4">
<h4 id="org647a628"><span class="section-number-4">5.1.2.</span> Strong Corr(A,B)</h4>
<div class="outline-text-4" id="text-5-1-2">
<p>
Possibilities:
</p>
<ol class="org-ol">
<li>A causes B</li>
<li>B causes A
<ul class="org-ul">
<li>Note reverse causality! e.g., the faster windmill rotates -&gt; faster windspeed observed</li>
</ul></li>
<li>A and B are consequence of another common cause C
<ul class="org-ul">
<li>e.g. ice cream sales increase, more drownings.</li>
<li>common cause is summer</li>
</ul></li>
<li>A -&gt; C -&gt; B</li>
<li>Correlation is by chance</li>
</ol>
</div>
</div>
<div id="outline-container-org009c688" class="outline-4">
<h4 id="org009c688"><span class="section-number-4">5.1.3.</span> <i>Post hoc ergo propter hoc</i></h4>
<div class="outline-text-4" id="text-5-1-3">
<blockquote>
<p>
After this, therefore because of this
</p>
</blockquote>
<ul class="org-ul">
<li>Logical fallacy that if A happened, then B happened, A must have caused B to happen</li>
<li>E.g. rooster crows just before sunrise, hence rooster causes sun to rise</li>
<li>Please consider other factors that could be responsible for the result
<ul class="org-ul">
<li>that might rule out the sequence connection</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org4533f05" class="outline-4">
<h4 id="org4533f05"><span class="section-number-4">5.1.4.</span> Causation</h4>
<div class="outline-text-4" id="text-5-1-4">
<p>
To establish causation:
</p>
<ol class="org-ol">
<li>Time-wise, hypothesized cause <b>must</b> be before anticipated effect</li>
<li>Change in cause <b>must</b> lead to change in effect</li>
<li><b>Must</b> discount all plausible explanations that could explain the relationship, other than the proposed cause</li>
</ol>
</div>
</div>
<div id="outline-container-orgc08bf3c" class="outline-4">
<h4 id="orgc08bf3c"><span class="section-number-4">5.1.5.</span> Relevance</h4>
<div class="outline-text-4" id="text-5-1-5">
<ul class="org-ul">
<li>Needed in fields e.g. medicine</li>
<li>Causal models used to build theories
<ul class="org-ul">
<li>Managers need to know "how things work" i.e. theories</li>
</ul></li>
<li>For managers to make changes to price, mix, promotions, hence causal impact must be attributable</li>
<li>If X does not cause Y, then don't bother spending effort in X</li>
<li>If X causes Y, then can use a theory to explain why</li>
</ul>
</div>
</div>
<div id="outline-container-orgb878b45" class="outline-4">
<h4 id="orgb878b45"><span class="section-number-4">5.1.6.</span> M5L1 no lecture quiz</h4>
</div>
</div>
<div id="outline-container-org512b7ec" class="outline-3">
<h3 id="org512b7ec"><span class="section-number-3">5.2.</span> M5L2: Selection Bias</h3>
<div class="outline-text-3" id="text-5-2">
<ul class="org-ul">
<li>Occurs when individuals selected for treatment without proper randomization</li>
<li>Can be caused by:
<ol class="org-ol">
<li>Self-selection, especially in poorly-designed experiments. Participants could be motivated to participate, or not.</li>
<li>Voluntary response bias, participants are already interested in topic, thus over-represents vs population.</li>
<li>Non-response bias, problem in surveys with low response rate</li>
</ol></li>
</ul>
</div>
<div id="outline-container-org9bacc1e" class="outline-4">
<h4 id="org9bacc1e"><span class="section-number-4">5.2.1.</span> Assumptions in OLS estimation when estimating slope coefficient, \(b_1\)</h4>
<div class="outline-text-4" id="text-5-2-1">
<ul class="org-ul">
<li>OLS estimator is used to estimate b<sub>1</sub> in regression:
\[
  Y = b_0 + b_1 X + \epsilon \\
  b_{OLS} = \frac{Cov(X,Y)}{Cov(X,X)} \\
  = \frac{Cov(b_0+b_1X+e,X)}{Cov(X,X)} \\
  = \frac{b_1 Cov(X,X)+Cov(e,X)}{Cov(X,X)}
  = b_1 + \frac{Cov(e,X)}{Cov(X,X)}
  \]</li>
<li>This assumes <b>orthogonality</b>: \(Cov(e,X)=0\)</li>
<li>When X, e are <b>uncorrelated</b>, b<sub>OLS</sub> is a good estimator of b<sub>1</sub></li>
<li>When X, e are <b>correlated</b>, b<sub>OLS</sub> is a bad estimator of b<sub>1</sub></li>
<li>When X is a dummy variable,
\[
  b_{OLS} = b_1 + \frac{Cov(e,X)}{Cov(X,X)} \\
  = b_1 + (\bar{e_1}-\bar{e_0})
  \]
<dl class="org-dl">
<dt>b<sub>1</sub></dt><dd>treatment effect</dd>
<dt>\((\bar{e_1}-\bar{e_0})\)</dt><dd>selection bias</dd>
</dl></li>
<li>\((\bar{e_1}-\bar{e_0})\), the selection bias
<ul class="org-ul">
<li>if = 0, b<sub>OLS</sub> is good estimate of b<sub>1</sub></li>
<li>if &ne; 0, b<sub>OLS</sub> is bad estimate of b<sub>1</sub></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgf2103ee" class="outline-4">
<h4 id="orgf2103ee"><span class="section-number-4">5.2.2.</span> Controlling selection bias</h4>
<div class="outline-text-4" id="text-5-2-2">
<ul class="org-ul">
<li>Randomized controlled experiment
<ul class="org-ul">
<li>Assign test subjects into treatment and control groups
<ul class="org-ul">
<li>Used in science, e.g. medicine, agriculture</li>
<li>Difficult in economics</li>
<li>Getting easier in business</li>
</ul></li>
</ul></li>
<li>Natural experiment</li>
<li>Add control variables
<ul class="org-ul">
<li>However this is a weaker approach</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgf7f3aca" class="outline-4">
<h4 id="orgf7f3aca"><span class="section-number-4">5.2.3.</span> M52 no lecture quiz</h4>
</div>
</div>
<div id="outline-container-orgd7fc9f4" class="outline-3">
<h3 id="orgd7fc9f4"><span class="section-number-3">5.3.</span> M5L3: Randomized Controlled Experiment and the Difference Estimator</h3>
<div class="outline-text-3" id="text-5-3">
<p>
Setting up RCT
</p>
<ol class="org-ol">
<li>Create initial sample
Random assignment by generating random numbers in [0,1]</li>
<li>If rn &lt; 0.5 -&gt; go to control group, no treatment (or placebo). \(d=0\) (dummy variable)</li>
<li>If rn &gt;= 0.5 -&gt; go to test group, treatment. \(d=1\)</li>
</ol>
</div>
<div id="outline-container-orga881110" class="outline-4">
<h4 id="orga881110"><span class="section-number-4">5.3.1.</span> Regression model</h4>
<div class="outline-text-4" id="text-5-3-1">
<ul class="org-ul">
<li>To analyze results, define \(d\) as:
\[
  d_i = 1 \text{ if individual i is in treatment group, else 0}
  \]</li>
<li>Regression model with \(N\) individuals being studied
\[
  y_i = b_0 + b_1 d_i+e_i, \\
  i = 1, 2, ..., N
  \]</li>
<li>Regression functions:
\[
  \text{In treatment group: } (d_i=1) \\
  E(y_i) = b_0 + b_1 \\
  \text{In control group: } (d_i=0)\\
  E(y_i) = b_0
  \]</li>
</ul>
</div>
</div>
<div id="outline-container-org4518906" class="outline-4">
<h4 id="org4518906"><span class="section-number-4">5.3.2.</span> Difference estimator</h4>
<div class="outline-text-4" id="text-5-3-2">
<ul class="org-ul">
<li>OLS estimator for b<sub>1</sub> is:
\[
  b_{OLS} = \frac{Cov(X,Y)}{Cov(X,X)} \\
  = \frac{\sum^N_{i=1}(d_i-\bar{d})(y_i-\bar{y})}
  {\sum^N_{i=1}(d_i-\bar{d})^2} \\
  = \bar{y_1} - \bar{y_0} \\
  \bar{y_1} = \sum^N_{i=1}\frac{y_i}{N_1} \\
  \bar{y_0} = \sum^{N_0}_{i=1}\frac{y_i}{N_0}
  \]
<dl class="org-dl">
<dt>N<sub>1</sub></dt><dd>number of obs. in treatment group</dd>
<dt>N<sub>0</sub></dt><dd>number of obs. in control group</dd>
<dt>b<sub>OLS</sub></dt><dd>difference estimate, as it's the difference between sample means of treatment and control groups</dd>
</dl></li>
<li>Difference estimator can be rewritten as:
\[
  b_{OLS} = \frac{\sum^N_{i=1}(d_i-\bar{d})(e_i-\bar{e})}
  {\sum^N_{i=1}(d_i-\bar{d})^2} \\
  = b_1 + (\bar{e}_1 - \bar{e}_0)
  \]</li>
<li>If individuals can self-select into groups, then the selection bias in estimating treatment effect is:
\(E(\bar{e}_1 - \bar{e}_0)\)</li>
<li>Random assignment of individuals:
<ul class="org-ul">
<li>No systematic differences</li>
<li>The only difference is the treatment</li>
</ul></li>
<li>Random assignment: \(E(\bar{e}_1 - \bar{e}_0) = 0\)
<ul class="org-ul">
<li>OLS estimator is thus unbiased.</li>
<li>\(E\) is commutative.</li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org1fddbf8" class="outline-3">
<h3 id="org1fddbf8"><span class="section-number-3">5.4.</span> M5L4: Star Experiment: Effect of Small Class Size</h3>
<div class="outline-text-3" id="text-5-4">
</div>
<div id="outline-container-org5357c10" class="outline-4">
<h4 id="org5357c10"><span class="section-number-4">5.4.1.</span> Summary</h4>
<div class="outline-text-4" id="text-5-4-1">
<ul class="org-ul">
<li>Tennessee students randomly assigned in schools to:
<ol class="org-ol">
<li>small class</li>
<li>regular class</li>
<li>regular class with paid aide</li>
</ol></li>
<li>Teachers randomly assigned to same groups</li>
<li>data in <code>ecdat::star</code></li>
<li><code>totalscore = tmathssk + treadssk</code> (math + reading scores)</li>
<li>Indicator variables:
<ol class="org-ol">
<li><code>small</code> = 1 if it's a small class</li>
<li><code>boy</code> = 1 if sex = boy</li>
<li><code>whiteother</code> = 1 if race = 'white or other'</li>
<li><code>freelunch</code> = 1 if lunch was free</li>
</ol></li>
</ul>
</div>
</div>
<div id="outline-container-orgc630df9" class="outline-4">
<h4 id="orgc630df9"><span class="section-number-4">5.4.2.</span> Check for random assignment</h4>
<div class="outline-text-4" id="text-5-4-2">
<ul class="org-ul">
<li>Regress \(\text{small ~ .}\) to check for significant coefficients
<ul class="org-ul">
<li>If random assignment, no significant coefficients</li>
<li>Use linear probability as small is 1/0</li>
<li>All coefficients are <b>not</b> statistically significantly different from 0
<ul class="org-ul">
<li>Hence there is random assignment</li>
</ul></li>
<li>Cannot reject b<sub>0</sub> = 0.5</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgd916589" class="outline-4">
<h4 id="orgd916589"><span class="section-number-4">5.4.3.</span> Summary stats</h4>
<div class="outline-text-4" id="text-5-4-3">
<ul class="org-ul">
<li>Difference between small = 0 and small = 1 classes of <code>totalscore</code> in summary stats:
<ul class="org-ul">
<li>mean of small = 0 (regular): 917.94</li>
<li>mean of small = 1 (small): 932.05</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org095e627" class="outline-4">
<h4 id="org095e627"><span class="section-number-4">5.4.4.</span> First regression</h4>
<div class="outline-text-4" id="text-5-4-4">
<p>
Regression of \(\text{totalscore} = b_0 + b_1\text{small}+e\)
</p>
<ul class="org-ul">
<li>small class sizes have significantly different scores than regular</li>
<li>b<sub>1</sub> estimate, 14.109, is statistically different from 0</li>
<li>This is also the difference in the means in summary stats above</li>
<li>Interpretation: 14.109 on above is added to students' total score if moved from regular-sized class to small-sized class</li>
</ul>
</div>
</div>
<div id="outline-container-orga43fbb3" class="outline-4">
<h4 id="orga43fbb3"><span class="section-number-4">5.4.5.</span> Second regression</h4>
<div class="outline-text-4" id="text-5-4-5">
<p>
Add teacher experience, i.e. \(\text{totalscore} = b_0 + b_1\text{small}+b_2\text{totexpk}+e\)
</p>
<ul class="org-ul">
<li>b<sub>2</sub> estimate is 1.1580, and it is statistically significant</li>
<li>i.e. each additional year of teacher experience adds 1.16 points to total score on average</li>
<li>Difference estimator, b<sub>1</sub>, = 14.21</li>
<li>The effect of small class size is approximately the same as having teacher with \(\frac{14.21}{1.16} = 12\) additional years of experience.</li>
</ul>
</div>
</div>
<div id="outline-container-orgfb6ab68" class="outline-4">
<h4 id="orgfb6ab68"><span class="section-number-4">5.4.6.</span> M5L4 no lecture quiz</h4>
</div>
</div>
<div id="outline-container-orgad529e2" class="outline-3">
<h3 id="orgad529e2"><span class="section-number-3">5.5.</span> M5L5: Natural Experiments and Difference-in-Difference Estimator</h3>
<div class="outline-text-3" id="text-5-5">
</div>
<div id="outline-container-org3f0ad9f" class="outline-4">
<h4 id="org3f0ad9f"><span class="section-number-4">5.5.1.</span> Definition</h4>
<div class="outline-text-4" id="text-5-5-1">
<ul class="org-ul">
<li>Observational study from real-world conditions</li>
<li><b><b>Approximates</b></b> what would happen in randomized controlled trial</li>
<li>Subjects <b><b>cannot</b></b> choose which group they're in
<ul class="org-ul">
<li>Treatment</li>
<li>Control</li>
</ul></li>
<li>This choice is made by external factor, e.g. weather, policy, etc</li>
<li>There must be subjects in both groups</li>
<li>Compare the average change, over time, of the response Y variable in treatment group vs control group.
<ul class="org-ul">
<li><b><b>a.k.a.</b></b> difference in difference</li>
</ul></li>
<li>Use panel data to measure these differences</li>
</ul>
</div>
</div>
<div id="outline-container-orgcfce217" class="outline-4">
<h4 id="orgcfce217"><span class="section-number-4">5.5.2.</span> Examples</h4>
<div class="outline-text-4" id="text-5-5-2">
<ul class="org-ul">
<li>Treatment that just happened, not intentionally designed, e.g.
<ol class="org-ol">
<li>Change in law for some people only</li>
<li>IT system for BOPIS in some stores not others</li>
<li>Hurricane hits some stores, not others</li>
<li>Mobile carrier tweak price plan for some customers, not others</li>
<li>Minimum wage changed in some states, not others</li>
</ol></li>
</ul>
</div>
</div>
<div id="outline-container-org068bea3" class="outline-4">
<h4 id="org068bea3"><span class="section-number-4">5.5.3.</span> Counterfactual</h4>
<div class="outline-text-4" id="text-5-5-3">
<p>
These are required to estimate the causal impact of treatment.
</p>
<ol class="org-ol">
<li>Need to compare the outcome with intervention vs. what would have been <b><b>without</b></b> the intervention
<ol class="org-ol">
<li>This is the counterfactual</li>
</ol></li>
<li>Control group must be relatively similar to the treatment group</li>
<li>If not possible to establish counterfactuals, it is impossible to estimate treatment effects properly</li>
</ol>
</div>
</div>
<div id="outline-container-org93332fc" class="outline-4">
<h4 id="org93332fc"><span class="section-number-4">5.5.4.</span> Example of natural experiment</h4>
<div class="outline-text-4" id="text-5-5-4">
<ul class="org-ul">
<li>NYC lower sales tax rates
<ul class="org-ul">
<li>Other neighbouring states do not</li>
</ul></li>
<li>Estimate the difference in purchase behaviour between NYC and neighbouring states</li>
<li>Is the effect:
<ol class="org-ol">
<li>Lower internet sales</li>
<li>Stronger tendency to purchase locally?</li>
</ol></li>
</ul>
</div>
</div>
<div id="outline-container-orgda9e028" class="outline-4">
<h4 id="orgda9e028"><span class="section-number-4">5.5.5.</span> Difference-in-difference (D-in-D)</h4>
<div class="outline-text-4" id="text-5-5-5">
<ul class="org-ul">
<li>Consider times
<ul class="org-ul">
<li>t<sub>1</sub>: occurs before treatment</li>
<li>t<sub>2</sub>: occurs after treatment</li>
</ul></li>
<li><p>
Measure the average value of dependent variable \(Y\)
</p>
<ol class="org-ol">
<li>\(A\) = \(\bar{Y}\) for control group at t<sub>1</sub></li>
<li>\(B\) = \(\bar{Y}\) for treatment group at t<sub>1</sub></li>
<li>\(C\) = \(\bar{Y}\) for control group at t<sub>2</sub></li>
<li>\(D\) = \(\bar{Y}\) for treatment group at t<sub>2</sub></li>
</ol>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">Before</th>
<th scope="col" class="org-left">After</th>
<th scope="col" class="org-left">Difference</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Control</td>
<td class="org-left">A</td>
<td class="org-left">C</td>
<td class="org-left">C-A</td>
</tr>

<tr>
<td class="org-left">Treated</td>
<td class="org-left">B</td>
<td class="org-left">D</td>
<td class="org-left">D-B</td>
</tr>
</tbody>
</table>

<p>
Hence difference-in-difference is (D-B) - (C-A)
<img src="./img/0505-dind.png" alt="0505-dind.png" />
</p>
<ul class="org-ul">
<li>This is D-E in the graph</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgff116f6" class="outline-4">
<h4 id="orgff116f6"><span class="section-number-4">5.5.6.</span> Estimating D-in-D with regression</h4>
<div class="outline-text-4" id="text-5-5-6">
<ul class="org-ul">
<li>NYC dataset: create two dummies:
<ol class="org-ol">
<li>\(\text{NYC}\) = 1 if store in NYC, else 0</li>
<li>\(\text{After}\) = 1 if observation is in after, else 0</li>
</ol></li>
<li>Define an interaction variable, \(\text{NYCAfter} = \text{NYC}*\text{After}*\)</li>
<li>Observe sales in stores in
<ul class="org-ul">
<li>regions: NYC and other</li>
<li>time: before and after change in sales tax</li>
</ul></li>
<li>Model:
\[
  \text{sales} = b_0 + b_1\text{NYC} + b_2\text{After} + b_3\text{NYCAfter}
  \]</li>
<li>Graphically:
<img src="./img/0505-dind1.png" alt="0505-dind1.png" /></li>
</ul>
</div>
</div>
<div id="outline-container-org13cfe8a" class="outline-4">
<h4 id="org13cfe8a"><span class="section-number-4">5.5.7.</span> Model</h4>
<div class="outline-text-4" id="text-5-5-7">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">Before</th>
<th scope="col" class="org-left">After</th>
<th scope="col" class="org-left">Diff. (Before-After)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Control</td>
<td class="org-left">b<sub>0</sub></td>
<td class="org-left">b<sub>0</sub> + b<sub>2</sub></td>
<td class="org-left">b<sub>2</sub></td>
</tr>

<tr>
<td class="org-left">Treated</td>
<td class="org-left">b<sub>0</sub> + b1</td>
<td class="org-left">b<sub>0</sub> + b<sub>1</sub> + b<sub>2</sub> + b<sub>3</sub></td>
<td class="org-left">b<sub>2</sub> + b<sub>3</sub></td>
</tr>
</tbody>
</table>
<p>
Hence the diff-in-diff estimator is the difference between the two differences, i.e.
b<sub>2</sub> + b<sub>3</sub> - b<sub>2</sub> = b<sub>3</sub>
</p>
</div>
</div>
<div id="outline-container-orgbf78eab" class="outline-4">
<h4 id="orgbf78eab"><span class="section-number-4">5.5.8.</span> Steps in natural experiment</h4>
<div class="outline-text-4" id="text-5-5-8">
<ol class="org-ol">
<li>Understand the treatment that just happened</li>
<li>Determine if the treatment appears to be randomly assigned:
<ol class="org-ol">
<li>assignment orthogonal to unobserved factors, X orthogonal to &epsilon;</li>
</ol></li>
<li>Determine if there's control and treatment groups</li>
<li>Determine if there's evidence to show the two groups are roughly the same before experiment</li>
<li>Analyze treatment effect with diff-in-diff estimator</li>
</ol>
</div>
</div>
<div id="outline-container-orgd4b2e0c" class="outline-4">
<h4 id="orgd4b2e0c"><span class="section-number-4">5.5.9.</span> M5L5 no lecture quiz</h4>
</div>
</div>
</div>
<div id="outline-container-org9f954fd" class="outline-2">
<h2 id="org9f954fd"><span class="section-number-2">6.</span> Module 06: Measuring Returns</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-org3caaada" class="outline-3">
<h3 id="org3caaada"><span class="section-number-3">6.1.</span> M6L1: Introduction</h3>
<div class="outline-text-3" id="text-6-1">
<p>
Parts of discussion:
</p>
<ol class="org-ol">
<li>Measuring risk and return</li>
<li>Measuring risk-adjusted performance and market efficiency</li>
<li>Factors that drive returns</li>
</ol>
</div>
</div>
<div id="outline-container-org3552807" class="outline-3">
<h3 id="org3552807"><span class="section-number-3">6.2.</span> M6L2: Simple and compound returns</h3>
<div class="outline-text-3" id="text-6-2">
</div>
<div id="outline-container-org6eafbec" class="outline-4">
<h4 id="org6eafbec"><span class="section-number-4">6.2.1.</span> Objectives</h4>
<div class="outline-text-4" id="text-6-2-1">
<ol class="org-ol">
<li>Understand simple and compound returns</li>
<li>Using R to calculate values for a given asset</li>
</ol>
</div>
</div>
<div id="outline-container-org571d779" class="outline-4">
<h4 id="org571d779"><span class="section-number-4">6.2.2.</span> Simple return</h4>
<div class="outline-text-4" id="text-6-2-2">
<dl class="org-dl">
<dt>Simple return</dt><dd>The percentage change in the stock price from one period to the next</dd>
</dl>
<p>
E.g.:
</p>
<ul class="org-ul">
<li>April 2019: $15</li>
<li>May 2019: $17</li>
<li>Stock return = (17-15)/15 = 13.33%</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="org69bd3a0"></a>Caveat on calculating returns<br />
<div class="outline-text-5" id="text-6-2-2-1">
<ul class="org-ul">
<li>Need to adjust for stock splits and dividends.</li>
<li>General expression: \(r_t = \frac{p_tf_t+d_t}{p_{t-1}}-1\)
<dl class="org-dl">
<dt>p</dt><dd>price</dd>
<dt>f</dt><dd>adjustment factor for stock splits</dd>
<dt>d</dt><dd>dividend</dd>
</dl></li>
<li>Stock splits are only cosmetic events</li>
</ul>
</div>
</li>
<li><a id="orgac06c95"></a>Example of simple returns<br />
<div class="outline-text-5" id="text-6-2-2-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Date</th>
<th scope="col" class="org-right">Price</th>
<th scope="col" class="org-right">Dividend</th>
<th scope="col" class="org-left">Split</th>
<th scope="col" class="org-left">Return</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Sep 91</td>
<td class="org-right">31.125</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Oct 91</td>
<td class="org-right">37.750</td>
<td class="org-right">0.06</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">(37.75+0.06)/31.25-1 = 20.9%/</td>
</tr>

<tr>
<td class="org-left">Nov 91</td>
<td class="org-right">32.75</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">(32.75/37.75)-1 = -13.25%</td>
</tr>

<tr>
<td class="org-left">Dec 91</td>
<td class="org-right">30.375</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">3 for 2</td>
<td class="org-left">(30.37*1.5)/32.75-1 = 39.1%</td>
</tr>
</tbody>
</table>
</div>
</li>
</ol>
</div>
<div id="outline-container-org4996a39" class="outline-4">
<h4 id="org4996a39"><span class="section-number-4">6.2.3.</span> Compounded returns</h4>
<div class="outline-text-4" id="text-6-2-3">
<ul class="org-ul">
<li>Assets are normally held for multiple periods</li>
<li>How to calculate total return over this period?</li>
<li>Definitions
<dl class="org-dl">
<dt>Compound return</dt><dd>cumulative effect a series of gains or losses has on original investment over a period of time</dd>
<dt>Formula</dt><dd>(r<sub>1</sub> + 1) x (r<sub>2</sub> + 1) + &#x2026; + (r<sub>n</sub>+1)-1</dd>
</dl></li>
<li>E.g. for above example, compounded return = (1+0.299)*(1-0.1325)*(1+0.3912)-1=46%</li>
</ul>
</div>
</div>
<div id="outline-container-org51b1e49" class="outline-4">
<h4 id="org51b1e49"><span class="section-number-4">6.2.4.</span> Calculating compound returns in R</h4>
<div class="outline-text-4" id="text-6-2-4">
<ul class="org-ul">
<li>Use <code>PerformanceAnalytics</code>, <code>xts</code>, <code>lubridate</code></li>
<li>Formula for cumulative return: <code>Return.cumulative(df$ContraRet, geometric=T)</code></li>
<li>Compounded return as chart:
<code>chart.CumReturns(df$ContraRet, wealth.index=F, geometric=T)</code></li>
</ul>
</div>
</div>
<div id="outline-container-org3591a57" class="outline-4">
<h4 id="org3591a57"><span class="section-number-4">6.2.5.</span> M6L2 Summary (No lecture quiz)</h4>
<div class="outline-text-4" id="text-6-2-5">
<ul class="org-ul">
<li>Returns allow us to understand how investments are growing</li>
<li>Simple and compound returns are both informative</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org8485387" class="outline-3">
<h3 id="org8485387"><span class="section-number-3">6.3.</span> M6L3: Measuring risk</h3>
<div class="outline-text-3" id="text-6-3">
</div>
<div id="outline-container-orgd86cc82" class="outline-4">
<h4 id="orgd86cc82"><span class="section-number-4">6.3.1.</span> Both risk <b>and</b> return matter when investing</h4>
<div class="outline-text-4" id="text-6-3-1">
<ul class="org-ul">
<li>Risk also matters</li>
<li>Investors care about:
<ul class="org-ul">
<li>Volatility: how much prices fluctuate, i.e.</li>
<li>How much money they stand to gain or lose</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org55febba" class="outline-4">
<h4 id="org55febba"><span class="section-number-4">6.3.2.</span> Standard deviation of returns</h4>
<div class="outline-text-4" id="text-6-3-2">
<ul class="org-ul">
<li>Measures variation by looking at how far the observations' values are from the mean value</li>
<li>Formula: \(s=\sqrt{\frac{\sum(x_i-\bar x)^2}{n-1}}\)</li>
<li>Higher sd = higher level of risk</li>
</ul>
</div>
</div>
<div id="outline-container-org220baef" class="outline-4">
<h4 id="org220baef"><span class="section-number-4">6.3.3.</span> Standard deviation ~ Total risk</h4>
<div class="outline-text-4" id="text-6-3-3">
<ul class="org-ul">
<li>Total risk comprises both:
<ol class="org-ol">
<li>Firm specific risk: good or bad news about the firm, e.g. product recall, lawsuit</li>
<li>Market-wide: news about the overall economy, e.g. interest rate movements, recession likelihoods</li>
</ol></li>
<li>As more stocks are held in portfolio, the firm-specific risk decreases
<img src="./img/m6l2-firmrisk.png" alt="m6l2-firmrisk.png" /></li>
</ul>
</div>
</div>
<div id="outline-container-org1d2de6e" class="outline-4">
<h4 id="org1d2de6e"><span class="section-number-4">6.3.4.</span> Decomposing risk</h4>
<div class="outline-text-4" id="text-6-3-4">
<ul class="org-ul">
<li>Into firm-specific and market-wide components</li>
<li>Can be estimated with this regression model:
\(r_i=\alpha + \beta r_m + \epsilon\)
<dl class="org-dl">
<dt>r<sub>m</sub></dt><dd>return on broad stock index portfolio</dd>
<dt>&beta;</dt><dd>measure of stock sensitivity to overall market movement</dd>
<dt>R<sup>2</sup></dt><dd>measures the % of fund performance as a result of the market</dd>
</dl></li>
<li>Higher R<sup>2</sup> = more correlated with the market</li>
</ul>
</div>
</div>
<div id="outline-container-org8c4c876" class="outline-4">
<h4 id="org8c4c876"><span class="section-number-4">6.3.5.</span> Interpreting &beta;</h4>
<div class="outline-text-4" id="text-6-3-5">
<ul class="org-ul">
<li>Higher &beta; represent higher market risk
<ul class="org-ul">
<li>Risk free asset &beta; = 0</li>
<li>Overall stock market &beta; = 1</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org0d54b0f" class="outline-4">
<h4 id="org0d54b0f"><span class="section-number-4">6.3.6.</span> High-water mark and drawdown</h4>
<div class="outline-text-4" id="text-6-3-6">
<ul class="org-ul">
<li>Formulas
<dl class="org-dl">
<dt>High-water mark (HWM)</dt><dd>highest price a fund has achieved in the past</dd>
<dt>Drawdown (DD)</dt><dd>cumulative loss since losses started. Formula is \(DD_t = \frac{HWM_t-P_t}{HWM_t}\)</dd>
</dl></li>
<li>Drawdown measures the peak-to-trough decline in investment</li>
</ul>
</div>
</div>
<div id="outline-container-org9e9b836" class="outline-4">
<h4 id="org9e9b836"><span class="section-number-4">6.3.7.</span> Estimating mean return and standard deviation</h4>
<div class="outline-text-4" id="text-6-3-7">
<ul class="org-ul">
<li>Use the same file <code>contrafund.csv</code> and the same packages as above</li>
<li>To calculate standard deviation, use <code>table.Stats(df$ContrRet)</code></li>
</ul>
</div>
</div>
<div id="outline-container-org439971a" class="outline-4">
<h4 id="org439971a"><span class="section-number-4">6.3.8.</span> Estimating &beta; and R<sup>2</sup></h4>
<div class="outline-text-4" id="text-6-3-8">
<ul class="org-ul">
<li>&beta; and R<sup>2</sup> can be estimated with linear regression:
<code>model = lm(ContraRet~Market.Return, df)</code></li>
<li>Summary regression output example:
<ul class="org-ul">
<li>&beta; is the coefficient on Market.Return, e.g. 0.9004</li>
<li>Adjusted R<sup>2</sup> = 0.8313 indicating the fund is correlated with overall market</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org87eb27f" class="outline-4">
<h4 id="org87eb27f"><span class="section-number-4">6.3.9.</span> Drawdown</h4>
<div class="outline-text-4" id="text-6-3-9">
<ul class="org-ul">
<li>Plotting: <code>chart.Drawdown(df$ContraRev)~</code></li>
<li>Show largest 5 drawdowns: <code>table.Drawdowns(df$ContraRev, top=5, digits=4)</code></li>
</ul>
</div>
</div>
<div id="outline-container-org00461ac" class="outline-4">
<h4 id="org00461ac"><span class="section-number-4">6.3.10.</span> Summary (no lecture quiz)</h4>
<div class="outline-text-4" id="text-6-3-10">
<ul class="org-ul">
<li>Not sufficient to know just the returns</li>
<li>Standard deviation measures total return, while &beta; measures sensitivity to market moveemnts</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orge26b27d" class="outline-3">
<h3 id="orge26b27d"><span class="section-number-3">6.4.</span> M6L4: Historical returns</h3>
<div class="outline-text-3" id="text-6-4">
</div>
<div id="outline-container-org8ecfeca" class="outline-4">
<h4 id="org8ecfeca"><span class="section-number-4">6.4.1.</span> Asset classes</h4>
<div class="outline-text-4" id="text-6-4-1">
<ol class="org-ol">
<li>Small cap stocks: smallest 30% traded on US exchanges</li>
<li>Large cap stocks: largest 30% traded on US exchanges</li>
<li>Treasury bills: short-term US treasury debt</li>
<li>Treasury bonds: long-term US treasury debt</li>
<li>Comparison with inflation rate</li>
</ol>
</div>
</div>
<div id="outline-container-org5f1a757" class="outline-4">
<h4 id="org5f1a757"><span class="section-number-4">6.4.2.</span> Value of $1 invested in different asset classes:</h4>
<div class="outline-text-4" id="text-6-4-2">
<p>
Largest to smallest:
</p>
<ul class="org-ul">
<li>small cap</li>
<li>large cap</li>
<li>bonds</li>
<li>bills</li>
<li>inflation</li>
</ul>
<p>
Conclusion: equities &gt; government debt
</p>
</div>
</div>
<div id="outline-container-org0a3e956" class="outline-4">
<h4 id="org0a3e956"><span class="section-number-4">6.4.3.</span> Risk</h4>
<div class="outline-text-4" id="text-6-4-3">
<ul class="org-ul">
<li>Risk between equities and government debt is very different. Equities much riskier</li>
<li><p>
Riskier investments have higher return and higher standard deviation
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Standard deviation</th>
<th scope="col" class="org-right">Mean return</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Small cap</td>
<td class="org-right">33.3%</td>
<td class="org-right">16.5%</td>
</tr>

<tr>
<td class="org-left">Large cap</td>
<td class="org-right">19.3%</td>
<td class="org-right">11.2%</td>
</tr>

<tr>
<td class="org-left">Inflation</td>
<td class="org-right">3.8%</td>
<td class="org-right">3.1%</td>
</tr>

<tr>
<td class="org-left">Bills</td>
<td class="org-right">3.2%</td>
<td class="org-right">3.4%</td>
</tr>

<tr>
<td class="org-left">Bonds</td>
<td class="org-right">2.8%</td>
<td class="org-right">5.0%</td>
</tr>
</tbody>
</table></li>
</ul>
</div>
</div>
<div id="outline-container-org75c7506" class="outline-4">
<h4 id="org75c7506"><span class="section-number-4">6.4.4.</span> Summary (no lecture quiz)</h4>
<div class="outline-text-4" id="text-6-4-4">
<ul class="org-ul">
<li>Risk and return are linked</li>
<li>Over time, more risky assets generate higher returns.</li>
<li>However, they also have higher year-to-year variations</li>
<li>This is the risk-return tradeoff</li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-org095cbc7" class="outline-2">
<h2 id="org095cbc7"><span class="section-number-2">7.</span> Module 07: Measuring Risk-Adjusted Performance</h2>
<div class="outline-text-2" id="text-7">
</div>
<div id="outline-container-orgf265ffd" class="outline-3">
<h3 id="orgf265ffd"><span class="section-number-3">7.1.</span> M7L1: Risk Adjusted Performance</h3>
<div class="outline-text-3" id="text-7-1">
</div>
<div id="outline-container-org30f6a84" class="outline-4">
<h4 id="org30f6a84"><span class="section-number-4">7.1.1.</span> A Way to Keep Score</h4>
<div class="outline-text-4" id="text-7-1-1">
<ul class="org-ul">
<li>Need some way to measure whether investments are outperforming expectations</li>
<li>To measure abnormal return i.e.
Abnormal return = Actual return - Expected return</li>
</ul>
</div>
</div>
<div id="outline-container-org770c35a" class="outline-4">
<h4 id="org770c35a"><span class="section-number-4">7.1.2.</span> Benchmark comparisons</h4>
<div class="outline-text-4" id="text-7-1-2">
<ul class="org-ul">
<li>Compare to a benchmark, e.g.
<code>Return.cumulative(All.data, geometric=T)</code>
<code>chart.CumReturns(All.dat, wealth.index=F, geometric=T)</code></li>
</ul>
</div>
</div>
<div id="outline-container-orgb1c83af" class="outline-4">
<h4 id="orgb1c83af"><span class="section-number-4">7.1.3.</span> Sharpe ratio</h4>
<div class="outline-text-4" id="text-7-1-3">
<ul class="org-ul">
<li>Measures investment reward per unit of risk</li>
<li>\(\frac{R-R^f}{\sigma(R-R^f)}\)</li>
<li>Definitions
<dl class="org-dl">
<dt>R-R<sup>f</sup></dt><dd>excess of portfolio returns above risk free rate</dd>
<dt>&sigma;(R-R<sup>f</sup>)</dt><dd>standard deviation of the excess return</dd>
</dl></li>
<li>Higher ratios are better</li>
<li>Higher ratio indicates higher return per unit of risk</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="org2d502ce"></a>Calculating Sharpe ratio in R<br />
<div class="outline-text-5" id="text-7-1-3-1">
<ul class="org-ul">
<li><code>SharpeRatio(All.dat$ContraRet, All.dat$Risk.Free)</code>
<ul class="org-ul">
<li>Output: 0.19</li>
</ul></li>
<li>Market's Sharpe ratio: 0.153</li>
<li>Hence the Contra fund is out-performing market</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="outline-container-org0756b97" class="outline-4">
<h4 id="org0756b97"><span class="section-number-4">7.1.4.</span> Treynor Ratio</h4>
<div class="outline-text-4" id="text-7-1-4">
<ul class="org-ul">
<li>Similar to Sharpe, except the denominator is &beta;</li>
<li>\(\frac{(R-R^f)}{\beta}\)</li>
<li>Similarly, higher Treynor Ratio means higher reward per unit of risk</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="org91ec8a2"></a>In R<br />
<div class="outline-text-5" id="text-7-1-4-1">
<ul class="org-ul">
<li>Function is <code>TreynorRatio(All.dat$ContrRev, All.dat$Market.Return, All.dat$Risk.Free)</code>
<ul class="org-ul">
<li>Contra fund: 0.10</li>
<li>Market index: 0.07</li>
</ul></li>
<li>Contra fund has outperformed market</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="outline-container-org576951b" class="outline-4">
<h4 id="org576951b"><span class="section-number-4">7.1.5.</span> Jensen's alpha</h4>
<div class="outline-text-4" id="text-7-1-5">
<ul class="org-ul">
<li>Measures the abnormal return that portfolio earns after adjusting for &beta;</li>
<li>Estimate this regression:</li>
<li>\(r_{i,t} - r_f = \alpha_i + \beta_i(R_{m,t}-r_f) + \epsilon_{i,t}\)</li>
<li>Definitions:
<dl class="org-dl">
<dt>\(r_{i,t}\)</dt><dd>return on asset \(i\) at time \(t\)</dd>
<dt>\(r_f\)</dt><dd>risk-free rate</dd>
<dt>\(R_{m,t}\)</dt><dd>return on market index at time \(t\)</dd>
<dt>&alpha;<sub>i</sub></dt><dd>regression coefficient to be estimated</dd>
<dt>&beta;<sub>i</sub></dt><dd>regression coefficient to be estimated</dd>
</dl></li>
</ul>
</div>
<ol class="org-ol">
<li><a id="orge5ecd90"></a>Steps to calculate Jensen's alpha<br />
<div class="outline-text-5" id="text-7-1-5-1">
<ol class="org-ol">
<li>Calculate return in excess of risk-free rate, \(r_{i,t}-r_f\)</li>
<li>Calculate the return on market index in excess of risk-free rate, \(R_{m,t}-r_f\)</li>
<li>Run regression of \((r_{i,t}-rf)\) on \((R_{m,t}-r_f)\)</li>
<li>Focus on regression intercepts:
<ol class="org-ol">
<li>If positive and statistically significant, the fund has outperformed benchmark</li>
<li>Else, the fund has underperformed</li>
</ol></li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div id="outline-container-org90ec69c" class="outline-3">
<h3 id="org90ec69c"><span class="section-number-3">7.2.</span> M7L2: Transaction Costs</h3>
<div class="outline-text-3" id="text-7-2">
</div>
<div id="outline-container-org717d201" class="outline-4">
<h4 id="org717d201"><span class="section-number-4">7.2.1.</span> Impact of transaction costs on performance</h4>
<div class="outline-text-4" id="text-7-2-1">
<ul class="org-ul">
<li>Without costs:
<ul class="org-ul">
<li>acquire $1000 of shares, get 10% return, get $1100, net return 10%</li>
</ul></li>
<li>with transaction costs, 150bps, only $985 worth of shares bought
<ul class="org-ul">
<li>when sold, another 150bps paid, after 10% increase, only get $1067.25</li>
</ul></li>
<li>Transaction costs <b>always</b> lower returns</li>
</ul>
</div>
</div>
<div id="outline-container-org3ccfc6e" class="outline-4">
<h4 id="org3ccfc6e"><span class="section-number-4">7.2.2.</span> Over investing lifetime, transaction costs can have big impact</h4>
<div class="outline-text-4" id="text-7-2-2">
<ul class="org-ul">
<li>Low fee fund 0.1% per year</li>
<li>High fee fund 1% per year</li>
<li>Initial investment $100,000</li>
<li>Amount after 30 years:
<ul class="org-ul">
<li>Low fee fund: $1.74M</li>
<li>High fee fund: $1.33M</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgfe4bc87" class="outline-4">
<h4 id="orgfe4bc87"><span class="section-number-4">7.2.3.</span> Types / components of transaction costs</h4>
<div class="outline-text-4" id="text-7-2-3">
<dl class="org-dl">
<dt>Commission</dt><dd>fixed charge for executing trade</dd>
<dt>Bid-ask spread</dt><dd>price diff between immediate sale (offer/ask) and immediate buy (bid)</dd>
<dt>Delay</dt><dd>loss in investment decision between investment decision made and time trade executed</dd>
</dl>
</div>
</div>
<div id="outline-container-orge8af1aa" class="outline-4">
<h4 id="orge8af1aa"><span class="section-number-4">7.2.4.</span> Bid-ask spread illustration</h4>
<div class="outline-text-4" id="text-7-2-4">
<ul class="org-ul">
<li>Buying 1000 shares of XYZ
<ul class="org-ul">
<li>Best offer price: $25.42 (lowest price to buy)</li>
<li>Best bid price: $25.38 (highest price to sell)</li>
<li>Quote spread: $0.04, 16bps
<ul class="org-ul">
<li>difference between best bid and offer</li>
</ul></li>
<li>Larger orders pay higher transaction costs</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org5dcfd8a" class="outline-4">
<h4 id="org5dcfd8a"><span class="section-number-4">7.2.5.</span> Delay cost example</h4>
<div class="outline-text-4" id="text-7-2-5">
<ul class="org-ul">
<li>Fund manager wants to buy current stock at $50, for total $250K. By the time the order can be executed, price rose to $50.25</li>
<li>Delay cost: $0.25, 50bps</li>
</ul>
</div>
</div>
<div id="outline-container-org8963106" class="outline-4">
<h4 id="org8963106"><span class="section-number-4">7.2.6.</span> Size of trading cost</h4>
<div class="outline-text-4" id="text-7-2-6">
<dl class="org-dl">
<dt>bps</dt><dd>basis point</dd>
<dt>1 bps</dt><dd>0.01%</dd>
</dl>
</div>
</div>
<div id="outline-container-org4818aea" class="outline-4">
<h4 id="org4818aea"><span class="section-number-4">7.2.7.</span> Summary (no lecture quiz)</h4>
<div class="outline-text-4" id="text-7-2-7">
<ul class="org-ul">
<li>Transaction costs lower investment returns</li>
<li>Components:
<ol class="org-ol">
<li>commission</li>
<li>Bid-ask spread</li>
<li>Delay</li>
</ol></li>
<li>As investors, we care about returns net of transaction costs</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org9c0b85e" class="outline-3">
<h3 id="org9c0b85e"><span class="section-number-3">7.3.</span> M7L3: Market Efficiency</h3>
<div class="outline-text-3" id="text-7-3">
</div>
<div id="outline-container-org8ca3a6c" class="outline-4">
<h4 id="org8ca3a6c"><span class="section-number-4">7.3.1.</span> Stock price reflects information</h4>
<div class="outline-text-4" id="text-7-3-1">
<ul class="org-ul">
<li>If some stock pattern <b>guarantees</b> profit, what should you do?
<ul class="org-ul">
<li>Definitely exploit it</li>
<li>By borrowing as much money as possible to invest</li>
</ul></li>
<li>Process of exploiting it makes the opportunity vanish as:
<ul class="org-ul">
<li>stock price bids up when you buy it</li>
<li>stock price bids down when it's cold</li>
</ul></li>
<li>Pattern is eliminated by observing it</li>
</ul>
</div>
</div>
<div id="outline-container-orgaa4cb0f" class="outline-4">
<h4 id="orgaa4cb0f"><span class="section-number-4">7.3.2.</span> The Army of Investors</h4>
<div class="outline-text-4" id="text-7-3-2">
<ul class="org-ul">
<li>Other than individual investors, there is also an 'army' of intelligent and well-informed security analysts, traders, etc hunting for mispriced or following patters
<ul class="org-ul">
<li>Have computers, databases, analytical techniques, etc</li>
<li>Can assess and act on information very quickly</li>
<li>May police market so efficiently that they drive asset prices to fully reflect all available information quickly</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orga6c8d0a" class="outline-4">
<h4 id="orga6c8d0a"><span class="section-number-4">7.3.3.</span> Implications</h4>
<div class="outline-text-4" id="text-7-3-3">
<ul class="org-ul">
<li>Competition is fierce for finding mispriced securities</li>
<li>Competition always kills the sure-profit pattern
<ul class="org-ul">
<li>If there is one, it would be exploited by the first person</li>
<li>First person can make profit</li>
<li>First person not likely to be you</li>
</ul></li>
<li>Implies:
<ul class="org-ul">
<li>Stock prices should have reflected all available information</li>
<li>Stock returns can be unpredictable</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orga19ef27" class="outline-4">
<h4 id="orga19ef27"><span class="section-number-4">7.3.4.</span> Efficient markets</h4>
<div class="outline-text-4" id="text-7-3-4">
<dl class="org-dl">
<dt>Efficient capital market</dt><dd>one in which stock prices fully reflect available information</dd>
<dt>Weak form</dt><dd>security prices reflect all information found in past price and volume</dd>
<dt>Semi-strong</dt><dd>security prices reflect all publicly-available information</dd>
<dt>Strong</dt><dd>Security prices reflect all information, public and private</dd>
</dl>
</div>
</div>
<div id="outline-container-org1b0f553" class="outline-4">
<h4 id="org1b0f553"><span class="section-number-4">7.3.5.</span> Market efficiency: 'theory of sharks'</h4>
<div class="outline-text-4" id="text-7-3-5">
<ul class="org-ul">
<li>Instead of presenting market efficiency as one of a rational man,</li>
<li>It's a theory of intense competition:
<ul class="org-ul">
<li>In liquid markets, profit opportunities bring about infinite discrepancies between supply and demand</li>
<li>Well financed, knowledgeable arbitrageurs spot these opportunities, etc, and by their actions close the aberrant price diff</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orged0841a" class="outline-4">
<h4 id="orged0841a"><span class="section-number-4">7.3.6.</span> Evidence of market efficiency</h4>
<div class="outline-text-4" id="text-7-3-6">
<ul class="org-ul">
<li>If market is semi-strongly efficient, then no matter what publicly available information is used to pick stocks, they should have same average returns as those of average investor in the market</li>
<li>Can test efficiency by comparing performance of professionally managed mutual funds with performance of market index</li>
</ul>
</div>
</div>
<div id="outline-container-org7801df3" class="outline-4">
<h4 id="org7801df3"><span class="section-number-4">7.3.7.</span> Not easy to beat market</h4>
<div class="outline-text-4" id="text-7-3-7">
<ul class="org-ul">
<li>Very few active US equity funds outperform passive benchmarks</li>
<li>At long time horizons, most funds fail to outperform</li>
<li>Most evidence shows you can't predict the funds that will outperform</li>
</ul>
</div>
</div>
<div id="outline-container-org6232082" class="outline-4">
<h4 id="org6232082"><span class="section-number-4">7.3.8.</span> Summary (no lecture quiz)</h4>
<div class="outline-text-4" id="text-7-3-8">
<ul class="org-ul">
<li>Efficient markets result from intense competition</li>
<li>If markets are efficient, it should not be possible to consistently generate alpha or to outperform a passive benchmark</li>
<li>Performance of mutual funds suggest the markets is efficient</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgecd32a1" class="outline-3">
<h3 id="orgecd32a1"><span class="section-number-3">7.4.</span> M7L4: Behavioural Finance</h3>
<div class="outline-text-3" id="text-7-4">
</div>
<div id="outline-container-orgff34c0c" class="outline-4">
<h4 id="orgff34c0c"><span class="section-number-4">7.4.1.</span> Markets cannot be perfectly efficient</h4>
<div class="outline-text-4" id="text-7-4-1">
<ul class="org-ul">
<li>If they were, there would be no incentive to collect information</li>
<li>A lot of evidence on behavioural biases and failure of market efficiency</li>
<li>E.g. CUBA fund
<ul class="org-ul">
<li>69% are US stocks, others Mexican</li>
<li>No assets in Cuba</li>
<li>Upon lifting of assets on Cuba, the CUBA fund price increased by 70%</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgc19103a" class="outline-4">
<h4 id="orgc19103a"><span class="section-number-4">7.4.2.</span> Behavioural finance</h4>
<div class="outline-text-4" id="text-7-4-2">
<ul class="org-ul">
<li>Key ingredients
<ol class="org-ol">
<li>Investors are not fully rational. Deviation from rationality are correlated across investors
<ul class="org-ul">
<li>i.e., many investors make the same mistake</li>
</ul></li>
<li>Arbitrage forces are limited, by:
<ul class="org-ul">
<li>Limited capital</li>
<li>Investment constraints, e.g. unable to short</li>
<li>Noise trader risk. Arbitrageurs may have limited time horizons so mispricing can persist over long periods of time</li>
</ul></li>
</ol></li>
<li>If true:
<ul class="org-ul">
<li>Irrational behavior can push prices away from fundamental value</li>
<li>Arbitrage is limited and cannot completely eliminated mispricing</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org166cc5b" class="outline-4">
<h4 id="org166cc5b"><span class="section-number-4">7.4.3.</span> Investors have many behavioural biases</h4>
<div class="outline-text-4" id="text-7-4-3">
<dl class="org-dl">
<dt>Overconfidence</dt><dd>tendency to overestimate one's ability</dd>
<dt>Loss aversion</dt><dd>tendency of individuals to seek pride and avoid regret in their decisions</dd>
<dt>Recency</dt><dd>overemphasis of recent information when making investment decisions</dd>
<dt>Anchoring</dt><dd>Individuals tend to decide based on single fact or figure that should have little bearing on their decision, while ignoring more important information</dd>
</dl>
</div>
</div>
<div id="outline-container-orgba01775" class="outline-4">
<h4 id="orgba01775"><span class="section-number-4">7.4.4.</span> Summary (no lecture quiz)</h4>
<div class="outline-text-4" id="text-7-4-4">
<ul class="org-ul">
<li>Investors suffer from various biases</li>
<li>Coupled with market frictions, this may push prices away from fundamental value</li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-orgf956416" class="outline-2">
<h2 id="orgf956416"><span class="section-number-2">8.</span> Module 08: Factor-based Investing (Investing Analytics)</h2>
<div class="outline-text-2" id="text-8">
</div>
<div id="outline-container-orgd4d6934" class="outline-3">
<h3 id="orgd4d6934"><span class="section-number-3">8.1.</span> M8L1: Identifying factors</h3>
<div class="outline-text-3" id="text-8-1">
<p>
Which factors drive returns?
</p>
</div>
<div id="outline-container-orgbb6c1f7" class="outline-4">
<h4 id="orgbb6c1f7"><span class="section-number-4">8.1.1.</span> Size effect</h4>
<div class="outline-text-4" id="text-8-1-1">
<ul class="org-ul">
<li>Smaller firms have higher returns
<ul class="org-ul">
<li>By around 3% / year since 1927</li>
</ul></li>
<li>Size measured by market capitalization</li>
</ul>
</div>
</div>
<div id="outline-container-org384f70b" class="outline-4">
<h4 id="org384f70b"><span class="section-number-4">8.1.2.</span> Value effect</h4>
<div class="outline-text-4" id="text-8-1-2">
<ul class="org-ul">
<li>Inexpensive stocks have higher returns
<ul class="org-ul">
<li>Fama and French (1993)</li>
</ul></li>
<li>Measured by book value-market value ratio (B/M)
<ul class="org-ul">
<li>High B/M means stock is inexpensive</li>
<li>By around 4.67% / year</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org70d3915" class="outline-4">
<h4 id="org70d3915"><span class="section-number-4">8.1.3.</span> Momentum effect</h4>
<div class="outline-text-4" id="text-8-1-3">
<ul class="org-ul">
<li>Stocks that have performed well tend to continue performing well
<ul class="org-ul">
<li>Past winners outperform past losers</li>
<li>By around 9.23% / year</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgb5f09f4" class="outline-4">
<h4 id="orgb5f09f4"><span class="section-number-4">8.1.4.</span> Profitability effect (i.e., Quality)</h4>
<div class="outline-text-4" id="text-8-1-4">
<ul class="org-ul">
<li>Profitable stocks outperform unprofitable stocks
<ul class="org-ul">
<li>Fama and French (2015)</li>
<li>By around 3.2% a year</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgb2f308a" class="outline-4">
<h4 id="orgb2f308a"><span class="section-number-4">8.1.5.</span> Risk effect</h4>
<div class="outline-text-4" id="text-8-1-5">
<ul class="org-ul">
<li>Low beta assets outperform high beta assets
<ul class="org-ul">
<li>Betting against beta</li>
<li>Frazzini and Pedersen (2014)</li>
<li>By around 12.2% / year</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org597a9c2" class="outline-3">
<h3 id="org597a9c2"><span class="section-number-3">8.2.</span> M8L2: Interpreting factor regressions</h3>
<div class="outline-text-3" id="text-8-2">
<ul class="org-ul">
<li>Factors driving stock returns (recap):
<ol class="org-ol">
<li>Beta: r<sup>m</sup> - r<sup>t</sup></li>
<li>Size: SMB</li>
<li>Value: HML</li>
<li>Momentum: MOM</li>
<li>Quality: BAB</li>
<li>Risk: QMJ</li>
</ol></li>
</ul>
</div>
<div id="outline-container-org9493594" class="outline-4">
<h4 id="org9493594"><span class="section-number-4">8.2.1.</span> Factor regressions</h4>
<div class="outline-text-4" id="text-8-2-1">
<ul class="org-ul">
<li>Can estimate model factors using linear regression</li>
<li>Dependent (response) variable is fund's excess return above risk-free rate</li>
<li>Factors are independent variables</li>
<li>Typically:
\[
  r_t^{fund}-r^f_t = \alpha + \beta_1(r_t^m-r_t^f) + \beta_2 SMB_t + \beta_3 HML_t + \beta_4 MOM_t + \beta_5 BAB_t + \beta_6 QMJ_t + \epsilon_t
  \]</li>
</ul>
</div>
</div>
<div id="outline-container-org4dc1df2" class="outline-4">
<h4 id="org4dc1df2"><span class="section-number-4">8.2.2.</span> Interpreting factor regressions</h4>
<div class="outline-text-4" id="text-8-2-2">
<ul class="org-ul">
<li>Fund's coefficients tell us about exposure to different factors. A <b>positive</b> coefficient for this factor indicates
<dl class="org-dl">
<dt>SMB</dt><dd>tilt towards small cap stocks</dd>
<dt>HML</dt><dd>tilt towards value stocks</dd>
<dt>MOM</dt><dd>tilt towards high momentum stocks</dd>
<dt>QMJ</dt><dd>tilt towards profitable stocks</dd>
<dt>BAB</dt><dd>tilt towards safe stocks</dd>
</dl></li>
<li>Intercept represents &alpha;
<ul class="org-ul">
<li>Indicates skill of fund manager</li>
<li>Positive and significant: fund manager has outperformed</li>
<li>True &alpha; indicated after adjusting for all factors e.g. beta, size, value&#x2026;</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org94fd4bc" class="outline-4">
<h4 id="org94fd4bc"><span class="section-number-4">8.2.3.</span> Takeaways from factor regression</h4>
<div class="outline-text-4" id="text-8-2-3">
<ul class="org-ul">
<li>Allows us to uncover reasons for fund's out-performance</li>
<li>It's becoming popular</li>
<li>But:
<ul class="org-ul">
<li>Performance may dissipate due to popularity</li>
<li>Each factor has experienced prolonged periods of underperformance as well
<ul class="org-ul">
<li>Patience is required for some of these factors</li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org457496c" class="outline-4">
<h4 id="org457496c"><span class="section-number-4">8.2.4.</span> Summary</h4>
<div class="outline-text-4" id="text-8-2-4">
<ul class="org-ul">
<li>Factor regressions help us understand the drivers of a fund's return</li>
<li>Intercept from regression indicates skill of fund manager</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org7fb43ce" class="outline-3">
<h3 id="org7fb43ce"><span class="section-number-3">8.3.</span> M8L3: Concluding</h3>
<div class="outline-text-3" id="text-8-3">
<ul class="org-ul">
<li>3 core concepts covered
<ol class="org-ol">
<li>Quantifying prices in financial markets</li>
<li>Identifying superior performance in financial markets</li>
<li>Describing driving forces of returns in stock markets</li>
</ol></li>
</ul>
</div>
<div id="outline-container-org7edff2e" class="outline-4">
<h4 id="org7edff2e"><span class="section-number-4">8.3.1.</span> Topic 1 recap</h4>
<div class="outline-text-4" id="text-8-3-1">
<ul class="org-ul">
<li>Ways to think about stock and fund prices:
<ul class="org-ul">
<li>Simple and compound returns</li>
<li>Standard deviation</li>
<li>Beta</li>
<li>R<sup>2</sup></li>
<li>Drawdown</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgf01c561" class="outline-4">
<h4 id="orgf01c561"><span class="section-number-4">8.3.2.</span> Topic 2 recap</h4>
<div class="outline-text-4" id="text-8-3-2">
<ul class="org-ul">
<li>Measuring performance via:
<ul class="org-ul">
<li>Comparing to benchmark</li>
<li>Sharpe ratio</li>
<li>Treynor ratio</li>
<li>Jensen's alpha</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org95213fe" class="outline-4">
<h4 id="org95213fe"><span class="section-number-4">8.3.3.</span> Topic 3 recap</h4>
<div class="outline-text-4" id="text-8-3-3">
<ul class="org-ul">
<li>Drivers of returns:
<ul class="org-ul">
<li>Size</li>
<li>Value</li>
<li>Momentum</li>
<li>Profitability</li>
<li>Volatility</li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: W</p>
<p class="date">Created: 2023-03-05 Sun 20:27</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
