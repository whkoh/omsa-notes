<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2023-02-04 Sat 23:39 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>MGT 6203: Data Analytics in Business</title>
<meta name="author" content="W" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="../src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../src/readtheorg_theme/css/readtheorg.css"/>
<script type="text/javascript" src="../src/lib/js/jquery.min.js"></script>
<script type="text/javascript" src="../src/lib/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="../src/readtheorg_theme/js/readtheorg.js"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">MGT 6203: Data Analytics in Business</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgbb32063">1. Module 01: Linear Regression</a>
<ul>
<li><a href="#orgd070998">1.1. Steps in Regression Analysis</a>
<ul>
<li><a href="#org1746f79">1.1.1. Business examples (Dependent vs independent variables)</a></li>
<li><a href="#org376644c">1.1.2. M1L1 lecture quiz</a></li>
</ul>
</li>
<li><a href="#org791a8ee">1.2. Real estate pricing example</a>
<ul>
<li><a href="#orgfa4e907">1.2.1. Housing dataset <code>ecdat</code></a></li>
<li><a href="#org718f90b">1.2.2. M1L2 lecture quiz</a></li>
</ul>
</li>
<li><a href="#org288c459">1.3. Notation in regression analysis</a>
<ul>
<li><a href="#orgff35233">1.3.1. Steps with example</a></li>
<li><a href="#org50fa06f">1.3.2. M1L3 lecture quiz</a></li>
</ul>
</li>
<li><a href="#orgb60d8b8">1.4. \(R^2\) and Adjusted \(R^2\)</a>
<ul>
<li><a href="#org8d31a18">1.4.1. Deviations</a></li>
<li><a href="#org8fdb5ec">1.4.2. Regression output \(R^2\) and Adjusted \(R^2\)</a></li>
<li><a href="#org24a3e9c">1.4.3. Examples</a></li>
<li><a href="#org4aafc42">1.4.4. M1L4 lecture quiz</a></li>
</ul>
</li>
<li><a href="#org194a4b1">1.5. Simple regression with 1 variable in R</a>
<ul>
<li><a href="#org6758fcb">1.5.1. Interpreting coefficients</a></li>
<li><a href="#orgb182ee1">1.5.2. F-test: shows whether model is significant</a></li>
<li><a href="#orgfbfaa21">1.5.3. M1L5 no lecture quiz</a></li>
</ul>
</li>
<li><a href="#org71f738f">1.6. Multiple regression</a>
<ul>
<li><a href="#org92c3086">1.6.1. Regression output</a></li>
<li><a href="#orge8d86cd">1.6.2. M1L6 no lecture quiz</a></li>
</ul>
</li>
<li><a href="#org8a25189">1.7. \(R^2\) and adjusted \(R^2\) in multiple regression</a></li>
<li><a href="#org68bc4ad">1.8. Simple vs multiple regression</a></li>
<li><a href="#orgf72fed4">1.9. M1L7 lecture quiz</a></li>
<li><a href="#orga548147">1.10. M1L8 Common problems and fixes in fixing regression (I)</a>
<ul>
<li><a href="#orge9fea5f">1.10.1. Assumptions of linear regression</a></li>
<li><a href="#orgb2e3ef1">1.10.2. Common problems in fitting Linear Regression</a></li>
<li><a href="#org3eb405b">1.10.3. (1) Non linear relationship</a></li>
<li><a href="#orgc010aeb">1.10.4. (2) Correlation of error terms</a></li>
<li><a href="#orgd9b5c65">1.10.5. (3) Heteroskedasticity (non-constant error variance)</a></li>
<li><a href="#org3be041c">1.10.6. M1L8 lecture quiz</a></li>
</ul>
</li>
<li><a href="#org7fe7d14">1.11. M1L9 Common problems and fixes in fixing regression (II)</a>
<ul>
<li><a href="#org41c843b">1.11.1. (4) Outliers</a></li>
<li><a href="#orge0ce749">1.11.2. (5) High leverage points</a></li>
<li><a href="#org9defd06">1.11.3. Plots in R</a></li>
<li><a href="#orgde04018">1.11.4. (6) Multicollinearity</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org7ee2b9b">2. Module 02: Indicator variables and Interaction Terms</a>
<ul>
<li><a href="#orgfe88b4b">2.1. M2L1: Intro (Customer Analytics Dataset)</a>
<ul>
<li><a href="#org9431f42">2.1.1. No lecture quiz</a></li>
</ul>
</li>
<li><a href="#orgfe0041e">2.2. M2L2: Creating and Using Indicator Variables</a>
<ul>
<li><a href="#orgefd15af">2.2.1. M2L2 lecture quiz</a></li>
</ul>
</li>
<li><a href="#org4653098">2.3. M2L3: Interpreting the coefficients of indicator variables</a>
<ul>
<li><a href="#org793de4f">2.3.1. DR1: regression with dummy variable</a></li>
<li><a href="#org0b57472">2.3.2. DR2: regression with salary and dummy variables</a></li>
<li><a href="#orga793754">2.3.3. M2L3 lecture quiz</a></li>
</ul>
</li>
<li><a href="#org22c1824">2.4. M2L4: Interaction term and interpreting its coefficient</a>
<ul>
<li><a href="#orge96f366">2.4.1. Interaction term</a></li>
<li><a href="#org06fda61">2.4.2. M2L4 lecture quiz</a></li>
<li><a href="#org93493d1">2.4.3. Categorical variable with \(\text{M}\) values</a></li>
</ul>
</li>
<li><a href="#org2aec8bd">2.5. M2L5: Another example of using indicator variables</a>
<ul>
<li><a href="#org77ad944">2.5.1. Airbnb Los Angeles dataset</a></li>
<li><a href="#org41ecd1b">2.5.2. 2DR1: How does room price vary by capacity?</a></li>
<li><a href="#org09f4188">2.5.3. 2DR2: 2nd regression with capacity and dummies</a></li>
<li><a href="#orge86cd3e">2.5.4. Interaction terms</a></li>
<li><a href="#orgbf3a730">2.5.5. No lecture quiz</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org8dd56fa">3. Module 03: Non-linear transformation models</a>
<ul>
<li><a href="#orgbd85651">3.1. M3L1: Intro (and why needed)</a></li>
<li><a href="#org393829a">3.2. Summary of models</a></li>
<li><a href="#orgb8c6ec9">3.3. M3L2: Linear-Log model</a>
<ul>
<li><a href="#org5260d74">3.3.1. Interpretation of coefficients</a></li>
<li><a href="#orgec2b07c">3.3.2. No lecture quiz</a></li>
</ul>
</li>
<li><a href="#orgcddbd29">3.4. M3L3: Log-Linear model</a>
<ul>
<li><a href="#orgf879a0e">3.4.1. Interpretation of coefficients</a></li>
<li><a href="#org759a09b">3.4.2. Derivation</a></li>
<li><a href="#org54903d5">3.4.3. No lecture quiz</a></li>
</ul>
</li>
<li><a href="#org1ce412c">3.5. M3L4: Log-Log model</a></li>
<li><a href="#org7dd046e">3.6. M3L5: Polynomial model</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-orgbb32063" class="outline-2">
<h2 id="orgbb32063"><span class="section-number-2">1.</span> Module 01: Linear Regression</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-orgd070998" class="outline-3">
<h3 id="orgd070998"><span class="section-number-3">1.1.</span> Steps in Regression Analysis</h3>
<div class="outline-text-3" id="text-1-1">
<ol class="org-ol">
<li>State problem</li>
<li>Use regression for:
<ul class="org-ul">
<li>Diagnostic, or</li>
<li>Predictive, or</li>
<li>Prescriptive analytics?</li>
</ul></li>
<li>Select relevant response and explanatory variables</li>
<li>Collect data
<ul class="org-ul">
<li>Internal</li>
<li>External</li>
<li>Purchased</li>
<li>Experiment</li>
</ul></li>
<li>Choose fitting method
<ul class="org-ul">
<li>Ordinary least squares (OLS)</li>
<li>Generalized least squares</li>
<li>Maximum likelihood</li>
</ul></li>
<li>Fit model</li>
<li>Validate model with diagnostics</li>
<li>Refine and iterate from step 3</li>
<li>Use model</li>
</ol>
</div>
<div id="outline-container-org1746f79" class="outline-4">
<h4 id="org1746f79"><span class="section-number-4">1.1.1.</span> Business examples (Dependent vs independent variables)</h4>
<div class="outline-text-4" id="text-1-1-1">
<dl class="org-dl">
<dt>Used car price</dt><dd>odometer reading, age of car, condition</dd>
<dt>Sales</dt><dd>ad spend</dd>
<dt>Time taken to repair product</dt><dd>experience of technician</dd>
<dt>Product added to shopping card</dt><dd>ratings/price</dd>
<dt>Starting salary of new employee</dt><dd>work and education experience</dd>
<dt>Sale price of house</dt><dd>square feet, bedrooms, location</dd>
<dt>Customer default?</dt><dd>Credit score, income, age</dd>
<dt>Customer churn?</dt><dd>Length of contract, age of customer</dd>
</dl>
</div>
</div>
<div id="outline-container-org376644c" class="outline-4">
<h4 id="org376644c"><span class="section-number-4">1.1.2.</span> M1L1 lecture quiz</h4>
<div class="outline-text-4" id="text-1-1-2">
<ol class="org-ol">
<li>Variable eg price <b>can</b> be either dependent or independent variable, depends on purpose of model</li>
<li>Binary value variable <b>can</b> be dependent variable, eg logistic regression</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org791a8ee" class="outline-3">
<h3 id="org791a8ee"><span class="section-number-3">1.2.</span> Real estate pricing example</h3>
<div class="outline-text-3" id="text-1-2">
<ol class="org-ol">
<li>Example: sell house, predict listing price.</li>
<li>Can ask realtors, but is there a more analytical approach?
<ul class="org-ul">
<li>They normally use "comparables" to suggest a listing price</li>
</ul></li>
<li>If actual data with price, size, bedroom and bathroom number, etc, are available, regression can be used to help get a better price estimate</li>
</ol>
</div>
<div id="outline-container-orgfa4e907" class="outline-4">
<h4 id="orgfa4e907"><span class="section-number-4">1.2.1.</span> Housing dataset <code>ecdat</code></h4>
<div class="outline-text-4" id="text-1-2-1">
<ul class="org-ul">
<li>Can be used for this problem</li>
<li>Data from Canadian city Windsor from 1987</li>
<li>Or, collect or scrape prices from the web</li>
<li>Do EDA, e.g.:
<ul class="org-ul">
<li>histogram</li>
<li>correlation matrix</li>
<li>scatter plot with linear regression line</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org718f90b" class="outline-4">
<h4 id="org718f90b"><span class="section-number-4">1.2.2.</span> M1L2 lecture quiz</h4>
<div class="outline-text-4" id="text-1-2-2">
<ol class="org-ol">
<li>For right-skewed distribution, mean is <b>larger</b> than median</li>
<li>Correlation coefficient only captures <b>linear</b> relationships</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org288c459" class="outline-3">
<h3 id="org288c459"><span class="section-number-3">1.3.</span> Notation in regression analysis</h3>
<div class="outline-text-3" id="text-1-3">
<dl class="org-dl">
<dt>Explanatory</dt><dd>independent variables</dd>
<dt>Response</dt><dd>dependent variables</dd>
<dt>\(i = 1, 2, ..., n\)</dt><dd>\(i\) th observation or record in dataset, typically a sample</dd>
<dt>\(\{x_{11}, ..., x_{p1}\}, \{...\}, \{x_{1n}, ..., x_{pn}\}\)</dt><dd>\(n\) observations of \(p\) explanatory variables</dd>
<dt>\(y_1, ..., y_n\)</dt><dd>\(n\) observations of the dependent variable</dd>
<dt>\(\bar{y}\)</dt><dd>mean value of dependent variable, \(y\)</dd>
<dt>\(\bar{x}_k\)</dt><dd>mean value of \(x_k\) th explanatory variable</dd>
<dt>\(\beta_0, ..., \beta_p\)</dt><dd>parameters of regression line for population</dd>
<dt>\(b_0, ..., b_p\)</dt><dd>estimates of \(\beta\) parameters obtained by fitting the <b>sample</b> data</dd>
<dt>\(\epsilon_i\)</dt><dd>error term for \(i\) th observation in population</dd>
<dt>\(e_i\)</dt><dd>error term for \(i\) th observation int he sample</dd>
<dt>\(\widehat{y}_i\)</dt><dd>estimated value of \(y\) for the \(i\) th observation in sample. Obtain by evaluating regression function at \(x_i\)</dd>
</dl>
</div>
<div id="outline-container-orgff35233" class="outline-4">
<h4 id="orgff35233"><span class="section-number-4">1.3.1.</span> Steps with example</h4>
<div class="outline-text-4" id="text-1-3-1">
<ol class="org-ol">
<li>Observe data in <code>ecdat</code>, which is a sample</li>
<li>Build model for population (valid relation)
\[
   Y_i = \beta_0 + \beta_1 X_i + \epsilon_i
   \]</li>
<li>\(\epsilon_i\) are independently and identically distributed (iid) random variables, normally distributed with mean 0 and s.d. \(\sigma\)</li>
<li>We don't know \(\beta_0\), \(\beta_1\), \(\sigma\) so need to estimate with <b>sample</b> data</li>
<li>Using sample, we build model:
\[
   Y_i = b_0 + b_1 X_i + e_i
   \]</li>
<li>Population model is <b>homoskedastic</b> i.e., has constant \(\sigma\), and has mean 0.</li>
<li>Split data into say 100 samples and model these. Of 100, 95 will have the <b>population</b> slope.</li>
</ol>
</div>
<ol class="org-ol">
<li><a id="org59c2ac1"></a>Use OLS to fit the line<br />
<div class="outline-text-5" id="text-1-3-1-1">
<p>
Interpretation:
</p>
<ol class="org-ol">
<li>Find mean \(\bar{y}\)</li>
<li>Regression line: \(\widehat{y} = b_0 + b_1 x\)</li>
<li>Intercept at \(x=0\), \(y=b_0\)</li>
<li>For any point \(x_i\):
<ul class="org-ul">
<li>Predicted value is \(\widehat{y}_i\).</li>
<li>Actual value is \(y_i\).</li>
<li>Need to minimize total deviation as defined by sum of squared error.</li>
<li>Total deviation is against \(\bar{y}\):
<ul class="org-ul">
<li>Explained deviation is \(\widehat{y} - \bar{y}\)</li>
<li>Total deviation is \(y_i - \bar{y}\)</li>
<li><b>Residual (error term) is unexplained deviation</b>, i.e. \(y_i - \widehat{y}_i\)</li>
</ul></li>
</ul></li>
</ol>
</div>
</li>
</ol>
</div>
<div id="outline-container-org50fa06f" class="outline-4">
<h4 id="org50fa06f"><span class="section-number-4">1.3.2.</span> M1L3 lecture quiz</h4>
<div class="outline-text-4" id="text-1-3-2">
<ol class="org-ol">
<li>The total deviation at \((x_i, y_i)\) is \(y_i - \bar{y}\): true</li>
<li>In OLS, the intercepts of slope and intercept do depend on the sample being used.</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-orgb60d8b8" class="outline-3">
<h3 id="orgb60d8b8"><span class="section-number-3">1.4.</span> \(R^2\) and Adjusted \(R^2\)</h3>
<div class="outline-text-3" id="text-1-4">
</div>
<div id="outline-container-org8d31a18" class="outline-4">
<h4 id="org8d31a18"><span class="section-number-4">1.4.1.</span> Deviations</h4>
<div class="outline-text-4" id="text-1-4-1">
<dl class="org-dl">
<dt>Sum of deviations</dt><dd>SST = SSE + SSR</dd>
<dt>SST</dt><dd>Total sum of squares = \(\sum_{i}(y_i-\bar{y})^2\)</dd>
<dt>SSE</dt><dd>Sum of squared errors = \(\sum_{i}(y_i-\widehat{y}_i)^2\)</dd>
<dt>SSR</dt><dd>Sum of squares regression = \(\sum_{i}(\bar{y} - \widehat{y}_i)^2\)</dd>
</dl>
</div>
</div>
<div id="outline-container-org8fdb5ec" class="outline-4">
<h4 id="org8fdb5ec"><span class="section-number-4">1.4.2.</span> Regression output \(R^2\) and Adjusted \(R^2\)</h4>
<div class="outline-text-4" id="text-1-4-2">
<dl class="org-dl">
<dt>\(R^2\)</dt><dd>coefficient of determination. Measures strength of relationship between dependent and independent variables.
<ul class="org-ul">
<li>\(R^2\) never decreases as you add variables</li>
<li>\(R^2\) = 1-(SSE/SST) = SSR/SST = <b>explained deviation/total deviation</b></li>
<li>\(R^2\) shows how much of variation in \(Y\) (vs. mean) has been explained by the model.</li>
</ul></dd>
<dt>Adjusted \(R^2\)</dt><dd>accounts for the fact that adding variables increases predictiveness
<ul class="org-ul">
<li>Adjusted \(R^2\) adds a penalty for the number of independent variables \(p\)</li>
<li>Adjusted \(R^2\) = \(1-\frac{SSE/(n-p-1)}{SST/(n-1)}\)</li>
</ul></dd>
</dl>
</div>
</div>
<div id="outline-container-org24a3e9c" class="outline-4">
<h4 id="org24a3e9c"><span class="section-number-4">1.4.3.</span> Examples</h4>
<div class="outline-text-4" id="text-1-4-3">
<dl class="org-dl">
<dt>When \(R^2\) = 1</dt><dd>X accounts for all variation in Y. SSE = 0</dd>
<dt>When \(R^2\) = 0</dt><dd>X accounts for none of variation in Y. SSE = 1</dd>
<dt>When \(R^2\) = 0.75</dt><dd>X accounts for most of the variation. SSE = 0.25</dd>
</dl>
</div>
</div>
<div id="outline-container-org4aafc42" class="outline-4">
<h4 id="org4aafc42"><span class="section-number-4">1.4.4.</span> M1L4 lecture quiz</h4>
<div class="outline-text-4" id="text-1-4-4">
<ol class="org-ol">
<li>When \(R^2\) = 0, X values account for none of the variation in Y.</li>
<li>\(R^2\) can take values in \((0,1)\)</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org194a4b1" class="outline-3">
<h3 id="org194a4b1"><span class="section-number-3">1.5.</span> Simple regression with 1 variable in R</h3>
<div class="outline-text-3" id="text-1-5">
<ul class="org-ul">
<li>Using <code>lm</code> in R to fit simple linear regression</li>
<li>Residuals are shown first. Residuals are the unexplained deviation/error, i.e. \(y_i-\widehat{y}_i\).</li>
<li>Output of running regression models in R:
<ol class="org-ol">
<li>Null and alternative hypotheses</li>
<li>Coefficients:
<ul class="org-ul">
<li><code>Estimate</code> shows the value</li>
<li><code>Std. Error</code> shows the standard deviation</li>
<li><code>t value</code> = coefficient / standard error</li>
<li>To reject null hypothesis, <code>Pr(&gt;|t|)</code> i.e. p-value must be very small</li>
</ul></li>
<li>p-value: the probability of finding a t-value of this size if the null hypothesis is <b>true</b>.</li>
<li>F-statistic: the probability that \(b_1 = 0\).</li>
</ol></li>
</ul>
</div>
<div id="outline-container-org6758fcb" class="outline-4">
<h4 id="org6758fcb"><span class="section-number-4">1.5.1.</span> Interpreting coefficients</h4>
<div class="outline-text-4" id="text-1-5-1">
<p>
<code>(Intercept) Estimate: 3.414e+04</code>
<code>lotsize Estimate: 6.599e+00</code>
</p>
<dl class="org-dl">
<dt>\(b_0\) = 34,140</dt><dd>Intercept of regression line on y. When lotsize is 0. Less useful</dd>
<dt>\(b_1\) = 6.599</dt><dd>Increase of 1,000 sqft associated with increase of 6,599 of house keeping all else constant, <i>ceteris paribus</i>.</dd>
</dl>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Df</th>
<th scope="col" class="org-right">Sum Sq</th>
<th scope="col" class="org-left"><b>Error term</b></th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">lotsize</td>
<td class="org-right">1</td>
<td class="org-right">1.1156e+11</td>
<td class="org-left">SSR</td>
</tr>

<tr>
<td class="org-left">Residuals</td>
<td class="org-right">544</td>
<td class="org-right">2.7704e+11</td>
<td class="org-left">SSE</td>
</tr>
</tbody>
</table>
<ul class="org-ul">
<li>Regression output \(R^2\) and Adjusted \(R^2\). <b>Need to know how to calculate and interpret.</b></li>
<li>For simple regression, \(\sqrt{R^2}\) is the correlation coefficient between price and lotsize.</li>
</ul>
</div>
</div>
<div id="outline-container-orgb182ee1" class="outline-4">
<h4 id="orgb182ee1"><span class="section-number-4">1.5.2.</span> F-test: shows whether model is significant</h4>
<div class="outline-text-4" id="text-1-5-2">
<ul class="org-ul">
<li>i.e., reject \(H_0\)</li>
<li>Result is the F statistic</li>
<li>Can range from (0, \(\infty\))</li>
</ul>
</div>
</div>
<div id="outline-container-orgfbfaa21" class="outline-4">
<h4 id="orgfbfaa21"><span class="section-number-4">1.5.3.</span> M1L5 no lecture quiz</h4>
</div>
</div>
<div id="outline-container-org71f738f" class="outline-3">
<h3 id="org71f738f"><span class="section-number-3">1.6.</span> Multiple regression</h3>
<div class="outline-text-3" id="text-1-6">
<ol class="org-ol">
<li>Linear regression with multiple (\(p\)) explanatory variables</li>
<li>Terms:
<dl class="org-dl">
<dt>Regression coefficients</dt><dd>\(b_0, ..., b_p\) estimate \(\beta_0, ..., \beta_{p}\)</dd>
<dt>Prediction for Y at \(x_i\)</dt><dd>\(\widehat{y} = b_0 + b_1 x_{1i} + b_2 x_{2i} + ... + b_p x_{pi}\)</dd>
<dt>Residual</dt><dd>\(e_i = y_i - \widehat{y}_i\)</dd>
<dt>SSE</dt><dd>\(\sum_{i} (y_i - (b_0 + b_1 x_{1i} + b_2 x_{2i} + ... + b_p x_{pi}))^2\)</dd>
</dl></li>
<li>Goal is to choose \(b\) terms to minimize SSE</li>
<li>Add a variable, bedrooms. Question: does number of bedrooms explain the price?</li>
<li>Do EDA with plots/histogram</li>
</ol>
</div>
<div id="outline-container-org92c3086" class="outline-4">
<h4 id="org92c3086"><span class="section-number-4">1.6.1.</span> Regression output</h4>
<div class="outline-text-4" id="text-1-6-1">
<p>
b terms are estimates of true parameters \(\beta\) terms
\(H_0\) the parameters are \(0\), \(H_1\) they are not \(0\).
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Estimate</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">(Intercept)</td>
<td class="org-right">5.613e+03</td>
</tr>

<tr>
<td class="org-left">lotsize</td>
<td class="org-right">6.053e+00</td>
</tr>

<tr>
<td class="org-left">Bedrooms</td>
<td class="org-right">1.057e+04</td>
</tr>
</tbody>
</table>
<p>
all <i>ceteris paribus</i>:
</p>
<dl class="org-dl">
<dt>\(b_0\) = 5,613</dt><dd>intercept on y axis</dd>
<dt>\(b_1\) = 6.053</dt><dd>increase per square feet is $6.053</dd>
<dt>\(b_2\) = 10,570</dt><dd>increase per bedroom is $10,570</dd>
</dl>
</div>
</div>
<div id="outline-container-orge8d86cd" class="outline-4">
<h4 id="orge8d86cd"><span class="section-number-4">1.6.2.</span> M1L6 no lecture quiz</h4>
</div>
</div>
<div id="outline-container-org8a25189" class="outline-3">
<h3 id="org8a25189"><span class="section-number-3">1.7.</span> \(R^2\) and adjusted \(R^2\) in multiple regression</h3>
<div class="outline-text-3" id="text-1-7">
<p>
Anova table:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Df</th>
<th scope="col" class="org-right">Sum Sq</th>
<th scope="col" class="org-left"><b>Error term</b></th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">lotsize</td>
<td class="org-right">1</td>
<td class="org-right">1.1156e+11</td>
<td class="org-left">\(SSR_1\)</td>
</tr>

<tr>
<td class="org-left">bedrooms</td>
<td class="org-right">1</td>
<td class="org-right">3.23239e+10</td>
<td class="org-left">\(SSR_2\)</td>
</tr>

<tr>
<td class="org-left">Residuals</td>
<td class="org-right">543</td>
<td class="org-right">2.4472e+11</td>
<td class="org-left">SSE</td>
</tr>
</tbody>
</table>
<ul class="org-ul">
<li>\(\text{SSR}_1 + \text{SSR}_2\) = SSR</li>
<li>SSR + SSE = SST</li>
<li>Rejecting null hypothesis by analysing the F statistic means the model is significant.</li>
</ul>
</div>
</div>
<div id="outline-container-org68bc4ad" class="outline-3">
<h3 id="org68bc4ad"><span class="section-number-3">1.8.</span> Simple vs multiple regression</h3>
<div class="outline-text-3" id="text-1-8">
<ul class="org-ul">
<li>\(R^2\) will not decrease when adding variables</li>
<li>Higher adjusted \(R^2\) in multiple regression</li>
<li>Comparing 2 models with different number of variables:
\[
  F = \frac{(R^2_2 - R^2_1)/(p_2-p_1)}{(1-R^2_2)/(n-p_2-1)}
  \]</li>
</ul>
</div>
</div>
<div id="outline-container-orgf72fed4" class="outline-3">
<h3 id="orgf72fed4"><span class="section-number-3">1.9.</span> M1L7 lecture quiz</h3>
<div class="outline-text-3" id="text-1-9">
<ol class="org-ol">
<li>In general adding more variable <b>does not decrease</b> overall \(R^2\) value of multiple regression.</li>
<li><b>Small</b> p-value means that <b>there is evidence</b> that coefficient is <b>not</b> 0.</li>
</ol>
</div>
</div>
<div id="outline-container-orga548147" class="outline-3">
<h3 id="orga548147"><span class="section-number-3">1.10.</span> M1L8 Common problems and fixes in fixing regression (I)</h3>
<div class="outline-text-3" id="text-1-10">
</div>
<div id="outline-container-orge9fea5f" class="outline-4">
<h4 id="orge9fea5f"><span class="section-number-4">1.10.1.</span> Assumptions of linear regression</h4>
<div class="outline-text-4" id="text-1-10-1">
<dl class="org-dl">
<dt>Linearity</dt><dd>i.e. \(E(y) = b_0 + b_1 x\), i.e. the expected value of Y at each X is approximately a straight line</dd>
<dt>Assumptions about error terms</dt><dd>(a) The error terms are independent, and identically distributed (<b>iid</b>). (b) Each error term has mean 0 and constant variance &sigma;<sup>2</sup>, i.e. <b>homoscedastic</b></dd>
<dt>Assumptions about predictors</dt><dd>In multiple recession, the predictor variables are linearly independent of each other</dd>
</dl>
</div>
</div>
<div id="outline-container-orgb2e3ef1" class="outline-4">
<h4 id="orgb2e3ef1"><span class="section-number-4">1.10.2.</span> Common problems in fitting Linear Regression</h4>
<div class="outline-text-4" id="text-1-10-2">
<ol class="org-ol">
<li>Response/predictor relationship is non-linear</li>
<li>Error terms are correlated</li>
<li>Error terms have non-constant variance</li>
<li>Outliers</li>
<li>High leverage points</li>
<li>Collinearity</li>
</ol>
</div>
</div>
<div id="outline-container-org3eb405b" class="outline-4">
<h4 id="org3eb405b"><span class="section-number-4">1.10.3.</span> (1) Non linear relationship</h4>
<div class="outline-text-4" id="text-1-10-3">
</div>
<ol class="org-ol">
<li><a id="org6275b1d"></a>Checks<br />
<div class="outline-text-5" id="text-1-10-3-1">
<ol class="org-ol">
<li>Check scatter plots of Y vs X, before fitting model</li>
<li>Check residuals vs fitted values (no pattern = good)</li>
</ol>
</div>
</li>
<li><a id="orgbf754dc"></a>Workarounds<br />
<div class="outline-text-5" id="text-1-10-3-2">
<ol class="org-ol">
<li>Model non-linear relationship with higher order terms e.g. x<sup>2</sup></li>
<li>Use variance reducing transformations, e.g. log, to get better linear fit</li>
<li>Remove outliers or some parts of the observations driving non-linearity</li>
<li>Check for omitted variables</li>
<li>Check for systematic bias when collecting data</li>
<li><b>Check residuals!</b></li>
</ol>
</div>
</li>
</ol>
</div>
<div id="outline-container-orgc010aeb" class="outline-4">
<h4 id="orgc010aeb"><span class="section-number-4">1.10.4.</span> (2) Correlation of error terms</h4>
<div class="outline-text-4" id="text-1-10-4">
<ul class="org-ul">
<li>There is autocorrelation if error terms are correlated</li>
<li>Knowing error term e<sub>i</sub> should not have influence on size of e<sub>i+1</sub></li>
<li>This assumption is used to estimate standard errors of the model parameters</li>
<li>If autocorrelation exists:
<ul class="org-ul">
<li>Estimated standard errors &lt; true standard errors</li>
<li>Confidence intervals appear narrower than actual</li>
<li>P-values appear lower than actual</li>
<li>False sense of confidence</li>
</ul></li>
</ul>
</div>
<ol class="org-ol">
<li><a id="org76884c7"></a>Checks<br />
<div class="outline-text-5" id="text-1-10-4-1">
<p>
With the Durbin-Watson test
</p>
</div>
</li>
</ol>
</div>
<div id="outline-container-orgd9b5c65" class="outline-4">
<h4 id="orgd9b5c65"><span class="section-number-4">1.10.5.</span> (3) Heteroskedasticity (non-constant error variance)</h4>
<div class="outline-text-4" id="text-1-10-5">
<ul class="org-ul">
<li>Model assumes: spread of responses around the straight line is the same at all \(x\)</li>
<li>Violated if there is non-constant error present, e.g. if errors increase with fitted values</li>
<li>If heteroskedastic:
<ul class="org-ul">
<li>Hypothesis test and confidence intervals misleading</li>
</ul></li>
</ul>
</div>
<ol class="org-ol">
<li><a id="org9799bf5"></a>Checks<br />
<div class="outline-text-5" id="text-1-10-5-1">
<ol class="org-ol">
<li>Residuals vs fitted values plot
<img src="./img/01-residuals-hskd.png" alt="01-residuals-hskd.png" /></li>
</ol>
</div>
</li>
<li><a id="org084c89a"></a>Workarounds<br />
<div class="outline-text-5" id="text-1-10-5-2">
<ol class="org-ol">
<li>Transform the Y variable, e.g. \(ln(Y)\), \(\frac{1}{Y}\), etc.</li>
</ol>
</div>
</li>
</ol>
</div>
<div id="outline-container-org3be041c" class="outline-4">
<h4 id="org3be041c"><span class="section-number-4">1.10.6.</span> M1L8 lecture quiz</h4>
<div class="outline-text-4" id="text-1-10-6">
<ol class="org-ol">
<li>Scatter plot of Y vs X shows non-linear pattern -&gt; SHOULD change linear regression model</li>
<li>Autocorrelation is the correlation between each of the e<sub>i</sub> variables -&gt; True</li>
<li>Heteroskedasticity = constant error variance -&gt; FALSE</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org7fe7d14" class="outline-3">
<h3 id="org7fe7d14"><span class="section-number-3">1.11.</span> M1L9 Common problems and fixes in fixing regression (II)</h3>
<div class="outline-text-3" id="text-1-11">
</div>
<div id="outline-container-org41c843b" class="outline-4">
<h4 id="org41c843b"><span class="section-number-4">1.11.1.</span> (4) Outliers</h4>
<div class="outline-text-4" id="text-1-11-1">
<ol class="org-ol">
<li>y<sub>i</sub> value far from predicted \(\widehat{y}_i\)</li>
<li>Visualise by plotting residuals, or standardized residuals, vs predicted \(y\)</li>
<li>Points with std residuals &gt; 2-3 sd away from mean (0) are outliers</li>
<li>Causes:
<ol class="org-ol">
<li>Incorrect data recording</li>
<li>Phenomenon is not linear (model is wrong, missing predictor, etc)</li>
</ol></li>
<li>Should ensure fit is <b>not</b> overly determined by one/ a few observations i.e. outliers</li>
<li>Outlier identified as <b>influential point</b> if it unduly influences the regression analysis
<img src="./img/0109-plot-x-y-influential.png" alt="0109-plot-x-y-influential.png" /></li>
</ol>
</div>
<ol class="org-ol">
<li><a id="org418473e"></a>Types<br />
<div class="outline-text-5" id="text-1-11-1-1">
<ol class="org-ol">
<li>Y, response outlier</li>
<li>X, predictor outlier, i.e. leverage point</li>
</ol>
</div>
</li>
<li><a id="org1fdd0c9"></a>Causes<br />
<div class="outline-text-5" id="text-1-11-1-2">
<ol class="org-ol">
<li>Case by case</li>
<li>Analyse by creating models with/without outlier to see effect on fitted line
<ol class="org-ol">
<li>For both predictor and response outliers</li>
</ol></li>
</ol>
</div>
</li>
</ol>
</div>
<div id="outline-container-orge0ce749" class="outline-4">
<h4 id="orge0ce749"><span class="section-number-4">1.11.2.</span> (5) High leverage points</h4>
<div class="outline-text-4" id="text-1-11-2">

<div id="org58087e7" class="figure">
<p><img src="./img/0108-high-leverage.png" alt="0108-high-leverage.png" />
</p>
</div>
<ol class="org-ol">
<li>These are observations with predictor \(x\) value outside normal range of observations for \(x\)
<ol class="org-ol">
<li>Does not have large std residual</li>
<li>Can affect regression results</li>
</ol></li>
<li>Point has high leverage if its deletion (by itself or with 2-3 other points) causes noticeable changes in the model</li>
<li>With many predictors: it's possible to have an observation within range of each predictor's value but still be unusual</li>
<li>Measure with <b>Cook's distance C<sub>i</sub></b>, i.e. the difference between coeff's obtained from:
<ol class="org-ol">
<li>The full data</li>
<li>The full data deleting observation \(i\)</li>
</ol></li>
<li>C<sub>i</sub> &gt; 1  = highly influential
<ol class="org-ol">
<li><b>Also</b> an influential point if C<sub>i</sub> &gt; 1</li>
</ol></li>
</ol>
</div>
</div>
<div id="outline-container-org9defd06" class="outline-4">
<h4 id="org9defd06"><span class="section-number-4">1.11.3.</span> Plots in R</h4>
<div class="outline-text-4" id="text-1-11-3">
<p>
plot(lm) model provides plots:
</p>
<dl class="org-dl">
<dt>Residual vs fitted</dt><dd>check if residuals have non-linear patterns</dd>
<dt>Normal Q-Q</dt><dd>check if residuals are normally distributed</dd>
<dt>Scale-location</dt><dd>check if standardized residuals are spread equally along fitted values</dd>
<dt>Residuals vs leverage</dt><dd>finds influential points, with C<sub>i</sub> &gt; 1</dd>
</dl>
</div>
</div>
<div id="outline-container-orgde04018" class="outline-4">
<h4 id="orgde04018"><span class="section-number-4">1.11.4.</span> (6) Multicollinearity</h4>
<div class="outline-text-4" id="text-1-11-4">
<ul class="org-ul">
<li>e.g. mpg ~ cyl; mpg ~ cyl + disp + wt.</li>
<li>The 2nd module exhibits multicollinearity.</li>
<li>Two or more predictors are linearly related</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="orgd06c499"></a>Check<br />
<div class="outline-text-5" id="text-1-11-4-1">
<ol class="org-ol">
<li>With variance inflation factors, VIF
<ol class="org-ol">
<li>Regress X<sub>j</sub> against all other X. Name resulting R<sup>2</sup> as \(R^2_j\)</li>
<li>Define VIF = \(\frac{1}{1-R^2_j}\), \(j=1,2,...,p\)</li>
<li>If X<sub>j</sub> has strong linear relationship to other X predictors, then R<sub>j</sub><sup>2</sup> is close to 1 and VIF<sub>j</sub> is large</li>
<li>VIF &gt; 5 -&gt; Multicollinearity</li>
<li>In R, use <code>vif(lm(model))</code> to check the VIF values. <code>library(car)</code> is required.</li>
</ol></li>
<li>Use correlation matrix</li>
</ol>
</div>
</li>
<li><a id="org9aec172"></a>Consequences<br />
<div class="outline-text-5" id="text-1-11-4-2">
<ol class="org-ol">
<li>OLS estimated parameters may have large variances and covariances, thus precise estimates difficult</li>
<li>Confidence intervals of estimated parameters are larger, hence can't reject H<sub>0</sub> (that b<sub>i</sub> = 0)</li>
<li>Regression coeffs might have wrong sign</li>
<li>Regression coeffs might be not significantly different from 0 even for large R<sup>2</sup></li>
<li>Adding explanatory variable changes other varS coeff</li>
</ol>
</div>
</li>
<li><a id="org944b57a"></a>Solution<br />
<div class="outline-text-5" id="text-1-11-4-3">
<ol class="org-ol">
<li>Pick one variable if multiple ones measure the same "thing"</li>
<li>Use PCA or factor analysis to create even more useful variable(s)</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org7ee2b9b" class="outline-2">
<h2 id="org7ee2b9b"><span class="section-number-2">2.</span> Module 02: Indicator variables and Interaction Terms</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-orgfe88b4b" class="outline-3">
<h3 id="orgfe88b4b"><span class="section-number-3">2.1.</span> M2L1: Intro (Customer Analytics Dataset)</h3>
<div class="outline-text-3" id="text-2-1">
<ul class="org-ul">
<li>Direct Marketing dataset</li>
<li>Modeling customer characteristics to predict AmountSpent</li>
<li>Understand why some individuals spent more than others
<ul class="org-ul">
<li>In particular, the effect of Salary</li>
</ul></li>
<li>Scatter plot of Salary vs AmountSpent
<ul class="org-ul">
<li>Can include the regression line</li>
</ul></li>
</ul>
</div>
<div id="outline-container-org9431f42" class="outline-4">
<h4 id="org9431f42"><span class="section-number-4">2.1.1.</span> No lecture quiz</h4>
</div>
</div>
<div id="outline-container-orgfe0041e" class="outline-3">
<h3 id="orgfe0041e"><span class="section-number-3">2.2.</span> M2L2: Creating and Using Indicator Variables</h3>
<div class="outline-text-3" id="text-2-2">
<ul class="org-ul">
<li>a.k.a. dummy variables</li>
<li>Categorical variables, e.g. age, are also known as factor variables
<ul class="org-ul">
<li>They have distinct values, e.g. Age = Old, Age = Young, Age = Middle</li>
</ul></li>
<li>How to include age variable in regression model that requires numeric values?</li>
<li>e.g. if we want to investigate the effect of age on AmountSpent
<ul class="org-ul">
<li>Need to quantify this variable</li>
</ul></li>
<li>With 3 possible values for \(\text{Age}\), we need 2 indicator variables
<ul class="org-ul">
<li>Base case is both dummies = 0, i.e. Age = Young.</li>
<li>This is the reference group to compare for the other values of the dummy variable.</li>
<li>Any value of the categorical can be used as the base case</li>
<li>In this instance, the dummies created are:
<ol class="org-ol">
<li><code>AgeMid</code> = 1 if Age = Middle, 0 otherwise</li>
<li><code>AgeOld</code> = 1 if Age = Old, 0 otherwise</li>
</ol></li>
</ul></li>
<li>Regression equation: \(\text{AmountSpent} = b_0 + b_1*\text{AgeMid} + b_2*\text{AgeOld}\)</li>
</ul>
</div>
<div id="outline-container-orgefd15af" class="outline-4">
<h4 id="orgefd15af"><span class="section-number-4">2.2.1.</span> M2L2 lecture quiz</h4>
<div class="outline-text-4" id="text-2-2-1">
<dl class="org-dl">
<dt>Can record have AgeMid = 0, AgeOld = 0?</dt><dd>Yes, when Age = Yound</dd>
<dt>Can record have AgeMid = 1, AgeOld = 1?</dt><dd>No</dd>
</dl>
</div>
</div>
</div>
<div id="outline-container-org4653098" class="outline-3">
<h3 id="org4653098"><span class="section-number-3">2.3.</span> M2L3: Interpreting the coefficients of indicator variables</h3>
<div class="outline-text-3" id="text-2-3">
</div>
<div id="outline-container-org793de4f" class="outline-4">
<h4 id="org793de4f"><span class="section-number-4">2.3.1.</span> DR1: regression with dummy variable</h4>
<div class="outline-text-4" id="text-2-3-1">
<ul class="org-ul">
<li><p>
Coeffs:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Estimate</th>
<th scope="col" class="org-left">t-value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Intercept</td>
<td class="org-right">55.862</td>
<td class="org-left">10.93***</td>
</tr>

<tr>
<td class="org-left">AgeMid</td>
<td class="org-right">94.307</td>
<td class="org-left">14.75***</td>
</tr>

<tr>
<td class="org-left">AgeOld</td>
<td class="org-right">87.350</td>
<td class="org-left">11.03***</td>
</tr>
</tbody>
</table></li>
<li>Equation: \(\text{AmountSpent} = b_0 + b_1*\text{AgeMid} + b_2*\text{AgeOld}\)</li>
<li>Age = Young spends average $55.862
<ul class="org-ul">
<li>This is the base case</li>
</ul></li>
<li>Middle age average AmountSpent = $55.862+$94.307
<ul class="org-ul">
<li>The AgeMid coefficient is the increase in AmountSpent for middle aged customers compared to young customers</li>
</ul></li>
<li>Graphically, the indicator variable shifts up the Mid and Old AmountSpent. All are parallel to x-asis.</li>
<li>In R, a factor variable can be used directly without constructing the indicator variable, e.g.
<code>lm(AmountSpent ~ Age, data=dirmkt)</code>
<ul class="org-ul">
<li>R provides the new variables AgeMiddle and AgeYoung</li>
<li><p>
Use contrasts function to find the base case, e.g. <code>contrasts(dirmkt$Age)</code> which shows:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Middle</th>
<th scope="col" class="org-right">Young</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Old</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-left">Middle</td>
<td class="org-right">1</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-left">Young</td>
<td class="org-right">0</td>
<td class="org-right">1</td>
</tr>
</tbody>
</table></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org0b57472" class="outline-4">
<h4 id="org0b57472"><span class="section-number-4">2.3.2.</span> DR2: regression with salary and dummy variables</h4>
<div class="outline-text-4" id="text-2-3-2">
<ul class="org-ul">
<li><p>
Coeffs
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Estimate</th>
<th scope="col" class="org-right">t-value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Intercept</td>
<td class="org-right">-6.12</td>
<td class="org-right">-1.30</td>
</tr>

<tr>
<td class="org-left">Salary</td>
<td class="org-right">0.002</td>
<td class="org-right">25</td>
</tr>

<tr>
<td class="org-left">AgeMid</td>
<td class="org-right">-4.81</td>
<td class="org-right">-0.75</td>
</tr>

<tr>
<td class="org-left">AgeOld</td>
<td class="org-right">23.28</td>
<td class="org-right">3.46</td>
</tr>
</tbody>
</table></li>

<li>Equation: \(\text{AmountSpent} = b_0 + b_1*\text{Salary} + b_2*\text{AgeMid} + b_3*\text{AgeOld}\)</li>
<li>Graphically:
<ol class="org-ol">
<li>b<sub>1</sub> and b<sub>2</sub> are shifting up/down the Amount</li>
<li>Each age group has lines with slope b<sub>0</sub></li>
</ol></li>
</ul>
</div>
</div>
<div id="outline-container-orga793754" class="outline-4">
<h4 id="orga793754"><span class="section-number-4">2.3.3.</span> M2L3 lecture quiz</h4>
<div class="outline-text-4" id="text-2-3-3">
<ul class="org-ul">
<li>For the above coeffs, old customers spend more than young customers at the same salary level</li>
</ul>
</div>
</div>
</div>


<div id="outline-container-org22c1824" class="outline-3">
<h3 id="org22c1824"><span class="section-number-3">2.4.</span> M2L4: Interaction term and interpreting its coefficient</h3>
<div class="outline-text-3" id="text-2-4">
<ul class="org-ul">
<li>Example: regression with dummy variables.</li>
<li><code>Location</code> is categorical variable with values:
<ul class="org-ul">
<li>"Close" = customer lives close to store that sells similar merchandise</li>
<li>"Far" = customer does not live close&#x2026;</li>
</ul></li>
<li>Create a new variable <code>Far</code>:
<ul class="org-ul">
<li>\(1\) if <code>Location</code> = Far</li>
<li>\(0\) otherwise</li>
</ul></li>
<li><p>
Coeffs:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Estimate</th>
<th scope="col" class="org-right">t-value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Intercept</td>
<td class="org-right">-20.48</td>
<td class="org-right">-4.64</td>
</tr>

<tr>
<td class="org-left">Salary</td>
<td class="org-right">0.002</td>
<td class="org-right">34.05</td>
</tr>

<tr>
<td class="org-left">Far</td>
<td class="org-right">59.06</td>
<td class="org-right">13.38</td>
</tr>
</tbody>
</table></li>
<li>Equation: \(\text{Amount Spent} = b_0 + b_1 \text{Salary} + b_2 \text{Far}\)</li>
<li>Estimated amt spent for customer who lives \(Far\):
<ul class="org-ul">
<li>38.58 + 0.002*Salary</li>
</ul></li>
<li>Assumptions:
<ul class="org-ul">
<li>Customers who live far away will spend <b>at the same rate</b> that customers who live nearby. Is this realistic?</li>
</ul></li>
</ul>
</div>
<div id="outline-container-orge96f366" class="outline-4">
<h4 id="orge96f366"><span class="section-number-4">2.4.1.</span> Interaction term</h4>
<div class="outline-text-4" id="text-2-4-1">
<ul class="org-ul">
<li>Same example but construct new variable</li>
<li>\(\text{SalaryFar} = \text{Salary} \times \text{Far}\)</li>
<li>\(\text{Amount Spent} = b_0 + b_1 \text{Salary} + b_2 \text{Far} + b_3 \text{SalaryFar}\)</li>
<li>New coeffs:</li>
</ul>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Estimate</th>
<th scope="col" class="org-right">t-value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Intercept</td>
<td class="org-right">1.448</td>
<td class="org-right">0.3</td>
</tr>

<tr>
<td class="org-left">Salary</td>
<td class="org-right">0.002</td>
<td class="org-right">24.72</td>
</tr>

<tr>
<td class="org-left">Far</td>
<td class="org-right">-13.46</td>
<td class="org-right">-1.55</td>
</tr>

<tr>
<td class="org-left">SalaryFar</td>
<td class="org-right">0.001</td>
<td class="org-right">9.57</td>
</tr>
</tbody>
</table>
<ul class="org-ul">
<li>Interpretation of coefficient for \(\text{SalaryFar}\):
b<sub>3</sub> is the amount to add to b<sub>1</sub> to get the slope for people who live far away
<img src="./img/0204-interaction_term.png" alt="0204-interaction_term.png" /></li>
</ul>
</div>
</div>
<div id="outline-container-org06fda61" class="outline-4">
<h4 id="org06fda61"><span class="section-number-4">2.4.2.</span> M2L4 lecture quiz</h4>
<div class="outline-text-4" id="text-2-4-2">
<ol class="org-ol">
<li>If the salary for customer who lives close increases by $10,000, what is the projected increase in AmountSpent for that customer?
<ul class="org-ul">
<li>$10000*0.002=$20</li>
</ul></li>
<li>What is the equivalent increase for a customer who lives Far?
<ul class="org-ul">
<li>$10000*0.002+$10000*0.001 = $30</li>
</ul></li>
</ol>
</div>
</div>
<div id="outline-container-org93493d1" class="outline-4">
<h4 id="org93493d1"><span class="section-number-4">2.4.3.</span> Categorical variable with \(\text{M}\) values</h4>
<div class="outline-text-4" id="text-2-4-3">
<ul class="org-ul">
<li>Indicator variable has \(M\) possible values, then need to construct \(M-1\) dummy variables.</li>
<li>Base case always applied to the group with indicator variables set to \(0\).</li>
<li>All other cases interpreted with reference to base case.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org2aec8bd" class="outline-3">
<h3 id="org2aec8bd"><span class="section-number-3">2.5.</span> M2L5: Another example of using indicator variables</h3>
<div class="outline-text-3" id="text-2-5">
</div>
<div id="outline-container-org77ad944" class="outline-4">
<h4 id="org77ad944"><span class="section-number-4">2.5.1.</span> Airbnb Los Angeles dataset</h4>
<div class="outline-text-4" id="text-2-5-1">
<ul class="org-ul">
<li>e.g. owner aiming to understand key factors that influence price</li>
<li>Questions:
<ol class="org-ol">
<li>Is there a relationship between capacity and price?</li>
<li>Does the type of rental (shared, private or full home) change the relationship?</li>
</ol></li>
</ul>
</div>
</div>
<div id="outline-container-org41ecd1b" class="outline-4">
<h4 id="org41ecd1b"><span class="section-number-4">2.5.2.</span> 2DR1: How does room price vary by capacity?</h4>
<div class="outline-text-4" id="text-2-5-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Intercept</td>
<td class="org-right">15.039</td>
</tr>

<tr>
<td class="org-left">Capacity</td>
<td class="org-right">38.272</td>
</tr>

<tr>
<td class="org-left">R<sup>2</sup></td>
<td class="org-right">0.367</td>
</tr>

<tr>
<td class="org-left">Adjusted R<sup>2</sup></td>
<td class="org-right">0.367</td>
</tr>
</tbody>
</table>
<p>
Create two dummy variables as follows. Base case (both 0) is "Shared" <code>room type</code>.
</p>
<ol class="org-ol">
<li><code>Private_ind</code>:
<ol class="org-ol">
<li>1 if "Private room" <code>room type</code></li>
<li>0 otherwise</li>
</ol></li>
<li><code>House_ind</code>
<ol class="org-ol">
<li>1 if "Entire home/apt" <code>room type</code></li>
<li>0 otherwise</li>
</ol></li>
</ol>
</div>
<ol class="org-ol">
<li><a id="org59a33e6"></a>2DR1: Equation<br />
<div class="outline-text-5" id="text-2-5-2-1">
<p>
\[
\text{Price} = b_0 + b_1*\text{Private_ind} + b_2*\text{House_ind}
\]
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Estimate</th>
<th scope="col" class="org-right">p-value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Intercept</td>
<td class="org-right">37.149</td>
<td class="org-right">12.58</td>
</tr>

<tr>
<td class="org-left">Private<sub>ind</sub></td>
<td class="org-right">35.666</td>
<td class="org-right">11.42</td>
</tr>

<tr>
<td class="org-left">House<sub>ind</sub></td>
<td class="org-right">133.442</td>
<td class="org-right">43.64</td>
</tr>
</tbody>
</table>
</div>
</li>
<li><a id="org09f3ec9"></a>2DR1: Interpretation:<br />
<div class="outline-text-5" id="text-2-5-2-2">
<dl class="org-dl">
<dt>Average price of room = 37.149</dt><dd>Shared room</dd>
<dt>Average price of private room</dt><dd>37.149+35.666</dd>
<dt>Average price of entire house</dt><dd>37.149+133.442</dd>
</dl>
</div>
</li>
</ol>
</div>
<div id="outline-container-org09f4188" class="outline-4">
<h4 id="org09f4188"><span class="section-number-4">2.5.3.</span> 2DR2: 2nd regression with capacity and dummies</h4>
<div class="outline-text-4" id="text-2-5-3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Estimate</th>
<th scope="col" class="org-right">t-value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Intercept</td>
<td class="org-right">-19.017</td>
<td class="org-right">-7.101</td>
</tr>

<tr>
<td class="org-left">Capacity</td>
<td class="org-right">29.292</td>
<td class="org-right">82.605</td>
</tr>

<tr>
<td class="org-left">Private<sub>ind</sub></td>
<td class="org-right">30.339</td>
<td class="org-right">11.076</td>
</tr>

<tr>
<td class="org-left">House<sub>ind</sub></td>
<td class="org-right">75.776</td>
<td class="org-right">27.346</td>
</tr>
</tbody>
</table>
<ul class="org-ul">
<li>Equation:
\[
  \text{Price} = b_0 + b_1*\text{Capacity} + b_2*\text{Private_ind} + b_3*\text{House_ind}
  \]</li>
<li>Question: What's the average increase in price for each extra person (capacity)?</li>
<li>Image: <img src="./img/0205-2dr2-slope.png" alt="0205-2dr2-slope.png" /></li>
</ul>
</div>
</div>
<div id="outline-container-orge86cd3e" class="outline-4">
<h4 id="orge86cd3e"><span class="section-number-4">2.5.4.</span> Interaction terms</h4>
<div class="outline-text-4" id="text-2-5-4">
<ol class="org-ol">
<li>Create 2 new variables:
<ol class="org-ol">
<li><code>P_Cap</code>: <code>Private_ind</code> * <code>Capacity</code></li>
<li><code>H_Cap</code>: <code>House_ind</code> * <code>Capacity</code></li>
</ol></li>
<li>New equation
\[
  \text{Price} = b_0 + b_1*\text{Capacity} + b_2*\text{Private_ind} + b_3*\text{House_ind} + b_4*\text{P_Cap} + b_5*\text{H_Cap}
  \]</li>
<li><p>
Regression coeff's:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Estimate</th>
<th scope="col" class="org-right">t-value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Intercept</td>
<td class="org-right">35.885</td>
<td class="org-right">8.728***</td>
</tr>

<tr>
<td class="org-left">Capacity</td>
<td class="org-right">0.659</td>
<td class="org-right">0.391</td>
</tr>

<tr>
<td class="org-left">Private<sub>ind</sub></td>
<td class="org-right">20.684</td>
<td class="org-right">4.427***</td>
</tr>

<tr>
<td class="org-left">House<sub>ind</sub></td>
<td class="org-right">2.293</td>
<td class="org-right">0.518</td>
</tr>

<tr>
<td class="org-left">P<sub>Cap</sub></td>
<td class="org-right">7.080</td>
<td class="org-right">3.636***</td>
</tr>

<tr>
<td class="org-left">H<sub>Cap</sub></td>
<td class="org-right">33.414</td>
<td class="org-right">19.323***</td>
</tr>
</tbody>
</table></li>
</ol>
</div>

<ol class="org-ol">
<li><a id="org2c721d0"></a>Interpretation<br />
<div class="outline-text-5" id="text-2-5-4-1">
<ol class="org-ol">
<li>b<sub>4</sub> is the amount to add to b<sub>1</sub> to get slope for Private room</li>
<li>b<sub>5</sub> is the amount to add to b<sub>1</sub> to get slope for a House</li>
<li>Statistically, capacity and house<sub>ind</sub> are not very different from 0.
<img src="./img/0205-interaction-terms-2dr2.png" alt="0205-interaction-terms-2dr2.png" /></li>
</ol>
</div>
</li>
</ol>
</div>
<div id="outline-container-orgbf3a730" class="outline-4">
<h4 id="orgbf3a730"><span class="section-number-4">2.5.5.</span> No lecture quiz</h4>
</div>
</div>
</div>
<div id="outline-container-org8dd56fa" class="outline-2">
<h2 id="org8dd56fa"><span class="section-number-2">3.</span> Module 03: Non-linear transformation models</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-orgbd85651" class="outline-3">
<h3 id="orgbd85651"><span class="section-number-3">3.1.</span> M3L1: Intro (and why needed)</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Examples:
</p>
<ol class="org-ol">
<li>Population and rank of cities</li>
<li>Residuals and predicted price (Housing dataset)
<ol class="org-ol">
<li>Non-constant variance (heteroskedascity)</li>
<li>Model A: \(\text{price} = b_0 +b_1 *\text{lotsize}\)
<ul class="org-ul">
<li>Q-Q plot shows non-linearity</li>
<li>Residuals vs fitted shows non-constant variance</li>
</ul></li>
</ol></li>
<li><b>FOCUS</b> on natural log transformations in 6203 as these are easier to interpret</li>
</ol>
</div>
</div>
<div id="outline-container-org393829a" class="outline-3">
<h3 id="org393829a"><span class="section-number-3">3.2.</span> Summary of models</h3>
<div class="outline-text-3" id="text-3-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">Y</th>
<th scope="col" class="org-left">log(Y)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">X</td>
<td class="org-left">Model A: level-level model     \(Y=b_0 + b_1X\)</td>
<td class="org-left">Model C: log-linear model \(\log(Y)=b_0+b_1X\)</td>
</tr>

<tr>
<td class="org-left">log(x)</td>
<td class="org-left">Model B: linear-log model \(Y=b_0 + b_1\log(X)\)</td>
<td class="org-left">Model D log-log model \(\log(Y) = b_0 + b_1\log(X)\)</td>
</tr>
</tbody>
</table>
<p>
Notes: if variable \(x\) has values = 0, then use log(x+1) transformation.
</p>
</div>
</div>


<div id="outline-container-orgb8c6ec9" class="outline-3">
<h3 id="orgb8c6ec9"><span class="section-number-3">3.3.</span> M3L2: Linear-Log model</h3>
<div class="outline-text-3" id="text-3-3">
<ul class="org-ul">
<li><p>
Coeff table:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Estimate</th>
<th scope="col" class="org-right">t-value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Intercept</td>
<td class="org-right">-250.728</td>
<td class="org-right">-12.42</td>
</tr>

<tr>
<td class="org-left">log(lotsize)</td>
<td class="org-right">37660</td>
<td class="org-right">15.81</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li>R<sup>2</sup> = 0.315</li>
<li>Adjusted R<sup>2</sup> = 0.3137</li>
<li>Equation:
\(\text{price} = b_0 + b_1\log(\text{lotsize})\)
<ul class="org-ul">
<li>Creates a new variable log(lotsize), which is the natural log of \(\text{lotsize}\)</li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="outline-container-org5260d74" class="outline-4">
<h4 id="org5260d74"><span class="section-number-4">3.3.1.</span> Interpretation of coefficients</h4>
<div class="outline-text-4" id="text-3-3-1">
<p>
b<sub>1</sub> = 37660 implies that:
</p>
<ul class="org-ul">
<li>for every 1% increase in \(\text{lotsize}\):</li>
<li>the price increases by $376.60 approximately (i.e. 1/100 coefficient)</li>
<li>This works because increasing X by 1% is ~ increasing log(X) by 0.01</li>
<li>Hence the increase changes Y variable by 0.01*b<sub>1</sub></li>
</ul>
</div>
</div>
<div id="outline-container-orgec2b07c" class="outline-4">
<h4 id="orgec2b07c"><span class="section-number-4">3.3.2.</span> No lecture quiz</h4>
</div>
</div>
<div id="outline-container-orgcddbd29" class="outline-3">
<h3 id="orgcddbd29"><span class="section-number-3">3.4.</span> M3L3: Log-Linear model</h3>
<div class="outline-text-3" id="text-3-4">
<p>
Model C: \(\log(\text{price}) = b_0 + b_1\text{lotsize}\)
</p>
<ul class="org-ul">
<li><p>
Coeff table
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Estimate</th>
<th scope="col" class="org-right">t-value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Intercept</td>
<td class="org-right">10.58</td>
<td class="org-right">306.51</td>
</tr>

<tr>
<td class="org-left">lotsize</td>
<td class="org-right">0.00009315</td>
<td class="org-right">15.08</td>
</tr>
</tbody>
</table>
<ul class="org-ul">
<li>R<sup>2</sup> = 0.2947</li>
<li>Adjusted R<sup>2</sup> = 0.2935</li>
</ul></li>
<li>Creates a new variable log(price)</li>
</ul>
</div>
<div id="outline-container-orgf879a0e" class="outline-4">
<h4 id="orgf879a0e"><span class="section-number-4">3.4.1.</span> Interpretation of coefficients</h4>
<div class="outline-text-4" id="text-3-4-1">
<ul class="org-ul">
<li>Coefficient b<sub>1</sub> indicates:
<ul class="org-ul">
<li>When lotsize increases by 1 sqft,</li>
<li>Price increases by 0.009315% on average, <span class="underline">i.e.</span></li>
</ul></li>
<li>Dependent variable changes by \(100\times\text{coefficient}\) percent
<ul class="org-ul">
<li>for a 1 unit increase in independent variable</li>
<li>Keeping all other variables constant</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org759a09b" class="outline-4">
<h4 id="org759a09b"><span class="section-number-4">3.4.2.</span> Derivation</h4>
<div class="outline-text-4" id="text-3-4-2">
<ul class="org-ul">
<li>Increase x by 1 unit increases log(y) by b<sub>1</sub> units</li>
<li>\(\log(price) = b_0 + b_1x\) is the same as:
\(y = e^{(b_0+b_1x)}\)</li>
<li>Hence: \(\frac{dy}{dx} = b_1y\), and \(\frac{dy}{y} = b_1dx\)</li>
<li>Multiplying by 100:
<ul class="org-ul">
<li>\(100\times\frac{dy}{y} = 100\times b_1\times dx\)</li>
</ul></li>
<li>\(100\times\frac{dy}{y}\) is the percentage change in \(Y\)</li>
<li>If dx=1, then this 1 unit change in x =&gt; 100b<sub>1</sub> % change in \(Y\)</li>
<li>Note that this approximation works when \(b_0+b_1x\) is very small</li>
<li>Accurate calc: \(\text{percentage change in Y} = (e^{b_1}-1)\times100\) for 1 unit change in \(X\).</li>
</ul>
</div>
</div>
<div id="outline-container-org54903d5" class="outline-4">
<h4 id="org54903d5"><span class="section-number-4">3.4.3.</span> No lecture quiz</h4>
</div>
</div>
<div id="outline-container-org1ce412c" class="outline-3">
<h3 id="org1ce412c"><span class="section-number-3">3.5.</span> M3L4: Log-Log model</h3>
</div>
<div id="outline-container-org7dd046e" class="outline-3">
<h3 id="org7dd046e"><span class="section-number-3">3.6.</span> M3L5: Polynomial model</h3>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: W</p>
<p class="date">Created: 2023-02-04 Sat 23:39</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
